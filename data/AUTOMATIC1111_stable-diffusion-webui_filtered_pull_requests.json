[
    {
        "merged": false,
        "additions": 1190,
        "deletions": 145,
        "changed_files": 38,
        "created_at": "2023-10-17T18:33:48Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\nImplementing ray serve to use api across multi gpus, and with autoscaling\r\n\r\n* a summary of changes in code\r\na seperate implementation of module/api/api.py thats for use with ray, its the exact same as api.py but instead of using the APIrouter() i just put each route of each function, \r\n\r\nthe modules/shared_items/shared shared class wouldnt pickleize with ray so i had to restructure and instantiate it and refactor all the uses of it to use the unstance versus the module directly\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19884161/01341715-8103-40dd-a19b-bdc3cb35f498)\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19884161/2cb62114-0dac-4554-a128-c4f1e90a5230)\r\n\r\n\r\n## Checklist:\r\n\r\n- [ x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x ] I have performed a self-review of my own code\r\n- [x ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-17T13:53:57Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nI have a problem with both dev and master where the clip model loading errors out here and proceeds to download the pickle anyway. \r\n\r\nOnce you have d/l the model it never stops making this error because this doesn't really disable anything, it just makes it load the \"slow\" way.\r\n\r\nsee:\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/13245\r\n\r\nIt may not save you from downloading the 2 clip models for both SD and SDXL but at least it stops the command line from spamming every time I run SD.\r\n\r\nIf anyone has a better fix to prevent CLIP model loading entirely...\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 961,
        "deletions": 24,
        "changed_files": 20,
        "created_at": "2023-10-16T16:55:19Z",
        "closed_at": "2023-10-16T16:56:36Z",
        "merged_at": null,
        "body": "PR IN BETA DO NOT MERGE YET\r\n\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 22,
        "deletions": 7,
        "changed_files": 8,
        "created_at": "2023-10-16T06:17:25Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nresolves #7488, resolves #8898\r\n\r\nAnd an option (in the System tab) to Interrupt after the current generation when doing batch.\r\n\r\n## Alternative\r\n\r\n- A new button \"Interrupt on next\" alongside with \"Interrupt\" and \"Skip\" buttons\r\n\r\n## Screenshots/videos:\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/11247099/1179dfb9-d1a9-4ec0-8b3b-b070ce1f91e9\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-10-16T05:46:01Z",
        "closed_at": "2023-10-16T15:08:35Z",
        "merged_at": null,
        "body": "## Description\n\nclose #8310\n\n`.DS_Store` is a common file generated by Finder (File Explorer) in ever folder. It should be ignored in general.\n\n## Screenshots/videos:\n\n\n## Checklist:\n\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\n- [x] I have performed a self-review of my own code\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2023-10-14T23:37:44Z",
        "closed_at": "2023-10-15T11:19:48Z",
        "merged_at": "2023-10-15T11:19:48Z",
        "body": "Add ability to interrupt current generation and start generation again by Ctrl (Alt) + Enter\r\n\r\n## Description\r\n\r\nNow, when you experiment with prompting (using hotkeys as usual), you don't have to reach for your mouse to interrupt the current generation, but simply press Ctrl + Enter or Alt + Enter to interrupt current generation and start next.\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/1196046/62271d81-1790-4de4-81cd-20b9ddabcfd3\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 236,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2023-10-14T23:32:49Z",
        "closed_at": null,
        "merged_at": null,
        "body": "Restores old DIMM. Old implementations have o prefix.\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 165,
        "deletions": 163,
        "changed_files": 1,
        "created_at": "2023-10-14T23:26:49Z",
        "closed_at": "2023-10-14T23:29:38Z",
        "merged_at": null,
        "body": "Add ability to interrupt current generation and start generation again by Ctrl (Alt) + Enter\r\n\r\n## Description\r\n\r\nNow, when you experiment with prompting (using hotkeys as usual), you don't have to reach for your mouse to interrupt the current generation, but simply press Ctrl + Enter or Alt + Enter to interrupt current generation and start next.\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/1196046/fa7a472a-197f-46ae-a7d9-3ccc80081b83\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-10-14T13:06:47Z",
        "closed_at": "2023-10-14T20:00:36Z",
        "merged_at": "2023-10-14T20:00:36Z",
        "body": "## Description\r\n\r\n* support `webui.settings.bat` to avoid version control issues.\r\n   * ~~`webui.settings.bat` will be copied from `webui.settings.bat.in` if not exist~~\r\n   * ~~any variables newly defined in the `webui.settings.bat` will override settings defined in the `webui-user.bat`~~\r\n* same method suggested by PR #148 , see also PR #13601\r\n\r\n## Screenshots/videos:\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-10-13T18:18:26Z",
        "closed_at": "2023-10-14T04:30:31Z",
        "merged_at": "2023-10-14T04:30:31Z",
        "body": "## Description\r\n\r\n**Issue**: Sometimes you need to turn notification sound off and then back on depending on the environment you are working in. It is inconvenient to rename notification.mp3 file each time just to manage the notification sound.\r\n\r\nThe PR adds a checkbox to settings named \"Play notification sound\" which allows to turn sound on and off.\r\n\r\n## Checklist:\r\n\r\n- [v] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [v] I have performed a self-review of my own code\r\n- [v] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [v] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-10-13T17:48:23Z",
        "closed_at": "2023-10-14T04:46:35Z",
        "merged_at": "2023-10-14T04:46:35Z",
        "body": "## Description\r\n\r\n~~~\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\processing.py\", line 734, in process_images\r\n        res = process_images_inner(p)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\extensions\\sd-webui-controlnet\\scripts\\batch_hijack.py\", line 42, in processing_process_images_hijack\r\n        return getattr(processing, '__controlnet_original_process_images_inner')(p, *args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\processing.py\", line 989, in process_images_inner\r\n        info=infotexts[0],\r\n    IndexError: list index out of range\r\n...\r\n~~~\r\n* fix IndexError: list index out of range error when interrupted while postprocessing\r\n* This fix simply adds a default infotext\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-10-12T11:56:44Z",
        "closed_at": "2023-10-12T12:53:15Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n*  Added Ds_Store in gitignore \r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 35,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-10-12T04:57:51Z",
        "closed_at": "2023-10-14T04:52:52Z",
        "merged_at": "2023-10-14T04:52:52Z",
        "body": "## Description\r\n\r\nThis PR adds support for inference of networks that are trained with LyCORIS GLora. The implementation is based on the excellent implementation by @KohakuBlueleaf here: https://github.com/KohakuBlueleaf/LyCORIS/blob/main/lycoris/modules/glora.py\r\n\r\nChanges:\r\n* Added a new Python file `network_glora.py` in extensions-builtin/Lora.\r\n* Modified extensions-builtin/Lora/networks.py to use the new module type.\r\n\r\nOther notes:\r\n* The network tested was trained with [kohya_ss](https://github.com/bmaltais/kohya_ss) with arguments `--network_module=lycoris.kohya --network_args \"conv_dim=4\" \"conv_alpha=4\" \"algo=glora\"`\r\n* Link to the GLora paper: https://arxiv.org/abs/2306.07967\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1380,
        "deletions": 5,
        "changed_files": 8,
        "created_at": "2023-10-11T19:50:30Z",
        "closed_at": "2023-10-11T19:50:36Z",
        "merged_at": null,
        "body": "Remove scaled_dot_product_flash_attention code from attention_processor in diffusers.models to support public torch 2.1.0 package\r\n\r\nthis op is supported in beta openvino toolkit.\r\n\r\n\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 8,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-10-11T13:40:21Z",
        "closed_at": "2023-10-15T06:46:08Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* rename `webu-user.bat` to `webui-user.bat.in` and copy it if `webui-user.bat` does not exist to avoid version control issues.\r\n* Please see also PR #148\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 9,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-10-10T20:40:48Z",
        "closed_at": "2023-10-15T06:45:34Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* [x] check valid sd_model before call `send_model_to_cpu` when reload after unload.\r\n* [x] fix realod after unload issue. (raise ``AttributeError: 'NoneType' object has no attribute 'lowvram'`` error)\r\n  * call `sd_hijack.model_hijack.hijack(already_loaded)`, `sd_unet.apply_unet()` are needed to use a reusing model. \r\n\r\n##  Steps to reproduce the problem\r\n\r\n### `sd_checkpoints_limit == 1` case:\r\n1. go to `Settings tab` -> `Actions`, click `Unload SD checkpoint to free VRAM` then `Reload SD checkpoint back into VRAM`\r\n2. generate an image -> you will get the follow `TypeError`\r\n   <details> \r\n   <summary>TypeError: 'NoneType' object is not callable</summary>\r\n   <div>\r\n   <pre>\r\n   Unloaded weights 0.0s. ## <--- unload button clicked\r\n   Using already loaded model ACertainModel-half.ckpt [57ca9c4028]: done in 1.1s (send model to device: 1.1s) ## <-- reload button clicked.\r\n   ### generate button clicked then,\r\n   *** Error completing request\r\n   *** Arguments: ('task(y9ni6a78lfre3r4)', 'girl,.... (snip)\r\n   </pre>\r\n   <pre>\r\n    Traceback (most recent call last):\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\call_queue.py\", line 57, in f\r\n        res = list(func(*args, **kwargs))\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\call_queue.py\", line 36, in f\r\n        res = func(*args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\txt2img.py\", line 55, in txt2img\r\n        processed = processing.process_images(p)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\processing.py\", line 734, in process_images\r\n        res = process_images_inner(p)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\extensions\\sd-webui-controlnet\\scripts\\batch_hijack.py\", line 42, in processing_process_images_hijack\r\n        return getattr(processing, '__controlnet_original_process_images_inner')(p, *args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\processing.py\", line 869, in process_images_inner\r\n        samples_ddim = p.sample(conditioning=p.c, unconditional_conditioning=p.uc, seeds=p.seeds, subseeds=p.subseeds, subseed_strength=p.subseed_strength, prompts=p.prompts)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\processing.py\", line 1145, in sample\r\n        samples = self.sampler.sample(self, x, conditioning, unconditional_conditioning, image_conditioning=self.txt2img_image_conditioning(x))\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_samplers_kdiffusion.py\", line 235, in sample\r\n        samples = self.launch_sampling(steps, lambda: self.func(self.model_wrap_cfg, x, extra_args=self.sampler_extra_args, disable=False, callback=self.callback_state, **extra_params_kwargs))\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_samplers_common.py\", line 261, in launch_sampling\r\n        return func()\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_samplers_kdiffusion.py\", line 235, in <lambda>\r\n        samples = self.launch_sampling(steps, lambda: self.func(self.model_wrap_cfg, x, extra_args=self.sampler_extra_args, disable=False, callback=self.callback_state, **extra_params_kwargs))\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\torch\\utils\\_contextlib.py\", line 115, in decorate_context\r\n        return func(*args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\repositories\\k-diffusion\\k_diffusion\\sampling.py\", line 594, in sample_dpmpp_2m\r\n        denoised = model(x, sigmas[i] * s_in, **extra_args)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\torch\\nn\\modules\\module.py\", line 1503, in _call_impl\r\n        return forward_call(*args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_samplers_cfg_denoiser.py\", line 169, in forward\r\n        x_out = self.inner_model(x_in, sigma_in, cond=make_condition_dict(cond_in, image_cond_in))\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\torch\\nn\\modules\\module.py\", line 1503, in _call_impl\r\n        return forward_call(*args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\repositories\\k-diffusion\\k_diffusion\\external.py\", line 112, in forward\r\n        eps = self.get_eps(input * c_in, self.sigma_to_t(sigma), **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\repositories\\k-diffusion\\k_diffusion\\external.py\", line 138, in get_eps\r\n        return self.inner_model.apply_model(*args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_hijack_utils.py\", line 17, in <lambda>\r\n        setattr(resolved_obj, func_path[-1], lambda *args, **kwargs: self(*args, **kwargs))\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_hijack_utils.py\", line 28, in __call__\r\n        return self.__orig_func(*args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\repositories\\stable-diffusion-stability-ai\\ldm\\models\\diffusion\\ddpm.py\", line 858, in apply_model\r\n        x_recon = self.model(x_noisy, t, **cond)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\torch\\nn\\modules\\module.py\", line 1503, in _call_impl\r\n        return forward_call(*args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\repositories\\stable-diffusion-stability-ai\\ldm\\models\\diffusion\\ddpm.py\", line 1335, in forward\r\n        out = self.diffusion_model(x, t, context=cc)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\torch\\nn\\modules\\module.py\", line 1503, in _call_impl\r\n        return forward_call(*args, **kwargs)\r\n      File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_unet.py\", line 91, in UNetModel_forward\r\n        return original_forward(self, x, timesteps, context, *args, **kwargs)\r\n    TypeError: 'NoneType' object is not callable\r\n   </pre>\r\n   </div>\r\n   </details>\r\n3. in this case, `sd_hijack.model_hijack.hijack(already_loaded)`, `sd_unet.apply_unet()` calls are needed to use a reusing model. \r\n\r\n###  `sd_checkpoints_limit > 1` case:\r\n1. load `A checkpoint`\r\n2. load `B checkpoint`\r\n3. load `A checkpoint` again and generate image -> no ploblem\r\n4. go to `Settings tab` -> `Actions`, click `Unload SD checkpoint to free VRAM` then `Reload SD checkpoint back into VRAM`\r\n   <details>\r\n   <summary>AttributeError: 'NoneType' object has no attribute 'lowvram'</summary>\r\n   <pre>\r\n   >### choose A, B checkpoints several times.\r\n   Reusing loaded model Basil_mix_fixed.safetensors [0ff127093f] to load Brav6.safetensors [c6318fa24a]\r\n   Loading weights [c6318fa24a] from F:\\webui\\webui\\stable-diffusion-webui\\models\\Stable-diffusion\\Brav6.safetensors\r\n   Loading VAE weights specified in settings: F:\\webui\\webui\\stable-diffusion-webui\\models\\VAE\\vae-ft-mse-840000-ema-pruned.safetensors\r\n   Applying attention optimization: sdp-no-mem... done.\r\n   Weights loaded in 7.3s (send model to cpu: 1.6s, load weights from disk: 0.5s, apply weights to model: 3.8s, load VAE: 0.4s, move model to device: 1.0s).\r\n   Reusing loaded model blessing-henmixfit.safetensors [3cc7ad686a] to load braBeautifulRealistic_brav5.safetensors [ac68270450]\r\n   Loading weights [ac68270450] from F:\\webui\\webui\\stable-diffusion-webui\\models\\Stable-diffusion\\braBeautifulRealistic_brav5.safetensors\r\n   Loading VAE weights specified in settings: F:\\webui\\webui\\stable-diffusion-webui\\models\\VAE\\vae-ft-mse-840000-ema-pruned.safetensors\r\n   Applying attention optimization: sdp-no-mem... done.\r\n   Weights loaded in 8.1s (send model to cpu: 1.6s, load weights from disk: 1.3s, apply weights to model: 3.8s, load VAE: 0.4s, move model to device: 1.0s).\r\n   Using already loaded model Brav6.safetensors [c6318fa24a]: done in 2.4s (send model to cpu: 1.3s, send model to device: 1.1s)\r\n   </pre>\r\n   <pre>\r\n   Unloaded weights 0.0s. ### <--- unload clicked.\r\n   Traceback (most recent call last): ## <--- reload clicked\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\gradio\\routes.py\", line 488, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\gradio\\blocks.py\", line 1431, in process_api\r\n    result = await self.call_function(\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\gradio\\blocks.py\", line 1103, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\anyio\\to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\lib\\site-packages\\gradio\\utils.py\", line 707, in wrapper\r\n    response = f(*args, **kwargs)\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_models.py\", line 753, in reload_model_weights\r\n    if sd_model.sd_model_checkpoint == checkpoint_info.filename:\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_models.py\", line 702, in reuse_model_from_already_loaded\r\n    send_model_to_cpu(sd_model)\r\n   File \"F:\\webui\\webui\\stable-diffusion-webui\\modules\\sd_models.py\", line 562, in send_model_to_cpu\r\n    if m.lowvram:\r\n   AttributeError: 'NoneType' object has no attribute 'lowvram'\r\n   </pre>\r\n   </details>\r\n 5. after this error, you can't select any other checkpoint at all, (goto tab `Extensions`-> `Apply and Restart UI` button click needed)\r\n 6. in this case, unload button calls `sd_hijack.model_hijack.undo_hijack(model_data.sd_model)`, then `model_data.sd_model=None` (sd_model is nullified.\r\n 7. but `reuse_model_from_already_loaded()` tries to call `send_model_to_cpu(sd_model)` -> `NoneType` error rises.\r\n 8. so we need to check the validity of `sd_model`\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 1495,
        "deletions": 359,
        "changed_files": 12,
        "created_at": "2023-10-10T19:46:52Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nThis pull request cleans up the scripts in the scripts folder by making code easier to read and more consistent. For example using the same quotes throughout the same script.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1498,
        "deletions": 360,
        "changed_files": 12,
        "created_at": "2023-10-10T19:37:58Z",
        "closed_at": "2023-10-10T19:45:35Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nThis pull request cleans up the scripts in the scripts folder by making code easier to read and more consistent. For example using the same quotes throughout the same script.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 115,
        "deletions": 34,
        "changed_files": 4,
        "created_at": "2023-10-09T14:59:26Z",
        "closed_at": "2023-10-14T09:18:55Z",
        "merged_at": "2023-10-14T09:18:55Z",
        "body": "## Description\r\nSome Trainer (like hcp-diffusion, naifu) have implemented a method of training called \"pivtoal tuning\", which is basically trained Embedding and LoRA(DreamBooth) at the same time.\r\nBut if the trainer want to train multiple concept within one model, it will produce lot of embedding files which is not very good for user and trainer to managing them.\r\n\r\nSo I developed this bundle system which can store the bundled embedding withing the lora files and load them with built-in lora extension.\r\n\r\nThe state_dict key name format:\r\n`\"bundle_emb.EMBEDDING_NAME.KEY_NAME\"`\r\nThe KEY_NAME here means the \"key\" in the embedding state_dict, the EMBEDDING_NAME means the \"trigger word\" of that embedding. With this format we can store multiple embedding within 1 lora file, which is good for pivotal tuning.\r\n\r\nThx to @narugo1992 and @cyber-meow for this idea.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-09T10:47:19Z",
        "closed_at": "2023-10-14T05:34:41Z",
        "merged_at": "2023-10-14T05:34:41Z",
        "body": "\r\n\r\n## Description\r\n\r\nThere is an option named `control_net_detectedmap_dir` in the controlnet extension.\r\n If the sd-webui is starting using --nowebui, there maybe no `config.json` file or no `control_net_detectedmap_dir` in the config.json.\r\nAnd when sending a API with `control_net_detectedmap_dir` key in `override_settings`, the exception will occur, because the `control_net_detectedmap_dir` is not in `opts.data`.\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/7628879/f200986f-d6f0-4b7a-b35a-79cb4663abb5)\r\n\r\n\r\nThe root cause is that the extension registers the options using `shared.opts.add_option`, in this method, it only updates the attribute `data_labels` and doesn't update the attribute data.\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/7628879/3556bfee-6a85-4ced-8f81-378b4905ee20)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/7628879/59703f24-6816-40e5-ab5c-ad4610a8560f)\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 11,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-10-09T10:33:12Z",
        "closed_at": "2023-10-15T05:45:58Z",
        "merged_at": null,
        "body": "This change implements #13564.\r\n\r\n## Description\r\n\r\nThis change:\r\n - modifies original `sigint_handler` in `initialize_util.py` to check for `signal.SIGINT` and exit without dumping stack\r\n - adds new `ctrl_c_handler` in `launch.py` to handle `signal.SIGINT` until the `sigint_handler` is installed\r\n\r\n## Screenshots/videos:\r\n\r\nN/A\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 23,
        "deletions": 10,
        "changed_files": 5,
        "created_at": "2023-10-09T02:42:12Z",
        "closed_at": "2023-10-14T04:51:09Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nkeep infotext_params to shared instead of writing to params.txt to lower the interaction with disks\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-10-08T16:31:36Z",
        "closed_at": "2023-10-09T09:55:16Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nPrint simple message on Ctrl-C keypress instead of a full stack trace.\r\n\r\nOnly changes are in `lauch.py`, so I don't think it is necessary to run tests.\r\n\r\n## Screenshots/videos:\r\n\r\nN/A\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-10-07T07:58:42Z",
        "closed_at": "2023-10-14T05:00:05Z",
        "merged_at": "2023-10-14T05:00:05Z",
        "body": "## Description\r\n\r\n* my understanding: checkpoints_loaded: use to cache state_dict\r\n* bug: model.load_state_dict(state_dict, strict=False) change state_dict to {}\r\n* reason: use with sd_disable_initialization.LoadStateDictOnMeta, will clean state_dict\r\n* fix: took the easier way, move cache code in front of model.load_state_dict(state_dict, strict=False),by the way, use deepcopy\r\n\r\n---\r\n---\r\n---\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n### the original error\r\n```\r\nautodl-fs/sd-data/extensions/sd-webui-controlnet/scripts/hook.py\", line 850, in forward_webui\r\n        return forward(*args, **kwargs)\r\n      File \"/root/autodl-fs/sd-data/extensions/sd-webui-controlnet/scripts/hook.py\", line 591, in forward\r\n        control = param.control_model(x=x_in, hint=hint, timesteps=timesteps, context=context, y=y)\r\n      File \"/root/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n        return forward_call(*args, **kwargs)\r\n      File \"/root/autodl-fs/sd-data/extensions/sd-webui-controlnet/scripts/cldm.py\", line 31, in forward\r\n        return self.control_model(*args, **kwargs)\r\n      File \"/root/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n        return forward_call(*args, **kwargs)\r\n      File \"/root/autodl-fs/sd-data/extensions/sd-webui-controlnet/scripts/cldm.py\", line 304, in forward\r\n        assert y.shape[0] == x.shape[0]\r\n    AttributeError: 'NoneType' object has no attribute 'shape'\r\n```\r\n**Explain**\r\n```\r\n set checkpoint cache size:6\r\n use sdxl and sdxl controlnet, normal\r\n change, use sd1.5 normal\r\n change, use sdxl and sdxl controlnet, checkpoints cache in ram, raise error\r\n   -  code:load from cache, get state_dict is {}\r\n   -  code:adjust model type, sdxl key not in state_dict, set model.is_sdxl = False, real model is previous model sd1.5\r\n   -  code:but, controlnet use sdxl canny, y value must be not none, then, raise error\r\n```\r\n---\r\n---\r\n---\r\n\r\n**print str(state_dict)[:100] for monitor**\r\n\r\n### use master branch code:ERROR\r\n```\r\n\r\n    with sd_disable_initialization.LoadStateDictOnMeta(state_dict, device=model_target_device(sd_model), weight_dtype_conversion=weight_dtype_conversion):\r\n        load_model_weights(sd_model, checkpoint_info, state_dict, timer)\r\n```\r\n**pay attention to:after map(in sd_disable_initialization.py), the state_dict has been change**\r\n```\r\nclip_is_included_into_sd:True, shared.cmd_opts.do_not_download_clip:False\r\nself.filename:/root/autodl-fs/sd-data/models/Stable-diffusion/7EhrMEzi5YX.safetensors, checkpoint/7EhrMEzi5YX.safetensors\r\nload_model_weights <modules.sd_models.CheckpointInfo object at 0x7f5e086257e0> model.is_sdxl False\r\nbefore load model load_state_dict {'cond_stage_model.transformer.text_model.embeddings.position_embedding.weight': tensor([[ 0.0016,\r\nmodel.load_state_dict /root/autodl-fs/qwcache/stable-diffusion-webui/modules/sd_disable_initialization.py\r\nbefore map {'cond_stage_model.transformer.text_model.embeddings.position_embedding.weight': tensor(..., device=\r\nload_state_dict torch before load OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nload_state_dict torch after load OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nload_state_dict torch del load OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nload_state_dict torch after strict OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nload_state_dict torch _IncompatibleKeys OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nafter map {'cond_stage_model.transformer.text_model.embeddings.position_embedding.weight': tensor(..., device=\r\nafter load model load_state_dict state_dict {}\r\nafter load model load_state_dict state_dict {}\r\n```\r\n\r\n### without  sd_disable_initialization.LoadStateDictOnMeta:NORMAL\r\n\r\n```\r\n    load_model_weights(sd_model, checkpoint_info, state_dict, timer)\r\n```\r\n```\r\nclip_is_included_into_sd:True, shared.cmd_opts.do_not_download_clip:False\r\nself.filename:/root/autodl-fs/sd-data/models/Stable-diffusion/epicrealism_pureEvolutionV5.safetensors, checkpoint/epicrealism_pureEvolutionV5.safetensors\r\nload_model_weights <modules.sd_models.CheckpointInfo object at 0x7f9f34629ae0> model.is_sdxl False\r\nbefore load model load_state_dict {'cond_stage_model.transformer.text_model.embeddings.position_embedding.weight': tensor([[ 0.0016,\r\nmodel.load_state_dict /root/miniconda3/lib/python3.10/site-packages/torch/nn/modules/module.py\r\nload_state_dict torch before load OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nload_state_dict torch after load OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nload_state_dict torch del load OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nload_state_dict torch after strict OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nload_state_dict torch _IncompatibleKeys OrderedDict([('cond_stage_model.transformer.text_model.embeddings.position_embedding.weight', tensor\r\nafter load model load_state_dict state_dict {'cond_stage_model.transformer.text_model.embeddings.position_embedding.weight': tensor([[ 0.0016,\r\nafter load model load_state_dict state_dict {'cond_stage_model.transformer.text_model.embeddings.position_embedding.weight': tensor([[ 0.0016,\r\nshared.opts.sd_checkpoint_cache 6\r\n```\r\n\r\n### MR && with sd_disable_initialization.LoadStateDictOnMeta:NORMAL\r\n**(load_state_dict still change state_dict to {}, but did not effect the follow code)**\r\n**load from cache correctly**\r\n```\r\nApplying attention optimization: xformers... done.\r\nModel loaded in 14.0s (create model: 0.5s, apply weights to model: 13.2s).\r\nReusing loaded model 7EhrMEzi5YX.safetensors [732d0dd2cf] to load sd_xl_base_1.0.safetensors [31e35c80fc]\r\nLoading weights [31e35c80fc] from cache\r\nCreating model from config: /root/autodl-fs/sd-data/models/Stable-diffusion/sd_xl_base_1.0.yaml\r\n...\r\ninstantiate_from_config done\r\nload_state_dict torch before load OrderedDict([('conditioner.embedders.0.transformer.text_model.embeddings.position_embedding.weight',\r\nload_state_dict torch after load OrderedDict([('conditioner.embedders.0.transformer.text_model.embeddings.position_embedding.weight',\r\nload_state_dict torch del load OrderedDict([('conditioner.embedders.0.transformer.text_model.embeddings.position_embedding.weight',\r\nload_state_dict torch after strict OrderedDict([('conditioner.embedders.0.transformer.text_model.embeddings.position_embedding.weight',\r\nload_state_dict torch _IncompatibleKeys OrderedDict([('conditioner.embedders.0.transformer.text_model.embeddings.position_embedding.weight',\r\nafter load model load_state_dict state_dict  {}\r\nLoading VAE weights found near the checkpoint: cached sd_xl_base_1.0.vae.safetensors\r\n```\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n\r\n\r\n\r\n## anyone can explain this? module_load_state_dict did not declare, how did it run?\r\n```\r\nin modules/sd_disable_initialization.py\r\n        module_load_state_dict = self.replace(torch.nn.Module, 'load_state_dict', lambda *args, **kwargs: load_state_dict(module_load_state_dict, *args, **kwargs))\r\n```\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 23,
        "changed_files": 2,
        "created_at": "2023-10-07T05:11:31Z",
        "closed_at": "2023-10-15T07:08:52Z",
        "merged_at": "2023-10-15T07:08:52Z",
        "body": "Currently, if the cursor is inside parentheses or angle brackets that aren't an (emphasis:1.0) block, Ctrl+Up/Down does nothing.\r\n\r\nFixes it by using regular expressions to more accurately check if selected text is inside an emphasis block.\r\n\r\nIf selected text is inside (parentheses) or [square brackets], as with old-style emphasis blocks, they'll be ((added)) or removed accordingly, or optionally converted to (numeric:1.1).\r\n\r\n## Checklist:\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 14,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-10-04T00:24:55Z",
        "closed_at": "2023-10-05T08:17:38Z",
        "merged_at": null,
        "body": "The wheel listener in `imageviewerGamepad.js` (or _any_ wheel listener, apparently) causes number inputs to increment/decrement when focused.\r\n\r\nI've also changed it to only add the listener if `Navigate image viewer with gamepad` is enabled, so the function isn't running on every scroll.\r\n\r\nFixes #13442\r\n\r\n## Checklist:\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-10-03T04:31:11Z",
        "closed_at": "2023-10-03T09:37:46Z",
        "merged_at": "2023-10-03T09:37:46Z",
        "body": "Fixes a really annoying behavior where any click or mouseup outside the border of a popup dialog would close it.\r\n\r\nDragging past the edge when selecting text would close it, as would clicking the end of the styles dropdown.\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/4073789/f7c80f5a-2524-44be-ac10-d3e02066f611)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-02T16:21:43Z",
        "closed_at": "2023-10-03T09:38:11Z",
        "merged_at": "2023-10-03T09:38:11Z",
        "body": "## Description\r\n\r\n* fix mistake of PR #13458\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-10-02T08:10:38Z",
        "closed_at": "2023-10-02T09:47:03Z",
        "merged_at": "2023-10-02T09:47:03Z",
        "body": "There seems to be a code snippet in webui.sh that disables the python venv, but there is no relevant variable. So I moved it to after loading webui-user.sh and now it works.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-10-02T07:54:16Z",
        "closed_at": "2023-10-02T07:57:05Z",
        "merged_at": null,
        "body": "## Description\r\nI found a code snippet that disables python venv in webui.sh and moved it to the appropriate location.\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-02T04:48:53Z",
        "closed_at": "2023-10-02T10:05:27Z",
        "merged_at": "2023-10-02T10:05:27Z",
        "body": "Fixes a bug where `Denoising strength: 0` is added to the metadata of API images unless explicitly set to `None` in the API payload, causing hires fix to be always enabled when reading the metadata from an image, even if the image didn't use hires fix to begin with.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-01T15:19:20Z",
        "closed_at": "2023-10-14T05:37:45Z",
        "merged_at": "2023-10-14T05:37:45Z",
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [\u2714] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [\u2714] I have performed a self-review of my own code\r\n- [\u2714] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [\u2714] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-10-01T11:23:06Z",
        "closed_at": "2023-10-14T05:21:53Z",
        "merged_at": "2023-10-14T05:21:53Z",
        "body": "## Description\r\n\r\n* show the current preview image if available in the lightboxModal view\r\n* without this fix, the modal View tries to show the last selected gallery image while in generating image state.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-10-01T07:30:19Z",
        "closed_at": "2023-10-01T08:49:43Z",
        "merged_at": "2023-10-01T08:49:43Z",
        "body": "## Description\r\n\r\n* Currently, the field names of extensions will be parsed only `[\\w ]` (`[a-zA-Z0-9_ ]`), this patch fixes this regex to accept additional `[-/]` chars.\r\n  * for example: `\"MyExtension model-1:\"` `\"MyExtension dilate/erosion b:\"`\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 15,
        "changed_files": 2,
        "created_at": "2023-09-30T08:41:02Z",
        "closed_at": "2023-10-01T04:04:08Z",
        "merged_at": "2023-10-01T04:04:08Z",
        "body": "Allows users to remove any of the default whitespace delimiters (space, tab, CR, LF).\r\n\r\nAddresses #13443\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-29T02:17:21Z",
        "closed_at": "2023-09-30T05:23:41Z",
        "merged_at": null,
        "body": "## Description\r\nHello!\r\n\r\nIn a macOS environment, when toggling the enable/disable state of extensions in the Extension tab and pressing the `Apply and restart UI` button, the following error log appears in the console.  \r\nAdditionally, in order for changes to extensions to take effect, I need to terminate the process and then restart the functionality.\r\n\r\n```sh\r\nTraceback (most recent call last):\r\n  File \"/Users/username/stable-diffusion-webui/venv/lib/python3.9/site-packages/gradio/routes.py\", line 488, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/Users/username/stable-diffusion-webui/venv/lib/python3.9/site-packages/gradio/blocks.py\", line 1431, in process_api\r\n    result = await self.call_function(\r\n  File \"/Users/username/stable-diffusion-webui/venv/lib/python3.9/site-packages/gradio/blocks.py\", line 1103, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/Users/username/stable-diffusion-webui/venv/lib/python3.9/site-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/Users/username/stable-diffusion-webui/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/Users/username/stable-diffusion-webui/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/Users/username/stable-diffusion-webui/venv/lib/python3.9/site-packages/gradio/utils.py\", line 707, in wrapper\r\n    response = f(*args, **kwargs)\r\n  File \"/Users/username/stable-diffusion-webui/modules/ui_extensions.py\", line 54, in apply_and_restart\r\n    restart.restart_program()\r\n  File \"/Users/username/stable-diffusion-webui/modules/restart.py\", line 17, in restart_program\r\n    (Path(script_path) / \"tmp\" / \"restart\").touch()\r\n  File \"/Users/username/.rye/py/cpython@3.9.18/install/lib/python3.9/pathlib.py\", line 1315, in touch\r\n    fd = self._raw_open(flags, mode)\r\n  File \"/Users/username/.rye/py/cpython@3.9.18/install/lib/python3.9/pathlib.py\", line 1127, in _raw_open\r\n    return self._accessor.open(self, flags, mode)\r\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/username/stable-diffusion-webui/tmp/restart'\r\n```\r\n\r\nThis error occurs due to the absence of the `tmp/restart` file. Upon reviewing the `webui.sh` script, I noticed it lacks a process to create the `tmp` directory.  \r\nThis process is present in the `webui.bat` file, so I believe it's necessary to add it to `webui.sh` as well.\r\n\r\nI've only tested this on a local Apple Silicon macOS environment.  \r\nI assume the `webui.sh` script is also used on Linux systems. If the changes are unnecessary on a Linux environment, could you let me know.  \r\n(I've only been able to test on macOS).\r\n\r\nBest regards!\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\nI have read the following documentation but could not perform the test...\r\nAm I correct in understanding that this is to start a Web UI instance with a specific command and then run tests on it?\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 98,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-09-28T00:17:23Z",
        "closed_at": "2023-09-28T01:12:17Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-27T07:23:52Z",
        "closed_at": "2023-09-30T05:31:31Z",
        "merged_at": "2023-09-30T05:31:31Z",
        "body": "## Description\r\n\r\nSee \r\n\r\n* https://github.com/google-research/torchsde/issues/131\r\n\r\nPRs fixing this:\r\n\r\n* https://github.com/google-research/torchsde/issues/133\r\n* https://github.com/google-research/torchsde/issues/137\r\n* https://github.com/google-research/torchsde/issues/140\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 18,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-09-27T07:09:13Z",
        "closed_at": "2023-09-27T17:41:25Z",
        "merged_at": null,
        "body": "\r\n## Description\r\n\r\nThis allows a new field to be submitted in the txt2image API call, \"task_id\" \r\nThis field accepts strings, and is pushed through the progress stack, so you can  get the images  progress with the /internal/progress API call\r\n\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-27T04:11:59Z",
        "closed_at": "2023-09-30T05:24:38Z",
        "merged_at": "2023-09-30T05:24:38Z",
        "body": "Spaces in extra network filenames cause the card's `data-sort-name` attribute to be truncated to the first word, with the rest added as empty attributes.\r\n\r\nBefore:\r\n```html\r\n<div class=\"card\" ... data-sort-name=\"3d\" rendering=\"\" v12.safetensors=\"\">\r\n```\r\n\r\nAfter:\r\n```html\r\n<div class=\"card\" ... data-sort-name=\"3d rendering style v12.safetensors\">\r\n```\r\n\r\n## Checklist:\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-27T03:11:57Z",
        "closed_at": "2023-09-30T05:32:08Z",
        "merged_at": "2023-09-30T05:32:08Z",
        "body": "Fixes #13407 \r\n\r\n## Checklist:\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-26T04:14:56Z",
        "closed_at": "2023-09-30T05:32:39Z",
        "merged_at": "2023-09-30T05:32:39Z",
        "body": "Fixes #12945\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/4073789/b7d959c7-25a5-4b09-8599-8a09d06f1352)\r\n\r\n## Checklist:\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-25T06:56:17Z",
        "closed_at": "2023-09-30T05:39:12Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\ntry to fix memory issue, while switch models webui consumes too much RAM.\r\n\r\n* a summary of changes in code\r\nI think that is the typo mistake. \r\n\r\n* which issues it fixes, if any\r\nreference issue: #9323\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/235094/844a3b53-551d-4c3d-a360-96a19105bd01)\r\n\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 414,
        "deletions": 355,
        "changed_files": 12,
        "created_at": "2023-09-24T03:20:54Z",
        "closed_at": "2023-09-24T03:23:43Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-23T20:46:36Z",
        "closed_at": "2023-09-30T05:46:48Z",
        "merged_at": "2023-09-30T05:46:48Z",
        "body": "## Description\r\n\r\nFind out that i cant put two images in different places for images.\r\nFor example in \"Inpaint upload\" there is two places with images: Image and it's mask. So when i press Ctrl+V it puts image in first box, but when i try to put to second one, it puts again at first one.\r\nI just fixed it to work for every box.\r\nMy fix work like that:\r\nPress Ctrl+V -> puts to first available box, where tag <image> does not present. If you fill all possible image boxes it will put at last one(by logic of AUTOMATIC1111, not mine)\r\nWhen you delete first one image, it will put at first box.\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [+] I have performed a self-review of my own code\r\n- [+] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [?] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 20,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-09-23T12:52:37Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nAdded support for Prompt comments.\r\nSometimes when adjusting prompt words, it is necessary to temporarily disable some of the prompt words. It is troublesome to restore them after deleting them, so a new comment function is added and they are removed before giving them to the model.\r\n\r\nAt the same time, I also hope that the comment information can be written into the EXIF of the image.\r\n\r\n> This new feature has been tested in `txt2img` and `img2img`.\r\n\r\n- For example 1:\r\n\r\n```\r\n# Quality control prompts\r\nsome prompts,\r\n# Action prompts\r\nsome prompts,\r\n# Other prompts\r\nsome prompts,\r\n```\r\n\r\n- For example 2: Other non-English comments\r\n\r\n```\r\n# \u8d28\u91cf\u63a7\u5236\u63d0\u793a\u8bcd\r\nsome prompts,\r\n# \u52a8\u4f5c\u63d0\u793a\u8bcd\r\nsome prompts,\r\n# \u5176\u4ed6\u63d0\u793a\u8bcd\r\nsome prompts,\r\n```\r\n\r\n- For example 3:\r\n\r\n```\r\n// See screenshot \u2193\r\n```\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/25501698/14da6efb-a1c4-441c-ab47-f2883ca5ba24\r\n\r\n\r\n\r\nShortcut keys `Ctrl + /` to control JS code: \r\nhttps://github.com/capricorncd/demos/blob/main/stable-diffusion/prompt-comments-control.js\r\n\r\n<img width=\"579\" alt=\"2023-09-23 214616\" src=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/25501698/dfb058c9-6108-4ca0-8366-3320d4346f1b\">\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 243,
        "deletions": 3,
        "changed_files": 4,
        "created_at": "2023-09-23T09:59:11Z",
        "closed_at": "2023-10-14T04:29:01Z",
        "merged_at": "2023-10-14T04:29:01Z",
        "body": "## Description\r\n\r\n* Add altdiffusion-m18 support\r\n* modified the sd_hijack.py\r\n* add yaml config and xlmr_m18.py for m18\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 34,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-21T03:26:06Z",
        "closed_at": null,
        "merged_at": null,
        "body": "Config=my workflow JoeOuttaburgers .py & .annacobda\r\n\r\n## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 34,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-21T03:09:27Z",
        "closed_at": "2023-09-21T03:24:19Z",
        "merged_at": null,
        "body": "Config=my workflow JoeOuttaburgers .py & .annacobda\r\n\r\n## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-20T17:15:57Z",
        "closed_at": "2023-09-27T10:18:39Z",
        "merged_at": null,
        "body": "Fix: Handle 'choices' Field with Mixed Data Types\r\n\r\nI could not access the web API url /sdapi/v1/script-info.\r\n\r\n- Previously, the 'choices' field in the 'ScriptArg' model was expected to contain only strings. However, in some cases, it may contain a mix of string and list values.\r\n- This change resolves validation errors and allows the API to handle 'choices' field values more flexibly.\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-20T09:22:33Z",
        "closed_at": "2023-09-20T09:48:44Z",
        "merged_at": null,
        "body": "## Description\r\nFix ScriptInfo for web API as it was not working\r\n\r\nCorrected 'choices' field data type in ScriptInfo.\r\n- Fixed a validation error in the 'ScriptInfo' model where the 'choices' field was expected to be of type 'str' but was provided as 'int'.\r\n\r\nTrace:\r\n      File \"E:\\git\\stable-diffusion-webui\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 141, in serialize_response\r\n        raise ValidationError(errors, field.type_)\r\n    pydantic.error_wrappers.ValidationError: 31 validation errors for ScriptInfo\r\n    response -> 0 -> args -> 2 -> choices -> 0\r\n      str type expected (type=type_error.str)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-18T08:48:49Z",
        "closed_at": "2023-09-30T05:55:55Z",
        "merged_at": "2023-09-30T05:55:55Z",
        "body": "\u2026to end\r\n\r\n## Description\r\n\r\n* use dict[key]=model; did not update orderdict order\r\n* choice 1: use move-to-end\r\n\r\n## Screenshots/videos:\r\n```\r\ncheckpoints_loaded cache keys [<modules.sd_models.CheckpointInfo object at 0x7f7fe1f36fe0>, <modules.sd_models.CheckpointInfo object at 0x7f7fb83bc610>]\r\nsearch checkpoints <modules.sd_models.CheckpointInfo object at 0x7f7fe1f36fe0>\r\nLoading weights [None] from cache\r\nshared.opts.sd_checkpoint_cache 2\r\nLoading VAE weights specified in settings: cached vae-ft-mse-840000-ema-pruned.ckpt\r\nApplying attention optimization: xformers... done.\r\nWeights loaded in 11.9s (send model to cpu: 0.8s, apply weights to model: 8.6s, apply channels_last: 0.1s, load VAE: 1.2s, move model to device: 1.1s).\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 20/20 [00:01<00:00, 12.07it/s]\r\nTotal progress: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 20/20 [00:01<00:00, 10.30it/s]\r\nReusing loaded model chilloutmix_NiPrunedFp32Fix.safetensors to load aZovyaPhotoreal_v2.safetensors\r\ncheckpoints_loaded cache keys [<modules.sd_models.CheckpointInfo object at 0x7f7fe1f36fe0>, <modules.sd_models.CheckpointInfo object at 0x7f7fb83bc610>]\r\n```\r\n\r\n### fix\r\n```\r\nReusing loaded model chilloutmix_NiPrunedFp32Fix.safetensors to load aZovyaPhotoreal_v2.safetensors\r\ncheckpoints_loaded cache keys [<modules.sd_models.CheckpointInfo object at 0x7fb795a5eda0>, <modules.sd_models.CheckpointInfo object at 0x7fb795a8db70>]\r\nsearch checkpoints <modules.sd_models.CheckpointInfo object at 0x7fb795a5eda0>\r\nLoading weights [None] from cache\r\nshared.opts.sd_checkpoint_cache 2\r\nLoading VAE weights specified in settings: cached vae-ft-mse-840000-ema-pruned.ckpt\r\nApplying attention optimization: xformers... done.\r\nWeights loaded in 9.2s (send model to cpu: 1.1s, apply weights to model: 6.1s, apply channels_last: 0.1s, load VAE: 1.3s, hijack: 0.1s, move model to device: 0.5s).\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 20/20 [00:01<00:00, 14.49it/s]\r\nTotal progress: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 20/20 [00:01<00:00, 12.22it/s]\r\nReusing loaded model aZovyaPhotoreal_v2.safetensors to load chilloutmix_NiPrunedFp32Fix.safetensors\r\ncheckpoints_loaded cache keys [<modules.sd_models.CheckpointInfo object at 0x7fb795a8db70>, <modules.sd_models.CheckpointInfo object at 0x7fb795a5eda0>]\r\n```\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-09-17T18:05:41Z",
        "closed_at": "2023-09-30T05:49:26Z",
        "merged_at": "2023-09-30T05:49:26Z",
        "body": "## Description\r\nFixes bug #8079 \r\nThe Features page lists \"sd_model\" as a valid parameter for the \"Prompts from file or textbox\" script, but the implementation was never finished.\r\nThis patch enables the use of the \"sd_model\" parameter as originally intended.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] All tests passed, but my code was not included in the [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n- [x] The code has been manually tested, both for valid and invalid input. No issues were observed.",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-17T17:40:17Z",
        "closed_at": "2023-09-19T15:04:49Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nAdds a simple independent `script_organiser` attribute to the `ScriptRunner` class, which reads the attribute (dict) `CALLBACK_ORDER` from scripts should it exist, and organises script running order by priority value assigned to each callback, instead of the longstanding name of extension's folder. Priority is optional and currently defaults to 50 as a placeholder, and I've only applied it to `process` callback's alwayson scripts, but it seems to work correctly.\r\nThis allows fine grained control for extensions to choose when to run each callback relative to other extensions, which is crucial for several extensions' correct operation (controlnet, animatediff, regional prompter, adetailer, ultimate upscale, wildcards, segment anything to name a few). Currently this order is global and indirectly user controlled (naming scheme), which is really bad for devs.\r\n\r\n(Sorry, I'm not sure why it's saying the PR targets the master branch, doesn't seem so on my end.)\r\n\r\n@vladmandic What are your thoughts on this?\r\n\r\nEdit: [Moved.](https://github.com/vladmandic/automatic/pull/2224)\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 220,
        "deletions": 110,
        "changed_files": 30,
        "created_at": "2023-09-17T17:37:26Z",
        "closed_at": "2023-09-17T17:40:36Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nAdds a simple independent script_organiser attribute to the ScriptRunner class, which reads the attribute (dict) CALLBACK_ORDER from scripts, and organises script running order by priority value assigned to each callback, instead of the longstanding name of extension's folder. Priority is optional and currently defaults to 50 as a placeholder, and I've only applied it to process' alwayson scripts, but it seems to work correctly.\r\nThis allows fine grained control for extensions to choose when to run each callback relative to other extensions, which is crucial for several extensions' correct operation (controlnet, animatediff, regional prompter, adetailer, ultimate upscale, wildcards to name a few). Currently this order is global and indirectly user controlled (naming scheme), which is really bad for devs.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-16T00:54:41Z",
        "closed_at": "2023-09-30T05:58:08Z",
        "merged_at": "2023-09-30T05:58:08Z",
        "body": "## Description\r\nfeature request [How to stop XYZ plot from saving sub portions of a grid](https://github.com/AUTOMATIC1111/stable-diffusion-webui/discussions/13157)\r\n\r\nif XYZ opt `Include Sub Grids` is not check also don't save sub grid to file\r\n\r\nthis method reuses the same checkbox, which meant that this does change the current behavior\r\nso some users might not be happy\r\nit might make sense to make it a separate option\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-09-16T00:13:45Z",
        "closed_at": "2023-09-30T05:59:29Z",
        "merged_at": "2023-09-30T05:59:29Z",
        "body": "## Description\r\n\r\n### Before: UTC time zone\r\n| Before: UTC time zone | After: system time zone, ISO fromat\r\n| - | - |\r\n| ![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/3b10936f-4d9d-4cea-8b68-8c88a1841072) | ![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/f223ce1a-6371-4886-a253-9cb231a1ac3c) |\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-15T17:03:20Z",
        "closed_at": "2023-09-30T06:01:13Z",
        "merged_at": "2023-09-30T06:01:13Z",
        "body": "\r\n## Description\r\n\r\nfix for #13052 - if a model is trained using zero terminal SNR it needs different betas. DDPM already has a given_betas argument but if you try and put eg given_betas: [0, 0.5, 1] (not real numbers there should be 1000 of them) it crashes because DDPM expects a numpy ndarray but omegaconf is returning a ListConfig. so this code patches the DDPM register_betas to convert the ListConfig to a numpy array.\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-15T10:39:30Z",
        "closed_at": "2023-09-18T08:52:03Z",
        "merged_at": null,
        "body": "\u2026to end\r\n\r\n## Description\r\n\r\n* use dict[key]=model; did not update orderdict order\r\n* choice 1: use move-to-end\r\n\r\n## Screenshots/videos:\r\n```\r\ncheckpoints_loaded cache keys [<modules.sd_models.CheckpointInfo object at 0x7f7fe1f36fe0>, <modules.sd_models.CheckpointInfo object at 0x7f7fb83bc610>]\r\nsearch checkpoints <modules.sd_models.CheckpointInfo object at 0x7f7fe1f36fe0>\r\nLoading weights [None] from cache\r\nshared.opts.sd_checkpoint_cache 2\r\nLoading VAE weights specified in settings: cached vae-ft-mse-840000-ema-pruned.ckpt\r\nApplying attention optimization: xformers... done.\r\nWeights loaded in 11.9s (send model to cpu: 0.8s, apply weights to model: 8.6s, apply channels_last: 0.1s, load VAE: 1.2s, move model to device: 1.1s).\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 20/20 [00:01<00:00, 12.07it/s]\r\nTotal progress: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 20/20 [00:01<00:00, 10.30it/s]\r\nReusing loaded model chilloutmix_NiPrunedFp32Fix.safetensors to load aZovyaPhotoreal_v2.safetensors\r\ncheckpoints_loaded cache keys [<modules.sd_models.CheckpointInfo object at 0x7f7fe1f36fe0>, <modules.sd_models.CheckpointInfo object at 0x7f7fb83bc610>]\r\n```\r\n\r\n### fix\r\n```\r\nReusing loaded model chilloutmix_NiPrunedFp32Fix.safetensors to load aZovyaPhotoreal_v2.safetensors\r\ncheckpoints_loaded cache keys [<modules.sd_models.CheckpointInfo object at 0x7fb795a5eda0>, <modules.sd_models.CheckpointInfo object at 0x7fb795a8db70>]\r\nsearch checkpoints <modules.sd_models.CheckpointInfo object at 0x7fb795a5eda0>\r\nLoading weights [None] from cache\r\nshared.opts.sd_checkpoint_cache 2\r\nLoading VAE weights specified in settings: cached vae-ft-mse-840000-ema-pruned.ckpt\r\nApplying attention optimization: xformers... done.\r\nWeights loaded in 9.2s (send model to cpu: 1.1s, apply weights to model: 6.1s, apply channels_last: 0.1s, load VAE: 1.3s, hijack: 0.1s, move model to device: 0.5s).\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 20/20 [00:01<00:00, 14.49it/s]\r\nTotal progress: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 20/20 [00:01<00:00, 12.22it/s]\r\nReusing loaded model aZovyaPhotoreal_v2.safetensors to load chilloutmix_NiPrunedFp32Fix.safetensors\r\ncheckpoints_loaded cache keys [<modules.sd_models.CheckpointInfo object at 0x7fb795a8db70>, <modules.sd_models.CheckpointInfo object at 0x7fb795a5eda0>]\r\n```\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-15T10:08:18Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\n* This is another attempt to input raw text lines\r\n* for some inputs with `\"\\n\"` included, (`x.strip().find(\"\\n\") != -1` case)\r\n* it does not affect any functionality, except one accidentally inputs `\\n` chars in the X/Y/Z values\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/232347/b1d21721-63b5-4d6f-915a-e89da85abb49)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-15T08:43:58Z",
        "closed_at": "2023-09-30T06:17:24Z",
        "merged_at": "2023-09-30T06:17:24Z",
        "body": "## Description\r\n\r\n* add `prepare` option to support a raw input\r\n* with this change, one can add entries line by line with or without commas or quotes.\r\n\r\n* without this fix, a line with commas could be used with `\"blahblah,blahblah\"`\r\n\r\nSee also #13268 \r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/232347/f34ac473-84f5-4cb0-805a-62e1309990bb)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/232347/c9c947fe-8c62-4a81-ab5d-052abd7c27b4)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-09-14T17:24:51Z",
        "closed_at": "2023-09-30T09:10:56Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* Every time I started sdwebui, lora was not running at all because there was no variable named shared.opts.lora_in_memory_limit.\r\n* Before the while I put an if statement that checks the variable shared.opts.lora_in_memory_limit\r\n* Previously lora was not working. It works now.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-09-14T10:47:11Z",
        "closed_at": "2023-09-30T05:15:00Z",
        "merged_at": "2023-09-30T05:15:00Z",
        "body": "## Description\r\n\r\nWhen a user starts with --nowebui mode, it is often accessed through an API, and multiple models may need to be loaded. But currently, after startup, one model will be automatically loaded, which may be unnecessary, or the unwanted model, especially when the loaded model is very large.\r\n\r\nSo I added a parameter that allows webui to skip this automatic loading process\r\n## Screenshots/videos:\r\n* Before\r\n<img width=\"1255\" alt=\"image\" src=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/7628879/5f257928-a8ea-44a7-ad2e-cabd8bcc17bf\">\r\n   \r\n  \r\n* After  \r\n\r\n<img width=\"652\" alt=\"image\" src=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/7628879/8e18998a-2396-4823-a15a-ee46df8e9b9a\">\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-09-14T10:38:37Z",
        "closed_at": "2023-09-14T10:39:44Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nWhen a user starts with --nowebui mode, it is often accessed through an API, and multiple models may need to be loaded. But currently, after startup, one model will be automatically loaded, which may be unnecessary, or the unwanted model, especially when the loaded model is very large.\r\n\r\nSo I added a parameter that allows webui to skip this automatic loading process\r\n\r\n## Screenshots/videos:\r\n* Before \r\n<img width=\"1248\" alt=\"image\" src=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/7628879/a1add2cc-33d4-45fe-ac8b-e2e44c91e158\">\r\n* After\r\n<img width=\"883\" alt=\"image\" src=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/7628879/0d87c677-25b6-4740-9f05-2409b7a2eb98\">\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 2142,
        "deletions": 0,
        "changed_files": 8,
        "created_at": "2023-09-14T10:21:23Z",
        "closed_at": "2023-09-14T10:21:49Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-14T01:51:58Z",
        "closed_at": "2023-10-01T22:14:28Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nCurrently the model description is appended to a card on the document as-is. This allows for the user to inadvertently add HTML to the model description shown on-card and have it be appended onto the DOM if `show descriptions on card` is enabled. On a single-user system this presents a minimal security hazard, but on a shared system, any user could insert malicious code into the card metadata via the metadata editor.\r\n\r\nThis also can cause issues where HTML in the description results in unexpected behavior, like the model card or other cards ceasing to display. For instance, replacing the model description with `<div>` causes the model to vanish on refresh, while setting it to `<div><div>` causes other models to cease appearing. In a real-world case, https://github.com/zixaphir/Stable-Diffusion-Webui-Civitai-Helper/issues/10 is caused by the text `<title>_<trigger word>` appearing in the model description. While I can easily fix this on my end by removing the offending text, it will result in an unexpected state for the user where important informal text is removed, like information about other models used (IE, \"used detailer model with `<lora:detailer:0.6>`)\"\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-09-13T13:27:20Z",
        "closed_at": "2023-09-30T06:21:08Z",
        "merged_at": "2023-09-30T06:21:08Z",
        "body": "## Description\r\n\r\nThe `%GIT%` configuration in `webui-user.bat` is not fully functioning. It only works if the git executable can also be found under `%PATH%`. Otherwise, the following error shows up:\r\n\r\n```console\r\nTraceback (most recent call last):\r\n  File \"C:\\PortablePython\\App\\Python\\lib\\site-packages\\git\\__init__.py\", line 89, in <module>\r\n    refresh()\r\n  File \"C:\\PortablePython\\App\\Python\\lib\\site-packages\\git\\__init__.py\", line 76, in refresh\r\n    if not Git.refresh(path=path):\r\n  File \"C:\\PortablePython\\App\\Python\\lib\\site-packages\\git\\cmd.py\", line 392, in refresh\r\n    raise ImportError(err)\r\nImportError: Bad git executable.\r\nThe git executable must be specified in one of the following ways:\r\n    - be included in your $PATH\r\n    - be set via $GIT_PYTHON_GIT_EXECUTABLE\r\n    - explicitly set via git.refresh()\r\n\r\nAll git commands will error until this is rectified.\r\n```\r\n\r\n(a sample run on top of [PortablePython](https://sourceforge.net/projects/portable-python/files/Portable%20Python%203.10/) and [PortableGit](https://git-scm.com/download/win))\r\n\r\n```diff\r\n  @echo off\r\n\r\n- set PYTHON=\r\n- set GIT=\r\n- set VENV_DIR=\r\n+ set PYTHON=C:\\PortablePython\\App\\Python\\python.exe\r\n+ set GIT=C:\\PortableGit\\bin\\git.exe\r\n+ set VENV_DIR=-\r\n  set COMMANDLINE_ARGS=\r\n\r\n  call webui.bat\r\n```\r\n\r\n\r\n## Root Cause\r\n\r\nAccording to [GitPython#requirements](https://github.com/gitpython-developers/GitPython#requirements), environment variable `%GIT_PYTHON_GIT_EXECUTABLE%` should be properly setup for such cases.\r\n\r\n\r\n## Proposed Solution\r\n\r\nAutomatically map `%GIT_PYTHON_GIT_EXECUTABLE%` to the value saved in `%GIT%` , if needed.\r\n\r\n\r\n## Screenshots/videos:\r\n\r\nN/A\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-13T07:35:12Z",
        "closed_at": "2023-09-30T06:21:48Z",
        "merged_at": "2023-09-30T06:21:48Z",
        "body": "## Description\r\nthis should prevent an edge case described in https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/13225 where\r\na call `/sdapi/v1/progress` happens after `state.job` has been set but befor initialization `state.time` causeing\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/102b6617dacffdcc89c56badcaae6c5e83c3ff21/modules/api/api.py#L504\r\nto error out as `state.time` is `None`\r\n\r\nthis prevent this from ever happening by initialize state.time_start befroe state.job_count\r\n\r\nthere are other ways of solving this\r\nlike not initializing `state.time` as `None`\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/102b6617dacffdcc89c56badcaae6c5e83c3ff21/modules/shared_state.py#L27\r\n\r\nor adding logic to prevent it from subtracting `None`\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/102b6617dacffdcc89c56badcaae6c5e83c3ff21/modules/api/api.py#L504\r\n## Checklist:\r\n\r\nin the https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/13225 even though he describes this cause web UI to crash, but I think he might not be using the word crash correctly\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-12T13:44:54Z",
        "closed_at": "2023-09-12T14:50:44Z",
        "merged_at": "2023-09-12T14:50:44Z",
        "body": "## Description\r\nfix major issue caused by\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12957\r\nany options added by `add_option` will be reverted to default in the settings page next time the settings is saved\r\n\r\n## Checklist:\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2023-09-12T07:53:31Z",
        "closed_at": "2023-09-30T06:23:32Z",
        "merged_at": "2023-09-30T06:23:32Z",
        "body": "## Description\r\n\r\nwhen webui dir is work dir, the path created by `modules/ui_gradio_extensions.webpath(fn)` will be wrong\r\ncauseing issues like \r\nstyle.css return 404\r\n![2023-09-12 17_01_36_572 chrome](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/59ecf1db-259a-470b-a418-49e53538f010)\r\n\r\nminor fix \r\nif user launches webui from a different work directory\r\nfetching the tag and commit will fail\r\n\r\n### after further consideration I suggest we change the work directory to be the webui dir\r\nreason being there are things that can break when CWD is not webui dir\r\nso effectively we don't really support executing from external directory (there is a fix for this, but I'm not sure if I covered all issues that can occurred due to this)\r\n\r\nsecondly executing from an upper directory would cause a security issue in that\r\nanything under the work directory can be served by gradio\r\nthis may be considered a security issue\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-12T02:13:28Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n- When checkpoint switches from SDXL to other versions such as SD1.5, what is stored in `embedding_db` is the textual inversion of SDXL. If the model is loaded from `already_loaded`, the SD1.5 generation tasks will not be able to load the correct embeddings, and vice versa.\r\n- It is necessary to reload the textual inversion.\r\n- This could be the cause of this [issue](https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/13150).\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2023-09-11T05:09:47Z",
        "closed_at": "2023-09-30T06:46:55Z",
        "merged_at": "2023-09-30T06:46:55Z",
        "body": "## Description\r\nfrom issue [Hi-Res Fix On/Off state not saved by Defaults](https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/13186)\r\n\r\nthis PR makes the custom component `InputAccordion` it work with this `ui-config.json`/`ui_loadsave.py` system\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/05b11076-f389-48b1-b512-5620bdfa911c)\r\n\r\n### issues exposed by this PR\r\nI found that when InputAccordion(`False`, label=\"Hires. fix\", elem_id=\"txt2img_hr\") is set to `True`\r\nthe UI auto sizing / flow \"may\" not work properly\r\nthis happens on my 1920x1080 monitor with wn11 + Chrome\r\nreduce the browser horizontal width, it does automatically goes into the normal position\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/959d088b-f756-45ea-8aa4-4033fbf94d8a\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-10T10:06:28Z",
        "closed_at": "2023-09-30T06:48:38Z",
        "merged_at": "2023-09-30T06:48:38Z",
        "body": "## Description\r\nWhen load LoRA after switching checkpoint, if the network_weights_backup in the cache is not reset first, incorrect values will be loaded in some layers during the restore bias phase of the sampling process. This ultimately results in non-idempotent generation results under the same configuration parameters.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-09-09T13:44:56Z",
        "closed_at": "2023-09-30T06:59:21Z",
        "merged_at": "2023-09-30T06:59:21Z",
        "body": "## Description\r\n\r\nEnsure not override images with script enabled\r\nrefix #12926 fix batch img2img output dir with script whitch was broken by https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/3ca4655a18eb80cca5f806412f2cb2d56cc536e5\r\nby forcing the `save_images_replace_action` to `Add number suffix` when a script is enabled\r\nfor situations batch img2img mixed XYZ, as there's no way to know how many images will they script produce this uses  `save_images_replace_action`to add the suffix\r\ndue to how scripts run `[generation_number]` is not useful\r\n\r\nfix a bug\r\nif a setting is not yet saved to settings\r\nif one tries to override it `stored_opts = {k: opts.data[k] for k in p.override_settings.keys()}` will error\r\nadding `if k in opts.data` at the end will check if the key exists in `opt.data` before trying to access it\r\n\r\npreviously before [Rework img2img batch image save](https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12164) strip generating multiple images with the same name isn't a problem because the saving is handled by batch img2img itself\r\nbut the issue with letting img2img handle saving images will not have the right metadata\r\nthere was a fix for this on metadata in https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/11747\r\nbut the issue with this is that some extensions in this case `controlnet` more than one image per input, which causes an issue https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12286\r\n\r\nthe method used here isn't perfectly ideal but it at least would guarantee no error what happened\r\ndownsides are\r\nwhen a script is also enabled in batch `img2img save_images_replace_action` to `Add number suffix`\r\nmeaning that if you do multiple runs at the same output dir it cannot be replaced\r\n> this does not apply when you were apply directory is blank\r\n> and when script is not enabled\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 60,
        "deletions": 53,
        "changed_files": 20,
        "created_at": "2023-09-09T03:31:43Z",
        "closed_at": "2023-09-12T11:47:50Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nAdds a new cmd option `--torch-context` to set the PyTorch context-manager, with valid values of `no_grad` (still the default) or `inference_mode`, the latter of which is claimed to have \"better performance\" according to the docs. https://pytorch.org/docs/stable/generated/torch.inference_mode.html\r\n\r\nOn my system with a 3090 generating a 512x512 image with Euler, `inference_mode` gained me around an extra 1it/s.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 112,
        "deletions": 34,
        "changed_files": 9,
        "created_at": "2023-09-08T08:31:10Z",
        "closed_at": "2023-09-08T08:32:24Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-09-08T01:07:00Z",
        "closed_at": "2023-09-30T07:02:29Z",
        "merged_at": "2023-09-30T07:02:29Z",
        "body": "## Description\r\n- fix a [issue](https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/13064#issuecomment-1710689328) if user use the wrong path separator for the os in `--ckpt-dir`, SD checkpoint dropdown will display `short name` without the relative path in front\r\n\r\n- add option to `short name` for SD checkpoint dropdown under `Setting > UI > sd_checkpoint_dropdown_use_short` \r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-07T21:21:20Z",
        "closed_at": "2023-09-09T05:18:51Z",
        "merged_at": "2023-09-09T05:18:51Z",
        "body": "\r\n\r\n## Description\r\n\r\nThis would help to organize / memorize the program version for the creation process. (as it is also unformated included inside the infotext).\r\n\r\n## Screenshots/videos:\r\n\r\n![grafik](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/8803626/59ef3fb5-a81e-42a6-a49a-30f77f236d07)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-09-07T03:14:22Z",
        "closed_at": "2023-09-30T07:09:45Z",
        "merged_at": "2023-09-30T07:09:45Z",
        "body": "## Description\r\nConsolidated allowed preview formats\r\nFix extra network `.gif` not woking as preview\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-09-07T01:03:50Z",
        "closed_at": "2023-09-09T07:02:02Z",
        "merged_at": "2023-09-09T07:02:02Z",
        "body": "## Description\r\nadd a UI settings under system for `--enable-console-prompts`\r\nno reason why this should be restricted to a cmd arg\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/df4deb0a-3236-4276-b85e-5d5cb5fd5b0c)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-09-06T22:31:45Z",
        "closed_at": "2023-09-09T07:24:07Z",
        "merged_at": "2023-09-09T07:24:07Z",
        "body": "## Description\r\n\r\nThe negative prompt token counter uses the multicond prompt parser, which is currently only effectively used by the positive prompt when generating.\r\n\r\nWhen using conds caching, if the user only changes the negative prompt, then `prompt_parser.get_multicond_prompt_list` is called only to update the negative counter, but is not called during generation. This creates issues for prompt extensions that patch `get_multicond_prompt_list` to update the counter correctly. See for example https://github.com/ljleb/sd-webui-neutral-prompt/issues/44\r\n\r\n## Screenshots/videos:\r\n\r\nBefore (negative counter = 2/75, positive counter = 2/75):\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/32277961/c24875c0-b3c3-4a5e-b4e1-3ef6864905f7)\r\n\r\nAfter (negative counter = 4/75, positive counter = 2/75):\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/32277961/565eb1ba-eedd-41d6-8be9-0a91361b7ae4)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-06T10:39:46Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nUsers have reported an error when loading some SD 1.5 models on MPS (#12907). I have been unable to reproduce it, however based on feedback I've gotten from brkirch/stable-diffusion-webui#36, this fix should work.\r\n\r\nFixes #12907.\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-09-05T13:37:11Z",
        "closed_at": "2023-09-09T06:14:01Z",
        "merged_at": "2023-09-09T06:14:01Z",
        "body": "Fixes sampler name reference\r\n\r\nSame patch will be done for TI.\r\n\r\n## Description\r\n\r\nThe sampler reference is now mapped to samplers_map, as {string: sampler} option instead.\r\n\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/35677394/cc045942-5c01-4f38-8679-c48d2b74972b)\r\n\r\nI verified whether training and preview generation works.\r\n\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 14,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-05T11:23:35Z",
        "closed_at": "2023-09-11T13:59:14Z",
        "merged_at": null,
        "body": "Closes https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/13127\r\n\r\n## Description\r\n\r\nFix the broken /sdapi/v1/script-info API.\r\nThis is pure stable diffusion right after installation, with --api --port 9053 argument.\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/35677394/3fe2727a-beca-4f44-b621-e7bac8086358)\r\n\r\n\r\nThis happened because now choices can have [('key', 'value'),...] type, but API model strictly finds List[str] type.\r\n\r\nThis is fixed with the type checks and cast / parsing.\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/35677394/c0cc96d6-7d4f-4eb0-847b-8e098d7cb8b8)\r\n\r\n\r\n\r\n## Screenshots/videos:\r\n\r\nAfter the fix, choices appear like this:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/35677394/9e0a1bf2-12b7-4615-895d-70090557afde)\r\n\r\n\r\n\r\nEither API response models, or the casting code, or maybe `wrap_call` method can be fixed.\r\nBut for sanity, I just fixed and leaved optional str cast as default, which should not fail at least...\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2023-09-05T07:12:06Z",
        "closed_at": "2023-09-30T06:47:52Z",
        "merged_at": "2023-09-30T06:47:52Z",
        "body": "## Description\r\n\r\nenable localization file in the extensions folder\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-05T00:41:09Z",
        "closed_at": "2023-09-30T06:33:14Z",
        "merged_at": "2023-09-30T06:33:14Z",
        "body": null,
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-05T00:39:01Z",
        "closed_at": "2023-09-05T00:40:54Z",
        "merged_at": null,
        "body": null,
        "comments": 0
    },
    {
        "merged": false,
        "additions": 11,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2023-09-04T03:03:21Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nmake update_interp_description(value) more safe\r\nprevent #13041\r\nto be honest I'm not sure how #13041 that could ever happen, I look in the code and I can't find anywhere that it might get a value of list type\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-09-03T12:17:25Z",
        "closed_at": "2023-09-09T06:21:18Z",
        "merged_at": "2023-09-09T06:21:18Z",
        "body": "## Description\r\nHere is[ PNG image](https://drive.google.com/file/d/1xftQ4Ei5YSHmGrDSx4kl-iQ4DA7DtB3z/view?usp=drive_link) with corrupted Exif (or, invalid EXIF which is double quoted bytes string).\r\n\r\nWhen processing pipeline tries to load those kind of images, it will throw OSError and stop, instead of fallback with empty exif data.\r\n\r\n\r\n\r\n## Screenshots/videos:\r\nBefore patch\r\n```\r\n*** Error completing request\r\n*** Arguments: (2, None, None, 'path-to-images', '', True, 0, 4, 512, 512, True, 'ESRGAN_4x', 'None', 0, 0, 0, 0) {}\r\n    Traceback (most recent call last):\r\n      File \"F:\\stable-diffusion-webui\\modules\\call_queue.py\", line 57, in f\r\n        res = list(func(*args, **kwargs))\r\n      File \"F:\\stable-diffusion-webui\\modules\\call_queue.py\", line 36, in f\r\n        res = func(*args, **kwargs)\r\n      File \"F:\\stable-diffusion-webui\\modules\\postprocessing.py\", line 53, in run_postprocessing\r\n        parameters, existing_pnginfo = images.read_info_from_image(image_data)\r\n      File \"F:\\stable-diffusion-webui\\modules\\images.py\", line 725, in read_info_from_image\r\n        exif = piexif.load(exif_data)\r\n      File \"F:\\stable-diffusion-webui\\venv\\lib\\site-packages\\piexif\\_load.py\", line 28, in load\r\n        exifReader = _ExifReader(input_data)\r\n      File \"F:\\stable-diffusion-webui\\venv\\lib\\site-packages\\piexif\\_load.py\", line 85, in __init__\r\n        with open(data, 'rb') as f:\r\n    OSError: [Errno 22] Invalid argument: \"b'Exif\\\\x00\\\\x00MM\\\\x00*\\\\x00\\\\x00\\\\x00\\\\x08\\\\x00\\\\x04\\\\x01;\\\\x00\\\\x02\\\\x00\\\\x00\\\\x00\\\\n\\\\x00\\\\x00\\\\x08J\\\\x87i\\\\x00\\\\x04\\\\x00\\\\x00\\\\x00\\\\x01\\\\x00\\\\x00\\\\x08T\\\\x9c\\\\x9d\\\\x00\\\\x01\\\\x00\\\\x00\\\\x00\\\\x08\\\\x00\\\\x00\\\\x10\\\\xcc\\\\xea\\\\x1c\\\\x00\\\\x07\\\\x00\\\\x00\\\\x08\\\\x0c\\\\x00\\\\x00\\\\x00>\\\\x00\\\\x00\\\\x00\\\\x00\\\\x1c\\\\xea\\\\x00\\\\x00\\\\x00\\\\x08\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\x00\\\\ ...\r\n```\r\n\r\nAfter patch:\r\n\r\nNo error happened.\r\n\r\n\r\n\r\n### Notes:\r\nSame error can happen in Pillow, but it does not fail or crash - it fallbacks to empty exif correctly.\r\n\r\n```\r\nWARNING:gradio.processing_utils:Failed to transpose image <PIL.PngImagePlugin.PngImageFile image mode=RGB size=2614x1464 at 0x27435E21E70> based on EXIF data.\r\nTraceback (most recent call last):\r\n  File \"F:\\stable-diffusion-webui\\venv\\lib\\site-packages\\gradio\\processing_utils.py\", line 62, in decode_base64_to_image\r\n    img = ImageOps.exif_transpose(img)\r\n  File \"F:\\stable-diffusion-webui\\venv\\lib\\site-packages\\PIL\\ImageOps.py\", line 590, in exif_transpose\r\n    exif = image.getexif()\r\n  File \"F:\\stable-diffusion-webui\\venv\\lib\\site-packages\\PIL\\PngImagePlugin.py\", line 1028, in getexif\r\n    return super().getexif()\r\n  File \"F:\\stable-diffusion-webui\\venv\\lib\\site-packages\\PIL\\Image.py\", line 1455, in getexif\r\n    self._exif.load(exif_info)\r\n  File \"F:\\stable-diffusion-webui\\venv\\lib\\site-packages\\PIL\\Image.py\", line 3719, in load\r\n    self._info = TiffImagePlugin.ImageFileDirectory_v2(self.head)\r\n  File \"F:\\stable-diffusion-webui\\venv\\lib\\site-packages\\PIL\\TiffImagePlugin.py\", line 507, in __init__\r\n    raise SyntaxError(msg)\r\nSyntaxError: not a TIFF file (header b\"b'Exif\\\\x\" not valid)\r\n```\r\n\r\n\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 30,
        "deletions": 8,
        "changed_files": 4,
        "created_at": "2023-09-03T03:06:25Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\nshould prevent this from happening https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/13011\r\nI was able to reproduce the issue using strategically placed breakpoints manually steping\r\n\r\nsince refreshing of extra networks can  be called concurrently \r\nthe dictionary might be modified during looping list_items\r\nwe should use locking to protect it against accidental unexpected changes\r\n\r\neven though the error described in the issue post is only for lora\r\nas other extra networks tab share the same logic I applyed the same treatment to all of them\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 7
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-09-02T23:04:15Z",
        "closed_at": null,
        "merged_at": null,
        "body": "\r\n## Description\r\n\r\nsupport localization\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-02T11:38:13Z",
        "closed_at": "2023-09-09T06:25:21Z",
        "merged_at": "2023-09-09T06:25:21Z",
        "body": "The typo was causing sigma_min and sigma_max override settings to return the wrong values, this should fix that.",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 49,
        "deletions": 18,
        "changed_files": 1,
        "created_at": "2023-09-02T09:15:01Z",
        "closed_at": "2023-10-14T05:36:43Z",
        "merged_at": "2023-10-14T05:36:43Z",
        "body": "## Description\r\nupdate bug report template\r\n\r\nadd a checklist with simple debug instruction\r\n\r\nuse `placehoder` for example of what should be filled in\r\nso that people have to actually fill in and not just leave the template in\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/6b3d4941-cc57-4dde-8fd0-6571c9455fd7)\r\nand give actual examples of what we actually expect\r\n\r\nperfect example of a type of issue post that I'm trying to avoid\r\n`https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12996`\r\n\r\ndemo of how it looks when filling the form\r\nhttps://github.com/w-e-w/ext-temp-test/issues/new?assignees=&labels=bug-report&projects=&template=bug_report.yml&title=%5BBug%5D%3A+\r\ndemo of how it looks after it's posted\r\nhttps://github.com/w-e-w/ext-temp-test/issues/31\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-09-02T05:14:38Z",
        "closed_at": "2023-09-09T06:26:29Z",
        "merged_at": "2023-09-09T06:26:29Z",
        "body": "## Description\r\n`--add-stop-route` was replace by `--api-server-stop`\r\nand remove extra space\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-09-02T01:59:53Z",
        "closed_at": "2023-09-06T09:45:34Z",
        "merged_at": null,
        "body": "## Description\r\nsome QoL improvements\r\n\r\n1. save sysinfo as `.json`\r\nso when opening them in a text editor it knows how to highlight the text and I don't have to set it manually\r\n\r\n2. append the first 4 digits of the checksum to the end of the filename\r\nthis can be used to quickly compare if two sysinfo are the same\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 10,
        "changed_files": 4,
        "created_at": "2023-09-01T23:02:03Z",
        "closed_at": "2023-09-09T06:29:12Z",
        "merged_at": "2023-09-09T06:29:12Z",
        "body": "## Description\r\nFixes #12943\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/4073789/62750049-4f95-4e68-ba16-bce2270e242b)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-01T22:23:32Z",
        "closed_at": "2023-09-09T06:26:04Z",
        "merged_at": "2023-09-09T06:26:04Z",
        "body": "## Description\r\n\ud83d\udcdd Copies prompt/negative from main UI to style editor (is there a better emoji/symbol for this?)\r\n\r\nFixes #12961\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/4073789/f0b4d4ef-cdef-4a84-9ce3-82d8e95be9dc)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 10,
        "deletions": 10,
        "changed_files": 6,
        "created_at": "2023-09-01T17:40:35Z",
        "closed_at": "2023-09-09T06:32:59Z",
        "merged_at": null,
        "body": "## Description\n\n* allow A1111 to run with up to Python 3.11.5 and not just Python 3.10\n* Updated checks for python version\n* N/A\n\n## Screenshots/videos:\nN/A\n\n## Checklist:\n\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\n- [x] I have performed a self-review of my own code\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-01T14:11:22Z",
        "closed_at": "2023-09-09T10:25:42Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/13076, addresses a ton more comments.\r\n\r\nThe technical reason this was done is because the styles UI is now a separate component, so while on the Gradio backend the component is a lot more clean, it prevents making this simple change reflected in the frontend. But, we can easily make this workaround happen via only the frontend for now.\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/0597a856-2be5-4ce9-ba6c-a2a007648947)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 12
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-09-01T13:55:50Z",
        "closed_at": "2023-09-09T06:28:33Z",
        "merged_at": "2023-09-09T06:28:33Z",
        "body": "## Description\r\n\r\n\r\nIf we add a new option but don't save it in config.json, we won't be able to set it in \r\n\r\n```\r\nstored_opts = {k: opts.data[k] for k in p.override_settings.keys()}\r\n```\r\nThis will result in a KeyError being raised for  `opts.data[k]`\r\n\r\nfor example, we will override `control_net_no_detectmap` parameters, if we have no save it in config.json, we cannot to set it in API.\r\n\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-08-31T22:07:47Z",
        "closed_at": "2023-09-09T06:10:08Z",
        "merged_at": "2023-09-09T06:10:08Z",
        "body": "With the release candidates being out for both torch and vision, webui should default to these over nightly for a more stable experience.\r\n\r\nStable release isn't excpected until October 4th:\r\nhttps://dev-discuss.pytorch.org/c/release-announcements/27",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 9,
        "changed_files": 3,
        "created_at": "2023-08-31T19:15:10Z",
        "closed_at": "2023-09-09T05:56:32Z",
        "merged_at": "2023-09-09T05:56:32Z",
        "body": "## Description\r\n\r\nAdd opt `save_images_add_number_suffix`\r\nsimilar concept to add numbering prefix for image, but only when thre existing a file with the same name\r\nthis prevents files from being overwritten\r\n\r\ncurrently for batch img2img the output dir will be ignored when a script such as XYZ is enabled\r\nthe image will be I'll put it to the default output\r\nalthough this is undesirable but it is not catastrophic\r\n\r\nusing `save_images_add_number_suffix` this allows the use of original file name when script is used\r\n\r\n~~this fix makes it so that the output directory will be set the they specified directory in batch img2img regardless if a script is enabled or not\r\nif a script is active it will use the default user defined file name pattern for saving images\r\nonly when no script is active will the original file name be used as the output file name~~\r\n\r\n~~the reason why this is done is because if we use the original file names scripts such as Xyz would generate multiple images of the same name and thus overriding previous generated files~~\r\n\r\nnot sure but this might be a possible fix for [[Bug]: Batch img2img with multiple X/Y/Z denoising values is only saving one image (WebUI 1.6.0)](https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12913) \r\nI do have my doubts because what he is experiencing seems to be different issue\r\nas `Sysinfo` is not uploaded I wasn't able to conduct further diagnosis\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-31T18:58:49Z",
        "closed_at": "2023-09-09T06:33:38Z",
        "merged_at": "2023-09-09T06:33:37Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12879\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-31T16:08:18Z",
        "closed_at": "2023-09-09T06:09:30Z",
        "merged_at": "2023-09-09T06:09:30Z",
        "body": "## Description\r\nAction to calculate all sd checkpoint hashes\r\nable to select number of parallel calculations\r\n\r\ntested wroks with current dev and my [SQLite for cache](https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12863) PR\r\nI think this comes in handy if you have lots of models you wish to load in and want to have the hash cached\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/a7cc11e9-429a-406c-979c-7cb45cfe3330)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-31T12:47:45Z",
        "closed_at": "2023-09-01T00:01:36Z",
        "merged_at": null,
        "body": "## Description\r\nThere is no 'None' option in the drop-down for the refiner checkpoints, so once set, they cannot be removed.\r\nAdd a 'None' option to the dropdown so that it can be deselected.\r\n\r\nstable diffusion checkpoint dropdown is unchanged\r\n\r\n## Screenshots/videos:\r\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2023-08-31 214431](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/6410332/a20d09a9-3e4b-42dd-a10b-26daa29935ba)\r\n\r\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2023-08-31 214403](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/6410332/15e5cda5-e8fd-4930-a65f-c6042813b54f)\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-31T05:22:27Z",
        "closed_at": "2023-09-09T06:29:42Z",
        "merged_at": "2023-09-09T06:29:42Z",
        "body": "## Description\r\nApplies the padding from #8943 on desktop only (or with a mouse), to make it easier to select items on touchscreens.\r\n\r\n## Screenshots/videos:\r\n![IMG_0002](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/4073789/67b070cb-5ed0-4f57-aca8-1b127a7a9627)\r\n\r\n## Checklist:\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-08-31T03:25:38Z",
        "closed_at": "2023-09-30T06:49:37Z",
        "merged_at": "2023-09-30T06:49:37Z",
        "body": "## Description\r\n\r\nThis pull request addresses removing lora from the prompt when clicking a lora card in the extra networks UI to toggle add/remove when the extra network separator has been customized by the user. This changes the current regular expression replace function, which currently only looks for leading spaces, and instead looks for whatever the user has customized their separator to be. Because this input is customizable, it also escapes symbols in the extra network separator.\r\n\r\nThis only changes the `tryToRemoveExtraNetworkFromPrompt` javascript function and related variables.\r\n\r\nCurrent known limitations: `<>` as custom separators do not work.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-31T01:51:47Z",
        "closed_at": "2023-08-31T04:30:03Z",
        "merged_at": "2023-08-31T04:30:03Z",
        "body": "## Description\r\n\r\nIn certain scenarios, it seems that the regex for generation params end early. In particular, if a parameter has the string `\\\"\\\",` in it, then it will end before the actual end of the data.\r\n\r\nI discovered the issue here: https://github.com/ModelSurge/sd-webui-comfyui/pull/147#issuecomment-1683367396\r\n\r\nExample of input that the current regex does not match correctly (scroll to the bottom of the text window): https://regex101.com/r/ghxKfI/1\r\n\r\nYou can see that the new regex matches properly: https://regex101.com/r/ghxKfI/2\r\n\r\n\r\n## Screenshots/videos:\r\n\r\n<details>\r\n\r\n<summary>old regex (click to see screenshot)</summary>\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/32277961/313a8217-fd9d-4ee3-ab2c-e45e190741dd)\r\n\r\n</details>\r\n\r\n<details>\r\n\r\n<summary>new regex (click to see screenshot)</summary>\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/32277961/1949458c-5742-4382-822b-e7a18157ee3f)\r\n\r\n</details>\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-30T07:21:41Z",
        "closed_at": "2023-08-30T08:00:30Z",
        "merged_at": "2023-08-30T08:00:29Z",
        "body": "## Description\r\nconvert extension update and create time to system time zone\r\nthis doesn't really matter that much as time is truncated\r\nprobably why I forgot to do it initially\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/98889a1f-ef12-4983-8a1b-3a969bec40db)\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-08-30T06:32:39Z",
        "closed_at": "2023-08-30T06:45:13Z",
        "merged_at": "2023-08-30T06:45:13Z",
        "body": "## Description\r\nExtension time format in systme time zone\r\nmatches the time display on GitHub web page\r\npatch https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12851\r\ndemo\r\n```py\r\nimport git\r\nimport time\r\nfrom datetime import datetime\r\ncommit_date = git.Repo('../').head.commit.committed_date\r\nprint(commit_date)\r\n# 1693374871\r\nprint(time.strftime('%Y-%m-%d %H:%M:%S', time.gmtime(commit_date)))\r\n# 2023-08-30 05:54:31\r\nprint(datetime.fromtimestamp(commit_date))\r\n# 2023-08-30 14:54:31  accounts for system time zone\r\n```\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 77,
        "deletions": 13,
        "changed_files": 5,
        "created_at": "2023-08-30T05:02:06Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n### as opposed to using json file use a SQLite database of cache\r\n\r\nreason of this because we have seen some users with extremely large cache files\r\nlike catboxanon cache.json is > 236MB\r\nit's becomes increasingly impractical to use it as a method of storage\r\nand we have seen some cases of the the `cache.json` beeing being corruptedfor unknown reason reasons https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/11773\r\n\r\nthe data will not be stored under `cache_database.db` or the path specified by env `SD_WEBUI_CACHE_DATABASE`\r\n\r\nto make as little changes as possible I essentially implemented a translation layer that essentially represents the database as a python object same as if we load and save a json file\r\nassuming that I have done everything correctly it should be basically transparent\r\nthe implementation is meant to be simple, but this also means not truly optimized for an SQL database\r\nI wrote json strings into the `value` column for the table for each individual entries\r\nthis would mean they will be a slight overhead when reading and writing to the database to do the json conversion\r\n\r\ncurrently this is implemented as a toggle which can be changed under `settings > system > Use sqlite for cache` \r\nI store the value under the key `experimental_sqlite_cache` if this is proven stable with no compatibility issues we can remove the enable this by default in the future\r\n\r\n## Other changes\r\nI changed the file modification time comparison for that triggers a cache refresh from `greater than` to `not equal`\r\nthis makes sense because you might replace a new file with another file that has a older modification date\r\nif this is the case then the cache refresh will not be triggered, this is undesirable\r\n\r\n## TODO\r\nif in the future this is going to be set at as the default\r\nit should be a simple matter to write a migration script to migrate `cache.json` to the db so that users don't have to spend time recalculating\r\n\r\n## Database table structure\r\nTable: hashes\r\n| path (string) | mtime (float) | value (json string) |\r\n| - | - | - |\r\n| checkpoint/Drawing\\Stable Diffusion\\v1-5-pruned-emaonly.ckpt | 1666314275.47775 | \"cc6cb2710......\" (the full hash) |\r\n| ......| ...... | ...... | \r\n\r\nTable: safetensto-metadata\r\n| path (string) | mtime (float) | value (json string) |\r\n| - | - | - |\r\n| checkpoint/Drawing\\Stable Diffusion\\sd_xl_base_1.0.safetensors | 1690539434.22002 | {\"modelspec.sai_model_spec\": \"1.0.0\", ...... } (json meta date) |\r\n| ......| ...... | ...... | \r\n\r\nthis will be read into memory as one big object, structure mimicking `cache.json`\r\n```py\r\ncache_data = {\r\n    \"hashes\": {\r\n        \"checkpoint/Drawing\\Stable Diffusion\\v1-5-pruned-emaonly.ckpt\": {\r\n            \"mtime\": 1666314275.47775,\r\n            \"value\": \"cc6cb2710......\"  # (the full hash)\r\n        },\r\n        { ...... }\r\n    },\r\n    \"safetensto-metadata\": {\r\n        \"checkpoint/Drawing\\Stable Diffusion\\sd_xl_base_1.0.safetensors\": {\r\n            \"mtime\": 1690539434.22002,\r\n            \"modelspec.sai_model_spec\": \"1.0.0\",\r\n            # ......\r\n        },\r\n        { ...... }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-08-29T18:29:18Z",
        "closed_at": "2023-08-30T04:27:14Z",
        "merged_at": "2023-08-30T04:27:14Z",
        "body": "## Description\r\n\r\nTitle. This makes it technically viable for the value of `xi` after the callback finishes to be any arbitrary tensor a developer would desire, i.e.:\r\n```python\r\ndef on_extra_noise(params: ExtraNoiseParams):\r\n\tparams.noise = (desired_xi - params.xi) / params.noise\r\n```\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-29T16:51:43Z",
        "closed_at": "2023-08-30T04:27:45Z",
        "merged_at": "2023-08-30T04:27:45Z",
        "body": "## Description\r\n\r\nAdditional fix for https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12833, stripping line breaks in empty lines so we don't get an empty line in log.\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-29T16:22:43Z",
        "closed_at": "2023-08-30T04:41:47Z",
        "merged_at": "2023-08-30T04:41:47Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12705\r\n\r\nAs the issue describes: when a user types into a quicksettings dropdown option, such as the SD checkpoint, and ultimately does not make a selection, the value returned on the backend is `None`, which will cause different behavior depending on the quicksetting. This PR fixes that behavior, so a value of `None` will leave the quicksetting alone.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-29T15:58:20Z",
        "closed_at": "2023-08-30T04:47:41Z",
        "merged_at": null,
        "body": "/bin/bash does not exist on NixOS\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-29T14:51:12Z",
        "closed_at": "2023-08-30T05:23:11Z",
        "merged_at": "2023-08-30T05:23:11Z",
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/167966/a23b8763-26ea-41da-b74a-e90b8e80c84a)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-29T12:41:27Z",
        "closed_at": "2023-08-29T12:55:57Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nSmall correction to https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12818. This is only ever supposed to apply at full denoise. It's pretty obvious this does not work correctly without this change when using hires fix.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 38,
        "changed_files": 7,
        "created_at": "2023-08-29T08:23:11Z",
        "closed_at": "2023-09-09T07:31:56Z",
        "merged_at": "2023-09-09T07:31:56Z",
        "body": "## Description\r\n\r\nSeveral python types from the `typing` module have been deprecated, this commit updates them.\r\n\r\n## Screenshots/videos:\r\nNone needed.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 144,
        "deletions": 74,
        "changed_files": 35,
        "created_at": "2023-08-29T08:13:42Z",
        "closed_at": "2023-09-09T06:35:40Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nJust a minor code fix to make python tracebacks more readable.\r\n\r\nfrom \r\n```shell\r\nTraceback (most recent call last):\r\n  ...\r\n      raise RuntimeError(\"mu not supported\")\r\nRuntimeError: mu not supported\r\n```\r\nto\r\n```shell\r\nTraceback (most recent call last):\r\n  ...\r\n      raise RuntimeError(msg)\r\nRuntimeError: mu not supported\r\n```\r\n\r\n## Screenshots/videos:\r\nNone needed.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 11,
        "changed_files": 1,
        "created_at": "2023-08-29T05:20:19Z",
        "closed_at": "2023-08-29T05:32:48Z",
        "merged_at": "2023-08-29T05:32:48Z",
        "body": "## Description\r\nThis removes the blocking of xformers only on Windows when Python 3.11 is used, this was working already on Linux.\r\nThe xformers package is also available on Windows now, so there is no reason to block it anymore.\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2023-08-29T00:04:26Z",
        "closed_at": "2023-08-30T04:43:39Z",
        "merged_at": "2023-08-30T04:43:39Z",
        "body": "If a image / batch result image is higher or wider than the current viewport, and is zoomed (left corner zoom icon) it is cutted off  on the top and also to the left. This new rule seems to be the culprit.\r\n\r\n## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-08-28T22:37:56Z",
        "closed_at": "2023-08-30T05:07:15Z",
        "merged_at": "2023-08-30T05:07:15Z",
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/167966/64c353bf-8ade-4b7c-ab9a-cd49de65dbbd)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-28T22:22:59Z",
        "closed_at": "2023-08-29T05:52:58Z",
        "merged_at": "2023-08-29T05:52:58Z",
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/167966/cec58688-f6af-4ab1-b0ee-394b8d279146)\r\n\r\nvs\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/167966/89d7f0f5-de1b-445a-96cd-330ef0e82d74)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-28T16:10:50Z",
        "closed_at": "2023-08-29T05:55:45Z",
        "merged_at": "2023-08-29T05:55:45Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/9339\r\n\r\nThis `display` rule check doesn't make sense to be here -- the notification should play regardless of the tab being active or not.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-28T15:19:32Z",
        "closed_at": "2023-08-29T06:00:34Z",
        "merged_at": "2023-08-29T06:00:34Z",
        "body": "## Description\r\n\r\nFixes a long-standing minor annoyance where this previously printed a bunch of blank lines depending on how many `install.py` files the user has as part of extensions.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-28T15:12:05Z",
        "closed_at": "2023-08-29T05:58:02Z",
        "merged_at": "2023-08-29T05:58:02Z",
        "body": "## Description\r\n\r\nMake the `--skip-install` argument actually skip all package installations, in this case for extension installers. Resolves scenarios like in https://github.com/picobyte/stable-diffusion-webui-wd14-tagger/issues/56 where the user may want to save a bit of extra startup time.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-28T08:45:02Z",
        "closed_at": "2023-08-28T12:04:08Z",
        "merged_at": "2023-08-28T12:04:08Z",
        "body": "Fix minor typos",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 6854,
        "deletions": 3624,
        "changed_files": 126,
        "created_at": "2023-08-28T08:03:23Z",
        "closed_at": "2023-08-28T08:14:55Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-27T20:26:13Z",
        "closed_at": "2023-08-28T04:20:34Z",
        "merged_at": "2023-08-28T04:20:34Z",
        "body": "## Description\r\n\r\nTitle, quick fix. Likely got missed when transferring these to the options module. This allows for the `Override settings` field to be populated.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 2,
        "changed_files": 3,
        "created_at": "2023-08-27T20:20:46Z",
        "closed_at": "2023-08-29T05:54:09Z",
        "merged_at": "2023-08-29T05:54:09Z",
        "body": "## Description\r\n\r\nSupercedes https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12812\r\n\r\nIncludes the only change necessary, which is a change to the sampling process that was implemented in sgm's repo. From the aforementioned PR:\r\n\r\n> This pull request also include a minor fix in the dpm++\u2019s first sigmas for the noise processing so that the results are even more consistent.\r\n\r\nhttps://github.com/Stability-AI/generative-models/blob/477d8b9a7730d9b2e92b326a770c0420d00308c9/sgm/modules/diffusionmodules/sampling.py#L50\r\n\r\n~~@lllyasviel If there is a better name/description for this option then please let me know.~~ Renamed now.\r\n\r\n## Screenshots/videos:\r\n![image](https://github-production-user-asset-6210df.s3.amazonaws.com/122327233/263552193-715e7e70-d708-407f-a0f3-250d81f92dcf.png)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-08-27T18:45:17Z",
        "closed_at": "2023-08-28T04:53:37Z",
        "merged_at": "2023-08-28T04:53:37Z",
        "body": "## Description\r\nConsolidate local check for easier maintenance in the future\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-08-27T18:28:46Z",
        "closed_at": "2023-08-27T18:29:48Z",
        "merged_at": "2023-08-27T18:29:48Z",
        "body": "## Description\r\nadd `cmd_opts.ngrok` to check for `cmd_opts.disable_extension_access`\r\nadd `cmd_opts.server_name` check for `auto_launch_browser`\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 70,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2023-08-27T15:29:23Z",
        "closed_at": "2023-08-28T00:40:26Z",
        "merged_at": null,
        "body": "# Description\r\n\r\nRight now webui\u2019s noise generating system is very powerful yet convoluted, making it difficult to produce consistent results with other software.\r\n\r\nThis pull request add an option \u201cuse_vanilla_random_number_generator\u201d to temporarily disable some webui hackings to the noise generators. \r\n\r\nThe result is that now we can perfectly reproduce results from other software like comfyui, fooocus, etc. This pull request also include a minor fix in the dpm++\u2019s first sigmas for the noise processing so that the results are even more consistent.\r\n\r\nMy recommendation is that the option \u201cuse_vanilla_random_number_generator\u201d should only be targeted to code development, since introducing this to users will cause some confusing about reproducing results from old seeds. \r\n\r\nThis option is very useful when we want to implement extensions and check those extensions\u2019 behaviors across different software.\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/edab50e4-d4f6-4bba-8b1c-4df4feb37fe1)\r\n\r\n\r\n# Example 1\r\n\r\ncinematic film still, a car in the city street . shallow depth of field, vignette, highly detailed, high budget, bokeh, cinemascope, moody, epic, gorgeous, film grain, grainy\r\nNegative prompt: anime, cartoon, graphic, text, painting, crayon, graphite, abstract, glitch, deformed, mutated, ugly, disfigured\r\nSteps: 20, Sampler: DPM++ 2M SDE Karras, CFG scale: 8, Seed: 123456, Size: 1024x1024, Model hash: e6bb9ea85b, Model: sd_xl_base_1.0_0.9vae, Version: v1.6.0-RC-32-gde0db85f\r\n\r\n### Webui\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/74500a74-862d-44b4-a80c-8b4e09a4dbbe)\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/bbd1fc04-970c-491c-a94b-b3dbddd328b7)\r\n\r\n### Comfy\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/eccd9d2e-0f6a-4082-8fee-0b9b93ae54e1)\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/af1afb1d-dcf6-4e55-96b5-80ed3c281c28)\r\n\r\n### Fooocus (all tricks disabled)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/9be3350d-06f3-49b8-ba43-4e419727e546)\r\n\r\n### Webui (with \"use_vanilla_random_number_generator\")\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/589cea4d-7fe0-4bec-931f-46907b103c14)\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/a5975580-72a2-48c2-883b-d3a8d8018bf8)\r\n\r\n\r\n# Example 2\r\n\r\nprofessional 3d model of a cute cat. octane render, highly detailed, volumetric, dramatic lighting\r\nNegative prompt: ugly, deformed, noisy, low poly, blurry, painting\r\nSteps: 20, Sampler: DPM++ 2M SDE Karras, CFG scale: 8, Seed: 123456, Size: 1024x1024, Model hash: e6bb9ea85b, Model: sd_xl_base_1.0_0.9vae, Version: v1.6.0-RC-33-gc8f0b780\r\n\r\n### Webui\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/6afeb2d4-9fea-4ced-8152-e699f266282e)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/766dd216-3f4d-40b9-9995-4fb3c810ac9e)\r\n\r\n### Comfy\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/e30666ba-d017-4e3b-8299-ada3a2dc589f)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/32f7c333-9f55-4ac0-9abd-368b4737a5d7)\r\n\r\n\r\n### Fooocus (all tricks disabled)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/4e4f2fe8-c5d0-49c0-87de-a806e6e1941a)\r\n\r\n\r\n### Webui (with \"use_vanilla_random_number_generator\")\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/d68f533b-4ac0-4be1-9dab-0f7764cb3007)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/19834515/43164662-8375-45d8-83f6-2495dd9b8d1c)\r\n\r\n\r\n# Minor\r\n\r\nIf you may still see some minor difference between these results, my guess is that this is caused by other software using cpu to process clip text encoding. Nevertheless, we do not think it is necessary to perfectly reproduce that.\r\n\r\n# Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 7
    },
    {
        "merged": false,
        "additions": 400,
        "deletions": 6,
        "changed_files": 15,
        "created_at": "2023-08-27T01:15:21Z",
        "closed_at": "2023-09-06T10:32:30Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n_I was inspired by ComfyUI's option to load UNet, VAE and CLIP separately. \r\nI noticed that CLIPs extracted from models have interesting results when applied to different models.\r\nI missed the option in webui so I added the option to do so._\r\nIt looks under models/clip, or via args passed folder. It expects a ckpt whos keys either start with \"transformer.text_model\" or \"text_model\" and loads the state_dict into model.cond_stage_model.\r\nAlso added it to the xyz grid options.\r\n* a summary of changes in code\r\nAdds a sd_clip.py. I oriented myself by sd_vae.py, so it should do all the things vae loading does, as in caching, hashing, automatic loading of clips that share the models name etc.\r\nEvery place that did something related to sd_vae now has a sd_clip variant\r\nI added a \"CLIP\" section to the options and moved also CLIP_skip_last_layers there from the \"Stable Diffusion\"\r\nHad to add the loaded clips hash to the learned condition cache to prevent it from loading conds came from other clips on the same model.\r\n* which issues it fixes, if any\r\nNot being able to select the transformer.text_model independent of model?\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/1095756/75b7be79-be70-40a1-99b2-3365ab4c658d)\r\n\r\n![xyz_grid-0014-AnythingV5Ink_ink-Euler- number -1337-15-planet, beautiful](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/1095756/79587423-cd32-4e63-87f2-961b66435c2d)\r\n\r\n![xyz_grid-0007-AnythingV5Ink_ink-Euler- number -1337-15-cell shaded, girl, stylized background, motion emphasis lines,](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/1095756/f203dcbe-80cc-4c03-b9e8-73a933b748c4)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-26T21:29:46Z",
        "closed_at": "2023-08-27T06:26:19Z",
        "merged_at": "2023-08-27T06:26:19Z",
        "body": "## Description\r\n\r\nI noticed a very small typo that prevents VAE being reloaded after an option change if a VAE near the checkpoint exists.\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/1095756/c46aa775-10bb-4559-960f-923e455931a6)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x ] I have performed a self-review of my own code\r\n- [x ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-26T19:57:51Z",
        "closed_at": "2023-08-27T06:24:42Z",
        "merged_at": "2023-08-27T06:24:42Z",
        "body": "## Description\r\n\r\nTitle. Fixes an edge case where a user may somehow have a duplicate of the script lying around somewhere, which would result in two divs being added and pushing the results div down.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-26T11:03:09Z",
        "closed_at": "2023-08-27T06:26:50Z",
        "merged_at": "2023-08-27T06:26:50Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/10504 and clears up some confusion, like in https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12789.\r\n\r\nThis is an upstream issue with Gradio that's been unresolved for several months, and there doesn't seem to be a way to replace or hide the tool on the Python side, so probably just best for now to hide it on the frontend until it's fixed. https://github.com/gradio-app/gradio/issues/3810\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 14,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-08-26T05:41:47Z",
        "closed_at": "2023-08-27T12:01:01Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12721\r\n\r\nThis was happening because `appendChild` [here](https://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/72ee347eabf04d1a238a738a03e7973cc2a46ca3/javascript/extraNetworks.js#L247) moves the styles dialog to the popup element, which gets overwritten once the styles dialog is opened in another tab. Once it's then attempted to be opened in the previous tab again, both then fail to work.\r\n\r\nThis works around it by returning the styles dialog to the original parent on close. I don't feel like this is the cleanest solution, so if there is a better one then by all means I'm open to suggestions.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-08-25T20:04:55Z",
        "closed_at": "2023-08-27T06:28:12Z",
        "merged_at": "2023-08-27T06:28:12Z",
        "body": "## Description\r\n\r\nTitle, addresses https://github.com/AUTOMATIC1111/stable-diffusion-webui/discussions/12751#discussioncomment-6821931\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-08-25T14:21:32Z",
        "closed_at": "2023-08-25T16:03:12Z",
        "merged_at": "2023-08-25T16:03:12Z",
        "body": "## Description\r\n\r\nI have added an API endpoint to get the list of installed extensions\r\n```python\r\nself.add_api_route(\"/sdapi/v1/extensions\", self.get_extensions_list, methods=[\"GET\"], response_model=List[models.ExtensionItem])\r\n```\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/25168945/de430ab7-2103-4d97-b669-e904f6866afc)\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/25168945/58c314cf-14ca-4375-aeee-8b5b1a6d7915)\r\n\r\n\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/25168945/e916e264-3c03-4816-a16d-c3c817eea385)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-08-25T07:01:32Z",
        "closed_at": "2023-08-25T08:41:32Z",
        "merged_at": "2023-08-25T08:41:32Z",
        "body": "## Description\r\n[[Feature Request]: Add the ability to use checkpoint metadata in Img2Img > Batch > PNG Info](https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12757)\r\n\r\nallow the use SD model hash from PNG info for `img2img batch` `Append png info to prompts`\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/6b592abf-e912-4f92-8c9c-c609515d38bf)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 180,
        "deletions": 93,
        "changed_files": 11,
        "created_at": "2023-08-25T04:17:19Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\n* Fix progress bar layout\r\n* Adjust the height of tool buttons to match neighboring input fields and dropdowns\r\n* Explicitly specify the fonts for tool buttons to prevent them from being rendered as non-emoji symbols on some browsers\r\n* Fix some button/radio group border radius being 0\r\n* Fix broken styled TextBoxes (use `show_label=False` instead of `container=False`)\r\n* Replace environment-dependent Unicode symbols with [feather icons](https://github.com/feathericons/feather) (same as Gradio)\r\n\r\n## Screenshots/videos:\r\n\r\n### Main\r\n| Before | After |\r\n| ------ | ----- |\r\n| ![main_before](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28616020/b18fdfb5-f101-40f1-a1c2-afe0fb59899e) | ![main_after](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28616020/b448c859-4dc3-4533-9068-19774ac48f71) |\r\n\r\n### Image preview modal\r\n| Before | After |\r\n| ------ | ----- |\r\n| ![modal_before](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28616020/8a0d8f60-d38d-4ca4-aad3-5ea86b0e1a10) | ![modal_after](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28616020/178ef2b2-c8f5-4ac1-87cb-cfd89eeee8ee) |\r\n\r\n### Model card\r\n| Before | After |\r\n| ------ | ----- |\r\n| ![card_before](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28616020/dbef04e4-beac-4784-931b-ab9a48ab62b0) | ![card_after](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28616020/712ea24c-fc0a-4ba7-a7d8-aafb218d8fa6) |\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-08-24T14:45:03Z",
        "closed_at": "2023-08-25T08:40:13Z",
        "merged_at": "2023-08-25T08:40:13Z",
        "body": "## Description\r\n\r\nDuring testing bugs were found when resizing the browser, a handler was made to handle this correctly\r\nRead more here: https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12749#issuecomment-1691101158\r\n\r\n## Screenshots/videos:\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/58feec04-f1b9-4603-9e7c-37deed0fb60d\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 50,
        "deletions": 11,
        "changed_files": 1,
        "created_at": "2023-08-24T00:25:48Z",
        "closed_at": "2023-08-24T06:36:53Z",
        "merged_at": "2023-08-24T06:36:53Z",
        "body": "## Description\r\n\r\nImproved integration with other extensions, now long images are displayed correctly and auto-expansion works for them\r\n\r\n## Screenshots/videos:\r\n\r\n**Before**\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/c248ccf3-d01c-42f8-96d4-59f34d95387c)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/f5f58c55-79fa-4161-b8d9-6f2e29877cea)\r\n\r\n\r\n**After**\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/1d50207e-3039-4879-afa0-40b468c638e8)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/6fc813d7-ef20-4b86-b1da-b7183a42519a)\r\n\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-23T15:35:43Z",
        "closed_at": "2023-08-24T06:37:17Z",
        "merged_at": "2023-08-24T06:37:17Z",
        "body": "## Description\r\ndraw extra network buttons above description so that it's always clickable even when the card is extremely small\r\nsolves issue https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12743\r\n\r\nbefore\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/561336f5-41bd-41db-999f-96c5cd7df177)\r\nafter\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/cf682210-3bd2-4ebb-93dd-5f488a46e08a)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-23T07:13:38Z",
        "closed_at": "2023-08-23T09:30:18Z",
        "merged_at": "2023-08-23T09:30:17Z",
        "body": "tell RealESRGANer which device to run on, could be cuda, M1, or other GPU\r\n\r\n## Description\r\n\r\n* RealESRGANer will check if you have cuda device, otherwise, it will run on CPU. For Apple Silicon users, it takes a long time\r\n* By telling RealESRGANer which device to run on, it could use GPU other than CPU, and consume much less time\r\n* code: add the params: 'device=self.device' when calling the function\r\n\r\n## Screenshots/videos:\r\nbefore: 35s\r\n[https://github.com/yajunzhng/sd-extension-system-info/blob/main/R-ESRGAN4x.jpg](url)\r\nafter: 5s\r\n[https://github.com/yajunzhng/sd-extension-system-info/blob/main/After.png](url)\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-23T06:38:46Z",
        "closed_at": "2023-08-23T09:34:19Z",
        "merged_at": null,
        "body": "tell RealESRGANer which device to run on, could be cuda, M1, or other GPU\r\n\r\n## Description\r\n\r\n* RealESRGANer will check if you have cuda device, otherwise, it will run on CPU. For Apple Silicon users, it takes a long time\r\n* By telling RealESRGANer which device to run on, it could use GPU other than CPU, and consume much less time\r\n* code: add the params: 'device=self.device' when calling the function\r\n\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 0,
        "created_at": "2023-08-23T03:53:06Z",
        "closed_at": "2023-08-23T05:10:01Z",
        "merged_at": null,
        "body": "\u2026or other non-cuda device\r\n\r\n## Description\r\n\r\n* When using Mac M1, upscaler with REALESRGAN is running on CPU and cost as much as 30s. I tried to pass 'self.device', upscaler will run on GPU, and time consuming  is 6s\r\n* add 'device=self.device' to realesrgan_model.py\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n \r\n\r\n\r\n## Checklist:\r\n\r\n- [v] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [v ] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-08-23T00:34:18Z",
        "closed_at": "2023-08-23T01:32:56Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nWhen I first added the feature, this check was necessary, but after a few fixes it is no longer needed.  This check prevents other extensions from using this feature.\r\n\r\nSo I removed this part of the code and pre-checked everything for stability.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 65,
        "deletions": 5,
        "changed_files": 2,
        "created_at": "2023-08-22T13:58:07Z",
        "closed_at": "2023-08-22T14:19:16Z",
        "merged_at": "2023-08-22T14:19:16Z",
        "body": "## Description\r\n\r\nWith the new version of gradio the integration broke, so I fixed it and improved it a bit.\r\n\r\nAdded `applyZoomAndPanIntegration` function which can be conveniently applied to integrate with any extension, briefly described how to use it in the code\r\n\r\n## Screenshots/videos:\r\n\r\n<details><summary>Before</summary>\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/98aa18c0-9d6b-4f51-9537-957c53ed8b46\r\n\r\n</details>\r\n\r\n<details><summary>After</summary>\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/860f833b-a8d5-4f0b-8e9d-519a77af88a8\r\n\r\n</details>\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 62,
        "deletions": 11,
        "changed_files": 2,
        "created_at": "2023-08-22T08:06:40Z",
        "closed_at": "2023-08-22T12:25:29Z",
        "merged_at": "2023-08-22T12:25:28Z",
        "body": "## Description\r\n\r\n* Fix resize handle overflowing in Safari\r\n* Expand the hit area of resize handle\r\n* Prevent text selection and cursor changes while dragging resize handles\r\n* Limit mouse detection for resize handles to primary (left) button only\r\n\r\n## Screenshots/videos:\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28616020/3db20cce-11c0-445f-b1e6-eca0a5fa81b3\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28616020/62b1f12a-8858-48b2-a41d-5747c0691230\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-22T08:00:31Z",
        "closed_at": "2023-08-22T12:26:23Z",
        "merged_at": "2023-08-22T12:26:23Z",
        "body": "## Description\r\n\r\n* Request to update README.md with install instructions on Intel CPUs and GPUs.\r\n* This link recently is [added to the Wiki ](https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12472). Requesting now to add it in the README as well. Appreciate your support on this. \r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-21T21:52:15Z",
        "closed_at": "2023-08-22T04:30:25Z",
        "merged_at": "2023-08-22T04:30:25Z",
        "body": "## Description\r\nIn Gradio, `pil_to_temp_file()` [creates the Gradio temp directory](https://github.com/gradio-app/gradio/blob/861d752a83da0f95e9f79173069b69eababeed39/gradio/components/base.py#L313). Currently `save_pil_to_file()` (which replaces `pil_to_temp_file()`) doesn't do this, which can result in exceptions like this:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/routes.py\", line 442, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/blocks.py\", line 1395, in process_api\r\n    data = self.postprocess_data(fn_index, result[\"prediction\"], state)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/blocks.py\", line 1329, in postprocess_data\r\n    prediction_value = block.postprocess(prediction_value)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/components/gallery.py\", line 185, in postprocess\r\n    file = self.pil_to_temp_file(img, dir=self.DEFAULT_TEMP_DIR)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_tempdir.py\", line 55, in save_pil_to_file\r\n    file_obj = tempfile.NamedTemporaryFile(delete=False, suffix=\".png\", dir=dir)\r\n  File \"/opt/homebrew/Cellar/python@3.10/3.10.12/Frameworks/Python.framework/Versions/3.10/lib/python3.10/tempfile.py\", line 559, in NamedTemporaryFile\r\n    file = _io.open(dir, mode, buffering=buffering,\r\n  File \"/opt/homebrew/Cellar/python@3.10/3.10.12/Frameworks/Python.framework/Versions/3.10/lib/python3.10/tempfile.py\", line 556, in opener\r\n    fd, name = _mkstemp_inner(dir, prefix, suffix, flags, output_type)\r\n  File \"/opt/homebrew/Cellar/python@3.10/3.10.12/Frameworks/Python.framework/Versions/3.10/lib/python3.10/tempfile.py\", line 256, in _mkstemp_inner\r\n    fd = _os.open(file, flags, 0o600)\r\nFileNotFoundError: [Errno 2] No such file or directory: '/var/folders/21/syzrtch121bbf_w20437c96r0000gn/T/gradio/tmpkhsntxoz.png'\r\n```\r\nTo resolve this issue this PR emulates the behavior of Gradio, and creates the temp directory for Gradio in `save_pil_to_file()` if the temp directory setting is empty.\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-21T16:41:32Z",
        "closed_at": "2023-08-22T04:30:52Z",
        "merged_at": "2023-08-22T04:30:52Z",
        "body": "## Description\r\n\r\nTitle -- just a small QoL feature.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-21T14:09:21Z",
        "closed_at": "2023-08-22T04:31:26Z",
        "merged_at": "2023-08-22T04:31:26Z",
        "body": "## Description\r\nadd RNG source to XYZ\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/d135e24e-77f3-4dea-90d2-e1c6f8cec4f6)\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/3dbff596-3bd6-45b5-ac2c-d853e93dfa69)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 554,
        "deletions": 4,
        "changed_files": 6,
        "created_at": "2023-08-21T10:35:09Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nThis PR implements an elastic and releasable multi-level caching mechanism for models.\r\n\r\n1. Three-level caching: Disk, memory, and GPU memory form a logical cache queue. When switching models, the model is cached in the logical cache queue. This allows for faster model loading when the same model is used again. The memory and GPU memory caches use the LRU algorithm, while the disk cache uses the LFU algorithm. The number of cached models depends on the available memory and disk space specified. To enable the multi-level caching mechanism, use the `--arc` flag. To enable memory and disk caching, use `--system-ram-size` and `--arc-disk-size`, respectively.\r\n\r\n2. GPU memory release: When generating large images, such as those with a resolution of 1024x1024, some models are cleared to free up GPU memory.\r\n\r\n3. Handling CUDA out of memory: This multi-level caching mechanism is used stable diffusion in production situation. When a CUDA out of memory error occurs, the process is killed. This is to prevent cuda memory leaks caused by CUDA out of memory error, and with the help of an auto-restart script, the service availability can be maintained.\r\n\r\n4. Setting and querying cached models: The `getCachedModels` API can be used to query the models cached in ram and GPU memory. The `setCachedModels` API can be used to set models that can be cached in memory or GPU memory.\r\n\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-21T08:52:54Z",
        "closed_at": "2023-08-22T06:15:58Z",
        "merged_at": null,
        "body": "## Description\r\nAdd CMP 40HX graphics card support\r\nCMP 40HX does not have semi precision and can only use single precision\r\n\r\n40hx \u534a\u7cbe\u5ea6\u88ab\u8001\u9ec4\u780d\u4e86, \u53ea\u80fd\u7528\u5355\u7cbe\u5ea6\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 45,
        "deletions": 4,
        "changed_files": 3,
        "created_at": "2023-08-21T03:53:38Z",
        "closed_at": "2023-08-21T12:09:26Z",
        "merged_at": "2023-08-21T12:09:26Z",
        "body": "## Description\r\n\r\nadd queue index to progress api.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-20T21:08:13Z",
        "closed_at": "2023-08-21T04:11:17Z",
        "merged_at": "2023-08-21T04:11:17Z",
        "body": "## Description\r\nNavi 3 needs at least 5.5 which is only on the nightly chain, previous versions are no longer online (torch==2.1.0.dev-20230614+rocm5.5 torchvision==0.16.0.dev-20230614+rocm5.5). \r\nso switch to nightly rocm5.6 without explicit versions this time\r\n\r\n\r\n* a simple description of what you're trying to accomplish\r\nupdate TORCH_COMMAND for Navi 31\r\n* a summary of changes in code\r\n`export` TORCH_COMMAND=\"pip install --pre torch torchvision --index-url `\"https://download.pytorch.org/whl/nightly/rocm5.6\"`\r\n* which issues it fixes, if any\r\n`ERROR: No matching distribution found for torch==2.1.0.dev-20230614+rocm5.5`\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 55,
        "deletions": 11,
        "changed_files": 3,
        "created_at": "2023-08-20T16:37:19Z",
        "closed_at": "2023-08-20T17:00:51Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nA new checkbox field on the Img2Img tab labeled \"Use prompt metadata\". If enabled, batch img2img will use the prompt, negative prompt, and seed from the batch input files (and ignore the normal img2img settings for those fields).\r\n\r\nAdditionally, I added a little code to `images.py` regarding lora metadata. I noticed that for batches > 1, all images in the batch get the lora metadata used to generate the first image in the batch. Normally this is fine, but if lora prompts differ between images in the batch (which I ran into using lora wildcards), then the metadata is wrong. Maybe there's a more proper way to fix that, but my code seems functional.\r\n\r\n## Possible improvements\r\n\r\nI wasn't planning on sharing this code, but I see some issues looking for this feature, so I figure I'll make this PR and someone else can polish it. The name and tooltip in the UI need some cleaning. The feature could also be tweaked to read other metadata info.",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-08-20T16:23:10Z",
        "closed_at": "2023-08-21T04:38:53Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n@SpenserCai\r\nas opposed to hard coding a relatively outdated user agent\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/4760c3c0b58059e9c655a6ea8360c65a4586a71b/modules/api/api.py#L62\r\n> chrome 62.0.3202 is from 2017-10-17, it screams bot\r\n\r\nwe can use a library like `fake-useragent` https://pypi.org/project/fake-useragent\r\n\r\nkind of related PR https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12698\r\n\r\na test script\r\n```py\r\nfrom fake_useragent import FakeUserAgent\r\nua = user_agent = FakeUserAgent(min_percentage=1.0).random\r\nprint(ua)\r\n```\r\n\r\n### another method would be to just expose the user method make it editable\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 22,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-20T13:45:27Z",
        "closed_at": "2023-08-21T04:19:48Z",
        "merged_at": "2023-08-21T04:19:48Z",
        "body": "## Description\r\nfix potential [ssrf attack](https://portswigger.net/web-security/ssrf) in #12663. maybe add a option in args is better?\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 23,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-08-20T11:53:22Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nSo... `--autolaunch` is cool, but my default browser is using the discrete GPU and consuming around +1GB of VRAM.\r\n\r\nHence, thought on supporting a `--electron` option so that instead of the default browser we do launch the WebUI as a standalone Electron app, which i can configure to use the integrated GPU and allows me to close the default browser to regain the VRAM it does uses.\r\n\r\nThe `--electron` option does requires supplying `--autolaunch` as well, and obviously NodeJS and the Electron package being installed. If there is any issue finding Electron, we will still fallback to use the default browser.\r\n\r\n## Screenshots/videos:\r\n\r\n![sd-webui-electron](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/734313/c1fd3c63-ba65-4285-8d32-7e5ec585a71c)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 16
    },
    {
        "merged": false,
        "additions": 23,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-08-20T10:58:25Z",
        "closed_at": "2023-09-12T11:48:36Z",
        "merged_at": null,
        "body": "Currently a draft as this is accounting for some sticky behavior in https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12691 (particularly the generate button)\r\n\r\n## Description\r\n\r\nAdds an option to make tabs sticky (stay on the top of the browser window on scroll).\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 110,
        "deletions": 50,
        "changed_files": 5,
        "created_at": "2023-08-20T09:20:09Z",
        "closed_at": "2023-08-26T21:14:03Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12681, alternative to https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12688 (see description there for more info)\r\n\r\nIn addition to the other PR, this adds an option to make the generate button sticky.\r\n\r\nI personally prefer this layout over the other PR. However, this does introduce much more code refactor, with a lot of usage of `if` and `nullcontext` to determine component layout. One thing in particular this has to do now is create the prompt components outside the `gr.Blocks` scope so we can manually invoke `render` of them where we want.\r\n\r\nI think ideally everything should be created outside the `gr.Blocks` scope to begin with and then invoked with a single function, as this would make doing a few more refactor jobs simpler and open up more possible layout changes, but that's for a separate PR.\r\n\r\n## Screenshots/videos:\r\n\r\n**Layout**\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/349c9c5c-87ff-4dda-adcd-ca97fe215232)\r\n\r\n**Sticky generate button**\r\n![sticky](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/d180fa69-c23c-4e1a-b159-acf665a31910)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 18
    },
    {
        "merged": true,
        "additions": 127,
        "deletions": 115,
        "changed_files": 2,
        "created_at": "2023-08-20T08:50:00Z",
        "closed_at": "2023-08-20T11:20:27Z",
        "merged_at": "2023-08-20T11:20:27Z",
        "body": "## Description\r\nPatch config status handle corrupted files\r\nconfig status\r\ncurrently if even if just one of `conflict status json` file is corrupted webui will failed to launch\r\nthis happened to a user https://github.com/AUTOMATIC1111/stable-diffusion-webui/discussions/12682\r\n\r\nat the loading stage I get rid of obviously corrupted files\r\n> file with syntax errors or missing the `created_at` key\r\n\r\nin the UI also add a second layer that tries to protect the user\r\nmaking it more obvious that a certain conflict is corrupted \"IF Detected\"\r\nby showing that this file is corrupted in the UI\r\nas opposed to just a relatively nondescript `ERROR` from gradio\r\n> this basically only catches missing keys\r\nand since not all keys are used and key values might be still wrong it's not foolproof but it's better than nothing\r\n\r\nnote if the user insist, they can still click the `Restore Selected Config` button even after an error is detected\r\n\r\n### minor changes\r\n- I also took the chance to reformat the HTML removing some unnecessary text blocks\r\n- fix indent to the HTML\r\n- also save `config status json` with indent 4\r\n## Screenshots/videos:\r\n### current when thers an error\r\nimo hard to notice\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/38ef9e06-3565-4c6d-9e8a-6ab6489efeef)\r\n### now: imo obvious\r\n![2023-08-20 17_35_59_054 chrome](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/535616b5-f536-4fc5-aa1a-71cb780044fb)\r\n\r\n\r\n## Checklist:\r\n\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 11,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-08-20T06:57:27Z",
        "closed_at": "2023-08-26T21:14:11Z",
        "merged_at": null,
        "body": "(see https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12691 for an alternative, and my personally preferred, design)\r\n\r\n## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12681\r\n\r\nAdds an option to move the top row (prompt, generate button, action buttons) to the settings (left) column. Disabled by default.\r\n\r\nThis also makes a good compliment to https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12648 and https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12687 as now the image preview can be made a larger focus of the interface if the user so desires.\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/0c21ad80-35b8-4ff3-8386-6d1051d9ff5e)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 116,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-08-20T06:27:09Z",
        "closed_at": "2023-08-20T09:42:12Z",
        "merged_at": "2023-08-20T09:42:12Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/2699\r\n\r\nAdds a basic built-in extension to make the left and right columns of the txt2img and img2img tabs resizeable. This works by overriding the parent container in these tabs to use a grid layout, inserting a resize tool, and setting up their respective event handlers. Reflow is handled automatically by using the grid layout, and the grid layout is reverted to the flex layout when the browser width is too small (important for mobile).\r\n\r\nI believe this is basic but useful enough to merit it being made available as a built-in extension, but if not I'll throw it up as a separate extension.\r\n\r\n## Screenshots/videos:\r\n\r\n![resize-handle](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/970311bb-3d4c-483d-bdeb-9195fad560ec)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-20T06:23:08Z",
        "closed_at": "2023-08-20T06:34:24Z",
        "merged_at": null,
        "body": "With this change, sorting of the dropdown list of checkpoints will take into account folders and subfolders. In my opinion, sorting has become more correct.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-08-20T06:15:47Z",
        "closed_at": "2023-08-21T04:10:19Z",
        "merged_at": "2023-08-21T04:10:19Z",
        "body": "## Description\n\n* Error occurs when switching within \"SD VAE\" after using another VAE then reusing a model.\n* Introduced `loaded_vae_states` to store VAE states. This is synchronized with `loaded_sd_models` to track VAE states.\n* Resolves the error observed after reusing model during a VAE switch in \"SD VAE\".\n\n## How to reproduce this bug:\n\n1. In \"Settings\", set \"Maximum number of checkpoints loaded at the same time\" under \"Stable Diffusion\" to 2 or more.\n2. Load \"Model A\" in the \"Stable Diffusion checkpoint\".\n3. In \"SD VAE\", load \"VAE A\".\n4. Switch to another model, \"Model B\", in the \"Stable Diffusion checkpoint\".\n5. Switch to another VAE, \"VAE B\", in the \"SD VAE\".\n6. Return to \"Model A\" in the \"Stable Diffusion checkpoint\". Note: \"Model A\" is reused from memory.\n7. Switch to a different VAE, in \"SD VAE\". \n\nAt this point, the following error occurs:\n```bash\nLoading VAE weights specified in settings: /stable-diffusion-webui/models/VAE/vae-ft-mse-840000-ema-pruned.safetensors\nchanging setting sd_vae to vae-ft-mse-840000-ema-pruned.safetensors: AssertionError\nTraceback (most recent call last):\n  File \"/stable-diffusion-webui/modules/options.py\", line 133, in set\n    self.data_labels[key].onchange()\n  File \"/stable-diffusion-webui/modules/call_queue.py\", line 14, in f\n    res = func(*args, **kwargs)\n  File \"/stable-diffusion-webui/modules/initialize_util.py\", line 152, in <lambda>\n    shared.opts.onchange(\"sd_vae\", wrap_queued_call(lambda: sd_vae.reload_vae_weights()), call=False)\n  File \"/stable-diffusion-webui/modules/sd_vae.py\", line 271, in reload_vae_weights\n    load_vae(sd_model, vae_file, vae_source)\n  File \"/stable-diffusion-webui/modules/sd_vae.py\", line 209, in load_vae\n    store_base_vae(model)\n  File \"/stable-diffusion-webui/modules/sd_vae.py\", line 48, in store_base_vae\n    assert not loaded_vae_file, \"Trying to store non-base VAE!\"\nAssertionError: Trying to store non-base VAE!\n```\n\n## Checklist:\n\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\n- [x] I have performed a self-review of my own code\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 11,
        "changed_files": 1,
        "created_at": "2023-08-20T05:34:07Z",
        "closed_at": "2023-08-20T09:46:34Z",
        "merged_at": "2023-08-20T09:46:34Z",
        "body": "## Description\r\nFix xyz swap axes\r\n> I broke when I was implementing [`Use text inputs instead of dropdowns`](https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12491)\r\n\r\nand make `[x.strip() for x in chain.from_iterable(csv.reader(StringIO(vals))) if x]` into a function`csv_string_to_list_strip`\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-19T11:16:41Z",
        "closed_at": "2023-08-20T09:14:41Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-19T10:58:18Z",
        "closed_at": "2023-08-19T10:58:34Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-19T10:54:47Z",
        "closed_at": "2023-08-19T11:06:01Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nFix Runtim error of using \"Half\" function when loading model when running on MacOS with CPU only.\r\nAdd \"--no-half\" config in COMMANDLINE_ARGS in webui-macos-env.sh file\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/17061986/2fc3218b-a930-4004-b778-61ba9fdc0d36)\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/17061986/a2a27c70-d8b4-46ec-8dfb-82a6f11eebee)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-19T10:52:31Z",
        "closed_at": "2023-08-19T10:54:04Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nFix Runtim error of using \"Half\" function when loading model when running on MacOS with CPU only.\r\nAdd \"--no-half\" config in COMMANDLINE_ARGS in webui-macos-env.sh file\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/17061986/2fc3218b-a930-4004-b778-61ba9fdc0d36)\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/17061986/a2a27c70-d8b4-46ec-8dfb-82a6f11eebee)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-19T10:49:02Z",
        "closed_at": "2023-08-19T10:56:02Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nFix Runtim error of using \"Half\" function when loading model when running on MacOS with CPU only.\r\nAdd \"--no-half\" config in COMMANDLINE_ARGS in webui-macos-env.sh file\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/17061986/2fc3218b-a930-4004-b778-61ba9fdc0d36)\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/17061986/a2a27c70-d8b4-46ec-8dfb-82a6f11eebee)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-19T08:02:28Z",
        "closed_at": "2023-08-21T04:50:51Z",
        "merged_at": "2023-08-21T04:50:51Z",
        "body": "## Description\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12642\r\nswap to png if image dimension exceeds the limit of jpeg or webp\r\n\r\ngo with swap format approach as opposed to downscale (as suggested by the issue) because\r\none can downscale and conver format later if they wish but they cannot upscale image back\r\n\r\nmy little experiment\r\n```py\r\nfrom PIL import Image\r\nImage.new(\"RGB\", (2**31-1, 1), \"black\").save('temp.png')\r\n```\r\nif my information is correct, maximum dimension for PNG is 2^32-1\r\nsince 2^32-1 cause OverflowError: Python int too large to convert to C long\r\nso I try 2^31-1 and I got MemoryError just trying to create the black image\r\nI don't think we need to worry about the limit of PNG format\r\nI was able to save up to 2^26-1\r\nbut my image viewer was only able to open images lesser then 2^18~\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 15,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-19T07:19:11Z",
        "closed_at": "2023-08-19T07:41:36Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nfix issue https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12664\r\nPerforming the `undo_hijack` operation for sdxl conditioner.\r\n\r\n## Screenshots/videos:\r\nAfter testing, the issues mentioned above have been successfully resolved.\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-19T04:28:59Z",
        "closed_at": "2023-08-19T05:08:19Z",
        "merged_at": "2023-08-19T05:08:19Z",
        "body": "## Description\r\n\r\nI have added the functionality to the 'decode_base64_to_image' function in the API to get images from a URL. In many cases, in the API's usage scenarios, the upstream does not directly transmit base64 data but uploads the image to an object storage service (OSS) and then sends the URL of the image from OSS. Therefore, I believe it is necessary to add the ability to get images from a URL in the API.\r\n\r\n```python\r\nif encoding.startswith(\"http://\") or encoding.startswith(\"https://\"):\r\n        import requests\r\n        response = requests.get(encoding, timeout=30, headers={'user-agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36'})\r\n        try:\r\n            image = Image.open(BytesIO(response.content))\r\n            return image\r\n        except Exception as e:\r\n            raise HTTPException(status_code=500, detail=\"Invalid image url\") from e\r\n```\r\n\r\n## Screenshots/videos:\r\n\r\n![\u622a\u56fe 2023-08-19 12-18-11](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/25168945/aecb1844-deb1-4846-bd7c-4f1216b819dd)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 19,
        "changed_files": 1,
        "created_at": "2023-08-19T02:40:07Z",
        "closed_at": "2023-08-19T05:01:05Z",
        "merged_at": "2023-08-19T05:01:05Z",
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 15,
        "changed_files": 4,
        "created_at": "2023-08-19T01:59:00Z",
        "closed_at": "2023-08-19T05:02:18Z",
        "merged_at": "2023-08-19T05:02:18Z",
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\nthis just updates the xformers from 0.0.20 to 0.0.21 for a little more optimization and it has some python grammar fixes in 2 scripts\r\n## Screenshots/videos:\r\n![linter](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/106700244/3422bc0b-1d69-4da2-a1a5-1755a261a638)\r\n![glinter](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/106700244/d387f5a2-0e22-4c26-b315-3356be91a07b)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-19T01:06:58Z",
        "closed_at": "2023-08-19T05:03:20Z",
        "merged_at": "2023-08-19T05:03:20Z",
        "body": "## Description\r\n\r\nNeed a `-u` flag for python for its output to show up in docker logs.\r\n\r\nHope that opening with a PR isn't too forward. Figuring it's a small change.\r\n\r\n## Screenshots/videos:\r\n\r\nwithout:\r\n```\r\n$ docker logs -f stable-diffusion-webui\r\n...\r\n################################################################\r\nLaunching launch.py...\r\n################################################################\r\nUsing TCMalloc: libtcmalloc_minimal.so.4\r\nWARNING: CPU random generator seem to be failing, disabling hardware random number generation\r\nWARNING: RDRND generated: 0xffffffff 0xffffffff 0xffffffff 0xffffffff\r\n```\r\n\r\nwith:\r\n```\r\n$ docker logs -f stable-diffusion-webui\r\n...\r\n################################################################\r\nLaunching launch.py...\r\n################################################################\r\nUsing TCMalloc: libtcmalloc_minimal.so.4\r\nPython 3.10.12 (main, Jul  5 2023, 18:54:27) [GCC 11.2.0]\r\nVersion: v1.5.1\r\nCommit hash: 68f336bd994bed5442ad95bad6b6ad5564a5409a\r\n...\r\n```\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)th\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests) -- I think webui.sh is outside test coverage?\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-18T15:12:18Z",
        "closed_at": "2023-08-18T15:12:38Z",
        "merged_at": null,
        "body": "https://github.com/AUTOMATIC1111/stable-diffusion-webui\r\nhttps://github.com/minhnhat0709/sd-webui-controlnet\r\nhttps://github.com/camenduru/sd-webui-tunnels\r\nhttps://github.com/ashen-sensored/stable-diffusion-webui-two-shot\r\nhttps://github.com/adieyal/sd-dynamic-prompts\r\nhttps://github.com/DominikDoom/a1111-sd-webui-tagcomplete\r\nhttps://github.com/zanllp/sd-webui-infinite-image-browsing\r\nhttps://github.com/Uminosachi/sd-webui-inpaint-anything\r\nhttps://github.com/hako-mikan/sd-webui-lora-block-weight",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-18T14:26:33Z",
        "closed_at": "2023-08-19T05:03:40Z",
        "merged_at": "2023-08-19T05:03:40Z",
        "body": "## Description\r\n- fix typo\r\n- modules/script.py/elem_id()\r\n\r\n## Evidence\r\n- webui-user.bat\r\n    ```bat\r\n    @echo off\r\n\r\n    set PYTHON=\r\n    set GIT=\r\n    set VENV_DIR=\r\n    set COMMANDLINE_ARGS=--test-server\r\n\r\n    call webui.bat\r\n    ```\r\n\r\n- `python -m pytest -vv --verify-base-url test`\r\n    ```log\r\n    PS D:\\Users\\USERNAME\\Documents\\development\\fix\\stable-diffusion-webui> python -m pytest -vv --verify-base-url test\r\n    ===================================================================================================== test session starts =====================================================================================================\r\n    platform win32 -- Python 3.10.11, pytest-7.4.0, pluggy-1.2.0 -- C:\\Users\\USERNAME\\AppData\\Local\\Programs\\Python\\Python310\\python.exe\r\n    cachedir: .pytest_cache\r\n    baseurl: http://127.0.0.1:7860\r\n    rootdir: D:\\Users\\USERNAME\\Documents\\development\\fix\\stable-diffusion-webui\r\n    configfile: pyproject.toml\r\n    plugins: anyio-3.7.0, base-url-2.0.0, cov-4.1.0\r\n    collected 29 items\r\n\r\n    test/test_extras.py::test_simple_upscaling_performed PASSED                                                                                                                                                              [  3%]\r\n    test/test_extras.py::test_png_info_performed PASSED                                                                                                                                                                      [  6%]\r\n    test/test_extras.py::test_interrogate_performed PASSED                                                                                                                                                                   [ 10%]\r\n    test/test_img2img.py::test_img2img_simple_performed PASSED                                                                                                                                                               [ 13%]\r\n    test/test_img2img.py::test_inpainting_masked_performed PASSED                                                                                                                                                            [ 17%]\r\n    test/test_img2img.py::test_inpainting_with_inverted_masked_performed PASSED                                                                                                                                              [ 20%]\r\n    test/test_img2img.py::test_img2img_sd_upscale_performed PASSED                                                                                                                                                           [ 24%]\r\n    test/test_txt2img.py::test_txt2img_simple_performed PASSED                                                                                                                                                               [ 27%]\r\n    test/test_txt2img.py::test_txt2img_with_negative_prompt_performed PASSED                                                                                                                                                 [ 31%]\r\n    test/test_txt2img.py::test_txt2img_with_complex_prompt_performed PASSED                                                                                                                                                  [ 34%]\r\n    test/test_txt2img.py::test_txt2img_not_square_image_performed PASSED                                                                                                                                                     [ 37%]\r\n    test/test_txt2img.py::test_txt2img_with_hrfix_performed PASSED                                                                                                                                                           [ 41%]\r\n    test/test_txt2img.py::test_txt2img_with_tiling_performed PASSED                                                                                                                                                          [ 44%]\r\n    test/test_txt2img.py::test_txt2img_with_restore_faces_performed PASSED                                                                                                                                                   [ 48%]\r\n    test/test_txt2img.py::test_txt2img_with_vanilla_sampler_performed[PLMS] PASSED                                                                                                                                           [ 51%]\r\n    test/test_txt2img.py::test_txt2img_with_vanilla_sampler_performed[DDIM] PASSED                                                                                                                                           [ 55%]\r\n    test/test_txt2img.py::test_txt2img_with_vanilla_sampler_performed[UniPC] PASSED                                                                                                                                          [ 58%]\r\n    test/test_txt2img.py::test_txt2img_multiple_batches_performed PASSED                                                                                                                                                     [ 62%]\r\n    test/test_txt2img.py::test_txt2img_batch_performed PASSED                                                                                                                                                                [ 65%]\r\n    test/test_utils.py::test_options_write PASSED                                                                                                                                                                            [ 68%]\r\n    test/test_utils.py::test_get_api_url[sdapi/v1/cmd-flags] PASSED                                                                                                                                                          [ 72%]\r\n    test/test_utils.py::test_get_api_url[sdapi/v1/samplers] PASSED                                                                                                                                                           [ 75%]\r\n    test/test_utils.py::test_get_api_url[sdapi/v1/upscalers] PASSED                                                                                                                                                          [ 79%] \r\n    test/test_utils.py::test_get_api_url[sdapi/v1/sd-models] PASSED                                                                                                                                                          [ 82%]\r\n    test/test_utils.py::test_get_api_url[sdapi/v1/hypernetworks] PASSED                                                                                                                                                      [ 86%]\r\n    test/test_utils.py::test_get_api_url[sdapi/v1/face-restorers] PASSED                                                                                                                                                     [ 89%] \r\n    test/test_utils.py::test_get_api_url[sdapi/v1/realesrgan-models] PASSED                                                                                                                                                  [ 93%] \r\n    test/test_utils.py::test_get_api_url[sdapi/v1/prompt-styles] PASSED                                                                                                                                                      [ 96%]\r\n    test/test_utils.py::test_get_api_url[sdapi/v1/embeddings] PASSED                                                                                                                                                         [100%]\r\n\r\n    ================================================================================================ 29 passed in 63.43s (0:01:03) ================================================================================================ \r\n    ```\r\n\r\n## Checklist:\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-18T09:19:06Z",
        "closed_at": "2023-08-19T05:06:13Z",
        "merged_at": "2023-08-19T05:06:13Z",
        "body": "## Description\r\n\r\n1) Uses `preview=True` to always start in preview mode (so the initial click on the thumbnail grid is no longer required)\r\n2) Adds an option to specify custom height, which allows any valid CSS value\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-18T08:21:36Z",
        "closed_at": "2023-08-19T05:27:28Z",
        "merged_at": "2023-08-19T05:27:28Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/7896, per suggestion of @missionfloyd \r\n\r\nMakes results column sticky, with a fix to make it work with Gradio 3.39.0. This will still function properly if the column happens to extend further towards the bottom, and will still always let you scroll to the bottom.\r\n\r\n## Screenshots/videos:\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/8beeaf90-ff29-4e57-b155-6c08007ec2ef\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-08-18T08:15:52Z",
        "closed_at": "2023-08-19T05:26:40Z",
        "merged_at": "2023-08-19T05:26:39Z",
        "body": "## Description\r\nfix issue https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12641\r\nfix model override logic\r\ndo not need extra logic to unload refine model\r\nmy model overall logic should automatically handle that unloading of refine model\r\n\r\ndid some test the results seems correct but I'm unsure if there's any aspects that I missed\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-18T06:35:17Z",
        "closed_at": "2023-08-19T05:28:00Z",
        "merged_at": "2023-08-19T05:28:00Z",
        "body": "## Summary\r\nadded new `[negative_prompt_hash]` and `[full_prompt_hash]` and [image_hash]\r\nand make hash length customizable \r\n\r\n## Description\r\nnot really a bug but someone wants to prompt hash to contain the entire hash I supposed to just be positive prompts\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12637\r\n\r\nI don't want to change the original so I add in a 2 new patterns, `negative_prompt_hash` and `full_prompt_hash`\r\n`full_prompt_hash` is the `sha256(positive_prompt + \" \" + negative_prompt)`\r\n> the space is there to create a unique string\r\n\r\nin addition a new `image_hash` pattern which is the `sha256(image.tobytes())`\r\nit is the hash of the output image itself not including the metadata\r\nit can be used as a unique identifier, or a quick pixel perfect comparison check\r\n\r\nI also made the hash length customizable through file pattern\r\n\r\n`[prompt_hash<4>]` `[negative_prompt_hash<16>]` and `[full_prompt_hash<64>]`\r\ndefault length of 8 is unchanged\r\n\r\n`prompt_hash` length is also customizable but by default it uses the full hash which is equivalent to `[image_hash<64>]`\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-08-18T03:06:37Z",
        "closed_at": "2023-08-19T05:28:47Z",
        "merged_at": "2023-08-19T05:28:47Z",
        "body": "## Description\r\n\r\nRan into issues with the /sdapi/v1/refresh-vae endpoint not properly refreshing the list returned by /sdapi/v1/sd-vae after updates on dick and only returning the values populated during startup. Same was happening with sd-refresh and sd-models.\r\n\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 14,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-18T00:25:48Z",
        "closed_at": "2023-08-19T05:32:45Z",
        "merged_at": "2023-08-19T05:32:45Z",
        "body": "## Description\r\n\r\nMakes this comment actually true. :^)\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/68f336bd994bed5442ad95bad6b6ad5564a5409a/style.css#L577\r\n\r\nText shadow added under the icons to make sure they never blend in, and the toolbar has the background color fade in on hover.\r\n\r\n## Screenshots/videos:\r\n\r\nBefore             |  After\r\n:-------------------------:|:-------------------------:\r\n![before](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/2aa13fd7-f640-4ab6-bf3d-0b0961002f7e)  |  ![after](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/25cc694d-2659-49bc-b3fd-2956059903e6)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 3,
        "created_at": "2023-08-18T00:04:54Z",
        "closed_at": "2023-08-19T05:05:36Z",
        "merged_at": "2023-08-19T05:05:36Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/7834\r\n\r\n1) Adds option to use chosen live preview method on interrupt to save an extra second or two on interrupts. Defaults to false.\r\n2) When hires fix is used, if we interrupt before going into hires fix, immediately return the given samples instead. This prevents wasting time on upscaling.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 6,
        "changed_files": 2,
        "created_at": "2023-08-17T23:42:28Z",
        "closed_at": "2023-08-19T05:33:22Z",
        "merged_at": "2023-08-19T05:33:22Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/6762\r\n\r\n1) `img2img` and `inpaint` were not able to get the background color added because the images were both converted to RGB too early. [The code to add the background color comes later](https://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/541ef9247cfe8785c12f7142ad02cd5310fc5925/modules/processing.py#L1444), and it's safe to not later convert the image to RGB as [that is already handled in the same code to add the background color](https://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/541ef9247cfe8785c12f7142ad02cd5310fc5925/modules/images.py#L762). \r\n2) `img2img sketch` and `inpaint sketch` are needlessly converted to RGB. The sketch modes seem to force RGB (Gradio always adds a white background to them). So, RGB is now set on the components themselves to make this clearer, and the dubious conversion is removed.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-17T22:12:34Z",
        "closed_at": "2023-08-19T05:34:46Z",
        "merged_at": "2023-08-19T05:34:46Z",
        "body": "## Description\r\n\r\nShould supercede https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12624 -- I'm leaving that PR open for context and replication if necessary.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-17T18:35:34Z",
        "closed_at": "2023-08-19T05:44:33Z",
        "merged_at": null,
        "body": "**Update**: I believe https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12630 fixes this properly -- I will close this PR when that one or another is merged to resolve this.\r\n\r\n## Description\r\n\r\nAttempts to solve a regression in cc53db6652b11e6f7bca42c3aa93bd6761ed3d3f  (the previous commit a64fbe89288802f8b5ec8ca7bcab5aaf2c7bfea5 does not have this issue). I think this is also related to https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12611. PR https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12599 also still has this issue.\r\n\r\nTo preface: this only ever seems to happen with `animevae.pt`, and only for certain prompts. As such, it's difficult to find an easily reproducible scenario. This one is consistent for me, and I've verified it also works on somebody else's system. Also, **this is absolutely not the correct way to fix this**, because now it wastes time trying to decode the latent potentially twice, but I'm trying to wrap my head around what's going wrong here, and hopefully opening this PR brings that to discussion.\r\n\r\n<details>\r\n<summary>How to reproduce</summary>\r\n\r\n1) Checkout cc53db6652b11e6f7bca42c3aa93bd6761ed3d3f or later, launch with `--no-half-vae`\r\nGet this VAE, model, and these LoRAs\r\n**VAE**: https://huggingface.co/a1079602570/animefull-final-pruned/blob/main/animevae.pt\r\n**Model**: https://huggingface.co/AnonymousM/Based-mixes/blob/main/Based64mix-V3.safetensors\r\n**LoRAs**:\r\n~~(removed)~~\r\n\r\n2) Download and use the metadata from this image to set up the params\r\n![74wkie](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/294c1c5f-d536-4cc8-b826-6e287c143052)\r\n\r\n3) (optionally) verify the image can be generated without hires fix.\r\n\r\n4) Attempt to generate the image with hires fix enabled. These are the settings I usually use but I tested this several other times and the only factor that seems to matter is the `Upscale by` value must be `1.15` or more.\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/9c04a14e-695d-49d6-87d4-2b676fe62e40)\r\n\r\n5) (optionally) take the above image, and use the exact same parameters to upscale in the img2img tab. This will _not_ produce the NaNs exception.\r\n\r\n---\r\n\r\nSide note: I got into the weeds and did some debugging, and this is why I'm also suspicious if this is related to the issue I linked above. This is the part of the code that produces the NaNs: https://github.com/Stability-AI/stablediffusion/blob/cf1d67a6fd5ea1aa600c4df58e5b47da45f6bdbf/ldm/modules/diffusionmodules/model.py#L634-L641\r\n\r\nIf I attempt to upscale the image in img2img, and use the initial value of `z` (the upscaled latent, before [this line](https://github.com/Stability-AI/stablediffusion/blob/cf1d67a6fd5ea1aa600c4df58e5b47da45f6bdbf/ldm/modules/diffusionmodules/model.py#L621) is executed), store that latent, and then attempt to use hires fix in txt2img, but with that value of `z` I stored earlier, it _still_ produces NaNs in that function. However, if I do it the other way around, storing the upscaled latent from txt2img, and using that in img2img, I instead get the below:\r\n\r\n```\r\nRuntimeError: Input type (struct c10::Half) and bias type (float) should be the same\r\n```\r\n\r\n</details>\r\n\r\nJust noting my specs here as well, incase this is somehow some pytorch bug.\r\n\r\n```\r\npython: 3.10.6 \u2000\u2022\u2000 torch: 2.0.1+cu118 \u2000\u2022\u2000 xformers: 0.0.20\r\n```\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 34,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-08-17T01:46:20Z",
        "closed_at": "2023-08-19T05:36:44Z",
        "merged_at": "2023-08-19T05:36:44Z",
        "body": "## Description\r\n\r\nFollow-up to https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12564. See https://gist.github.com/catboxanon/69ce64e0389fa803d26dc59bb444af53 as an example of use.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-16T21:43:12Z",
        "closed_at": "2023-08-17T13:21:44Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nTitle. This is incase the user were to later switch to a more stable VAE, and does not need the extra precision (notably only the NovelAI VAE seems to ever causes these issues in the first place).\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-16T19:57:21Z",
        "closed_at": "2023-08-16T20:29:08Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nTitle. This is incase the user were to later switch to a more stable VAE, and does not need the extra precision (notably only the NovelAI VAE ever causes these issues in the first place).\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-16T15:27:46Z",
        "closed_at": "2023-08-16T15:41:03Z",
        "merged_at": "2023-08-16T15:41:03Z",
        "body": "## Description\r\nif extension does not exist this will cause fatal error\r\n\r\nthis can happen if I just specify a new `--data-dir`\r\n\r\nnote as extension directory is created somewhere else (I'm not sure where) I did not opt to create a directory again if not exist\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-16T11:28:55Z",
        "closed_at": "2023-08-16T11:48:38Z",
        "merged_at": "2023-08-16T11:48:37Z",
        "body": "## Description\r\n\r\nif no custom --data-dir is set, then this basically does nothing as the root web UI folder is already served\r\n\r\nbut if a custom --data-dir is used then this will cause some extensions to not function as those extension require some files being served \r\nso if one wants to use webui normally with a custom --data-dir, then they will have to manually add data-dir to gradio-allowed-path\r\n\r\nthis change auto prepend's data-dir to gradio-allowed-path\r\n\r\nmaking --data-dir more user friendly\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 22,
        "deletions": 19,
        "changed_files": 2,
        "created_at": "2023-08-16T08:56:17Z",
        "closed_at": "2023-08-19T05:53:07Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nUpdate:\r\n35db3665b39c55bfc0ef37e25fe23897ce7345df sometimes produces exceptions due to copying incomplete data:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/routes.py\", line 442, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/blocks.py\", line 1392, in process_api\r\n    result = await self.call_function(\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/blocks.py\", line 1097, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/utils.py\", line 703, in wrapper\r\n    response = f(*args, **kwargs)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 392, in pages_html\r\n    return refresh()\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 400, in refresh\r\n    ui.pages_contents = [pg.create_html(ui.tabname) for pg in ui.stored_extra_pages]\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 400, in <listcomp>\r\n    ui.pages_contents = [pg.create_html(ui.tabname) for pg in ui.stored_extra_pages]\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 162, in create_html\r\n    self.items = {x[\"name\"]: x for x in self.list_items()}\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 162, in <dictcomp>\r\n    self.items = {x[\"name\"]: x for x in self.list_items()}\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks_checkpoints.py\", line 35, in list_items\r\n    yield self.create_item(name, index)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks_checkpoints.py\", line 18, in create_item\r\n    path, ext = os.path.splitext(checkpoint.filename)\r\nAttributeError: 'NoneType' object has no attribute 'filename'\r\n```\r\n\r\nNormally this wouldn't be too difficult to fix; just save a copy of `sd_models.checkpoints_list` into a different variable at the beginning of the `list_models()` function in `sd_models.py` and then have `list_items()` in `ui_extra_networks_checkpoints.py` use that value if set.\r\n\r\nThe problem is that when I was testing when `list_models()` and `list_items()` started relative to each other, I found that `list_models()` can end up running on multiple threads at the same time. This leaves two options: either exit `list_models()` immediately if it is running in a different thread or use a lock to wait for it to finish in the other thread. The problem with exiting immediately is that it produces a window of time that can result in exceptions due to `checkpoints_list` being in an incomplete state. The latter however should still take less time than before this PR due to the lock waiting for the function to complete rather than the function running multiple times and starting over again each time from the beginning.\r\n\r\n## Previous Description\r\n\r\nSometimes when launching web UI there will be an exception that looks like this:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/routes.py\", line 442, in run_predict\r\n    output = await app.get_blocks().process_api(\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/blocks.py\", line 1392, in process_api\r\n    result = await self.call_function(\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/blocks.py\", line 1097, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/anyio/to_thread.py\", line 33, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 877, in run_sync_in_worker_thread\r\n    return await future\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py\", line 807, in run\r\n    result = context.run(func, *args)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/gradio/utils.py\", line 703, in wrapper\r\n    response = f(*args, **kwargs)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 392, in pages_html\r\n    return refresh()\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 400, in refresh\r\n    ui.pages_contents = [pg.create_html(ui.tabname) for pg in ui.stored_extra_pages]\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 400, in <listcomp>\r\n    ui.pages_contents = [pg.create_html(ui.tabname) for pg in ui.stored_extra_pages]\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 162, in create_html\r\n    self.items = {x[\"name\"]: x for x in self.list_items()}\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks.py\", line 162, in <dictcomp>\r\n    self.items = {x[\"name\"]: x for x in self.list_items()}\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/ui_extra_networks_checkpoints.py\", line 33, in list_items\r\n    for index, name in enumerate(sd_models.checkpoints_list):\r\nRuntimeError: dictionary changed size during iteration\r\n```\r\n\r\nAs the exception shows, the problem is that `sd_models.checkpoints_list` changes size while still in the for loop. This can happen because `list_items()` starts running in `ui_extra_networks_checkpoints.py` and then `list_models()` in `sd_models.py` clears `checkpoints_list` before the for loop in `list_items()` is completed. To prevent this, this PR creates a lock object and uses it so that `list_models()` and `list_items()` can't run at the same time.\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 77,
        "deletions": 13,
        "changed_files": 3,
        "created_at": "2023-08-16T07:02:50Z",
        "closed_at": "2023-08-19T05:36:20Z",
        "merged_at": "2023-08-19T05:36:20Z",
        "body": "## Description\r\n\r\n* prevents torch from storing weights twice when loading model weights from state_dict\r\n* also sends weights to GPU earlier, if possible\r\n* on my machine, peak RAM usage when loading SDXL according to the chart is 7GB, and it goes to 3.3GB after being loaded\r\n* gains for --medvram are less, because the model needs to be stored in memory; gains for checkpoints in fp32 are also less.\r\n* does some rather dangerous things so I'd like people to test it before it's merged\r\n* intended to work on the version of torch required by the repo, torch 2.0.1\r\n* additionally, prevents Loras from making weight backups until they are needed, which also makes the program use less RAM but only until you start using Loras.\r\n\r\nLoading SDXL 1.0 fp16 without low/medvram:\r\n![Taskmgr_qfESnqYlyC](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/20920490/a884a842-ec37-4a25-909d-920d33f38b9a)\r\n\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 48,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2023-08-16T07:01:47Z",
        "closed_at": "2023-08-16T07:02:11Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* prevents torch from storing weights twice when loading model weights from state_dict\r\n* on my machine, peak RAM usage when loading SDXL is 7GB, and it goes to 3.7GB after being loaded\r\n* does some rather dangerous things so I'd like people to test it before it's merged\r\n* additionally, prevents Loras from making weight backups until they are needed, which also makes the program use less RAM but only until you start using Loras.\r\n\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-16T03:23:04Z",
        "closed_at": "2023-08-16T06:56:12Z",
        "merged_at": "2023-08-16T06:56:12Z",
        "body": "## Description\r\nTitle, when trying latest TAESD weight, it looks like I have wrong scale when send latent into taesd decoder.\r\nSo I just remove it now.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1686,
        "deletions": 0,
        "changed_files": 3,
        "created_at": "2023-08-16T00:29:29Z",
        "closed_at": "2023-08-16T00:29:52Z",
        "merged_at": null,
        "body": null,
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-15T18:47:03Z",
        "closed_at": "2023-08-15T18:47:49Z",
        "merged_at": "2023-08-15T18:47:49Z",
        "body": "## Description\r\n\r\nTitle. This is most noticeable with the progress bar in the extras tab and in the gallery view when generating a batch of images. Removing this doesn't seem to break anything else in my tests.\r\n\r\n## Screenshots/videos:\r\n\r\n<details>\r\n<summary>Before</summary>\r\n\r\n![before](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/acc71120-6e2a-4e97-8e41-425565573bf5)\r\n</details>\r\n\r\n<details>\r\n<summary>After</summary>\r\n\r\n![after](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/f2dbfa57-1864-4f36-bc23-7e9232b486f2)\r\n</details>\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 3,
        "changed_files": 3,
        "created_at": "2023-08-15T18:27:58Z",
        "closed_at": "2023-08-15T18:46:19Z",
        "merged_at": "2023-08-15T18:46:19Z",
        "body": "## Description\r\n\r\nCloses #10260\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-15T17:39:20Z",
        "closed_at": "2023-08-15T18:47:03Z",
        "merged_at": "2023-08-15T18:47:03Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12558\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 35,
        "deletions": 67,
        "changed_files": 1,
        "created_at": "2023-08-15T16:06:02Z",
        "closed_at": "2023-08-17T20:16:54Z",
        "merged_at": null,
        "body": "Based on my understanding, here I made a few optimizations: Removed redundant loop handling for different channels using NumPy broadcasting. Simplified the calculation of the masked window for RGB. Removed unused variables and optimized calculations for windowed_image and src_fft. Combined the calculation of the noise window and noise_rgb. Utilized array broadcasting to perform operations across multiple channels. Replaced explicit loops with array operations for noise shaping. Improved readability by removing redundant slicing operations.\r\n\r\n## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-15T16:02:46Z",
        "closed_at": "2023-08-15T16:24:16Z",
        "merged_at": "2023-08-15T16:24:16Z",
        "body": "## Description\r\nwith previous PR I made the ex_bias support for lora ext.\r\nSo I also add this feature into full module, which is usually generated by extraction (which want to save bias)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-15T11:20:36Z",
        "closed_at": "2023-08-15T12:29:16Z",
        "merged_at": "2023-08-15T12:29:16Z",
        "body": "## Description\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-15T10:38:26Z",
        "closed_at": "2023-08-15T12:29:48Z",
        "merged_at": "2023-08-15T12:29:48Z",
        "body": "## Description\r\nThe setting `sd_vae_as_default` is still being used in `sd_vae.py`, which can cause an exception with new installs of web UI:\r\n```\r\nloading stable diffusion model: AttributeError\r\nTraceback (most recent call last):\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/python/3.10.10/lib/python3.10/threading.py\", line 973, in _bootstrap\r\n    self._bootstrap_inner()\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/python/3.10.10/lib/python3.10/threading.py\", line 1016, in _bootstrap_inner\r\n    self.run()\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/python/3.10.10/lib/python3.10/threading.py\", line 953, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/initialize.py\", line 147, in load_model\r\n    shared.sd_model  # noqa: B018\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/shared_items.py\", line 110, in sd_model\r\n    return modules.sd_models.model_data.get_sd_model()\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/sd_models.py\", line 475, in get_sd_model\r\n    load_model()\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/sd_models.py\", line 583, in load_model\r\n    load_model_weights(sd_model, checkpoint_info, state_dict, timer)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/sd_models.py\", line 384, in load_model_weights\r\n    vae_file, vae_source = sd_vae.resolve_vae(checkpoint_info.filename).tuple()\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/sd_vae.py\", line 180, in resolve_vae\r\n    res = resolve_vae_near_checkpoint(checkpoint_file)\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/sd_vae.py\", line 163, in resolve_vae_near_checkpoint\r\n    if vae_near_checkpoint is not None and (shared.opts.sd_vae_as_default or is_automatic):\r\n  File \"/Users/brkirch/Desktop/stable-diffusion-webui/modules/options.py\", line 114, in __getattr__\r\n    return super(Options, self).__getattribute__(item)\r\nAttributeError: 'Options' object has no attribute 'sd_vae_as_default'\r\n```\r\n\r\nThis PR fixes the exception by using `not shared.opts.sd_vae_overrides_per_model_preferences` instead. The existing value of `sd_vae_as_default` is already being migrated for existing installs in `option.py`:\r\n```Python\r\n# 1.6.0 VAE defaults\r\nif self.data.get('sd_vae_as_default') is not None and self.data.get('sd_vae_overrides_per_model_preferences') is None:\r\n    self.data['sd_vae_overrides_per_model_preferences'] = not self.data.get('sd_vae_as_default')\r\n```\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 39,
        "deletions": 39,
        "changed_files": 1,
        "created_at": "2023-08-15T07:24:33Z",
        "closed_at": "2023-08-15T08:47:20Z",
        "merged_at": "2023-08-15T08:47:20Z",
        "body": "## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-15T06:27:22Z",
        "closed_at": "2023-08-15T13:31:12Z",
        "merged_at": "2023-08-15T13:31:12Z",
        "body": "## Description\r\n\r\n* Add my custom gradio theme\r\n* Here's the hf spaces link: https://huggingface.co/spaces/NoCrypt/miku\r\n* Works with both dark and light mode\r\n\r\n## Screenshots/videos:\r\n![chrome_23-08-15 073055](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/57245077/746ed1f4-5101-4fb1-8fb5-6134d0335d25)\r\n![chrome_23-08-15 074056](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/57245077/dd615598-5897-482d-afc6-79d26b0acbf6)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 1,
        "changed_files": 4,
        "created_at": "2023-08-14T18:24:14Z",
        "closed_at": "2023-08-15T06:50:20Z",
        "merged_at": "2023-08-15T06:50:20Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12085 and properly resolves https://github.com/AUTOMATIC1111/stable-diffusion-webui/discussions/5351.\r\n\r\nThis gives the ability to add additional noise during img2img. This is technically identical functionality to `initial_noise_multiplier`, but because of how sensitive that parameter is, this expands the range to be more finely controlled. The aforementioned is really only useable up to a value of `1.1` (and defaulting to `1`), as shown in the PR it was implemented (https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/5373), whereas this can take on the full range from `0` to `1` (depending on denoise strength used).\r\n\r\nThis also makes adding finer details to hires fix possible (something the other parameter cannot do directly [as it's only used strictly in the img2img tab](https://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/45be87afc6b173ebda94f427b8d396a2842ddf3c/modules/processing.py#L1507-L1509), not hires fix).\r\n\r\nI believe this might make more sense to introduce directly into the hires fix and img2img UI, but for now [users can use the built-in extension to add it there if they wish](https://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/a2e213bc7ba29495559c9e53b734047ea879b343/extensions-builtin/extra-options-section/scripts/extra_options_section.py#L68-L69).\r\n\r\n## Screenshots/videos:\r\n\r\nThe below example is for hires fix of a 512x512 image with denoising @ 0.45.\r\n\r\nExtra noise = 0             |  Extra noise = 0.2\r\n:-------------------------:|:-------------------------:\r\n[![without](https://user-images.githubusercontent.com/122327233/260556373-9257aa18-dfc8-49f6-9984-a0a1f430c029.png)](https://user-images.githubusercontent.com/122327233/260556373-9257aa18-dfc8-49f6-9984-a0a1f430c029.png)  |  [![with](https://user-images.githubusercontent.com/122327233/260556387-0c6df12c-7412-43d5-84d2-2a69ad6152c4.png)](https://user-images.githubusercontent.com/122327233/260556387-0c6df12c-7412-43d5-84d2-2a69ad6152c4.png)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-14T11:13:35Z",
        "closed_at": "2023-08-15T05:12:22Z",
        "merged_at": "2023-08-15T05:12:22Z",
        "body": "## Description\r\nUpdate the SDXL repository commit hash. This is primarily so that it is under the [MIT License](https://github.com/Stability-AI/generative-models/blob/45c443b316737a4ab6e40413d7794a7f5657c19f/LICENSE-CODE) instead of the [SDXL 0.9 Research License Agreement](https://github.com/Stability-AI/generative-models/blob/5c10deee76adad0032b412294130090932317a87/LICENSE). I have tested this change and found no issues, seeds are unaffected.\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-08-14T09:54:00Z",
        "closed_at": "2023-08-14T10:35:41Z",
        "merged_at": "2023-08-14T10:35:41Z",
        "body": "## Description\r\nseparate extra options for txt2img and img2img\r\n\r\nnote I did not inherit the old settings maybe we should\r\n\r\n## Screenshots/videos:\r\nsettings\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/fd1428e9-0603-4c70-bf84-984211c6a154)\r\ntxt2img\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/e0af44ac-3cdc-4145-8396-73061b99c637)\r\nimg2img\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/89318d8f-0358-46c2-8061-0dd3d27d4fbd)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-14T07:16:22Z",
        "closed_at": "2023-08-14T07:18:29Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-14T07:07:43Z",
        "closed_at": "2023-08-14T10:36:10Z",
        "merged_at": "2023-08-14T10:36:10Z",
        "body": "## Description\r\n\r\nfix typo in modules/shared_options.py\r\n\r\n    unperdictable -> unpredictable\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 30,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2023-08-14T05:55:18Z",
        "closed_at": "2023-08-14T06:01:34Z",
        "merged_at": "2023-08-14T06:01:34Z",
        "body": "## Description\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12523\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-14T03:52:23Z",
        "closed_at": "2023-08-14T06:02:10Z",
        "merged_at": "2023-08-14T06:02:10Z",
        "body": "## Description\r\nOriginal Paper: https://arxiv.org/abs/2308.02157\r\nSince it is basiclly DPM++ 2M SDE with Heun solver (k_diff integrate it into dpmpp_2m_sd)\r\nSo I call it DPM++ 2M SDE Heun Instead of RES\r\n![xyz_grid-0799-2023-08-14_7f3da1fab9_kohaku-v4-rev1 2_3120022056_cc8548be-5632x2793](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/59680068/a02e4d29-8342-4013-9ee3-dcff83a36e8d)\r\n\r\n\r\n\r\n\r\nWhen I add this sampler I just found that some DPM++ sampler are on top of the list which may cause wrong order in UI (I guess DPM++ should be together?)\r\nSo I change the order\r\n\r\n## Checklist:\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-13T18:29:01Z",
        "closed_at": "2023-08-14T06:00:55Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nTitle. Thanks to Anonymous for reporting this.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-13T16:04:54Z",
        "closed_at": "2023-08-13T17:27:18Z",
        "merged_at": "2023-08-13T17:27:18Z",
        "body": "\r\n## Description\r\n\r\n* fixed typo.\r\n    ```\r\n    existance -> existence\r\n    ```\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 18,
        "deletions": 13,
        "changed_files": 6,
        "created_at": "2023-08-13T14:34:19Z",
        "closed_at": "2023-08-13T17:28:49Z",
        "merged_at": "2023-08-13T17:28:49Z",
        "body": "## Description\r\n- Switch Macs back to the official k-diffusion repository. PyTorch 2.0+ doesn't need the workarounds anymore. Fixes #11465.\r\n- Add the commit hash to `git checkout`.\r\n- Change the origin URLs of repositories when they don't match the requested URL. This is important to prevent errors when switching between different repositories (e.g. changing the k-diffusion respository back for Mac users would result in an exception without this).\r\n- Use a fixed size for sub-quadratic attention chunking on MPS. This will usually highly reduce overall memory usage on MPS without a significant impact on performance.\r\n- Use sub-quadratic attention by default on MPS. There isn't much difference between InvokeAI and sub-quadratic for smaller images, but sub-quadratic handles large images much better, especially with limited memory.\r\n- Fix NaN exceptions that were occurring with sub-quadratic attention due to `torch.empty()` not working with `torch.baddbmm()` on MPS, by using `torch.zeros()` instead.\r\n- Remove duplicate code for torchsde randn.\r\n- Fix DDIM and PLMS samplers on MPS by using float32 for MPS (float64 is not supported by MPS).\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-13T13:09:24Z",
        "closed_at": "2023-08-13T13:38:27Z",
        "merged_at": "2023-08-13T13:38:27Z",
        "body": "## Description\r\n\r\nFixes regression in https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/f8ff8c0638997fd0aef217db1505598846f14782, where the `sampler_extra_params` dict was no longer set up in the `KDiffusionSampler` class.\r\nI haven't reviewed that commit fully but it'd be a good idea to make sure this isn't the only thing that got messed up due to it.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 15,
        "deletions": 6,
        "changed_files": 4,
        "created_at": "2023-08-13T12:23:38Z",
        "closed_at": "2023-08-13T13:39:26Z",
        "merged_at": "2023-08-13T13:39:26Z",
        "body": "## Description\r\n\r\n**Note:** this is a supplement to https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12519\r\n**Note 2:** Also relies on https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12522 since this functionality was broken by https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/f8ff8c0638997fd0aef217db1505598846f14782.\r\n\r\nAdds `s_noise` param to remaining k-diffusion samplers that should have it. See https://github.com/crowsonkb/k-diffusion/blob/ab527a9a6d347f364e3d185ba6d714e22d80cb3c/k_diffusion/sampling.py for reference.\r\n\r\n~~Temporarily marking as draft because this somehow got removed as part of https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/f8ff8c0638997fd0aef217db1505598846f14782~~ \r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-13T12:08:24Z",
        "closed_at": "2023-08-13T13:40:17Z",
        "merged_at": "2023-08-13T13:40:17Z",
        "body": "## Description\r\n\r\nFixes the description of this setting. It shouldn't really even be called `eta_ancestral` but I guess we must live with that.\r\nCan be seen being used by other samplers here: https://github.com/crowsonkb/k-diffusion/blob/ab527a9a6d347f364e3d185ba6d714e22d80cb3c/k_diffusion/sampling.py#L543\r\n\r\n(linter is complaining about https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/d8419762c1454ba51baa710d9ce8e762efc056ef)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-13T11:58:02Z",
        "closed_at": "2023-08-13T13:39:30Z",
        "merged_at": "2023-08-13T13:39:30Z",
        "body": "## Description\r\n\r\nwake up babe, new sampler just dropped\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-13T11:18:14Z",
        "closed_at": "2023-08-13T18:28:14Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n**Note: making this PR just to bring this to discussion.**\r\n\r\nThis PR adds a form of supporting CLIP skip with SDXL. I added this since scripts like the XYZ plot support changing this and I don't think users should be mislead to believe all the CLIP layers behave the same, but this does have several issues:\r\n\r\n- SDXL/Stability trained with the penultimate clip layer in mind (CLIP skip = 2)\r\n- Most users likely don't know the aforementioned, and the webui defaults to CLIP skip = 1. This would basically cause a lot of users to produce much worse results than the model is capable of.\r\n\t- (the webui forces the penultimate layer currently so for current users reading this there is nothing to worry about)\r\n- This only allows for the last layer or penultimate layer to be used. The return value of `encode_with_transformer` only returns `last`, `penultimate`, and `pooled` (I don't know enough about SDXL's arch to know what this is honestly). The way Stability handles this also implies the last and penultimate are the only layers that should ever be used. https://github.com/Stability-AI/generative-models/blob/45c443b316737a4ab6e40413d7794a7f5657c19f/sgm/modules/encoders/modules.py#L442-L447\r\n\r\nAlso some potentially useful info, courtesy of Anonymous: https://boards.4channel.org/g/thread/95329616#p95329692\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-13T08:43:53Z",
        "closed_at": "2023-08-13T13:45:39Z",
        "merged_at": "2023-08-13T13:45:39Z",
        "body": "## Description\r\n\r\nFollow-up to https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12514, more significant VRAM reduction. For a batch size of 4 with hires fix (512x512 -> 1024x1024) this cut off around 2GB of VRAM for me. For a **single** 512x512 @ hr = 2 image (not part of a batch), it cut off around 750MB, and 512x768 @ hr = 2 a bit over 1GB.\r\nThis was being done [here](https://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/da80d649fd6a6083be02aca5695367bd25abf0d5/modules/processing.py#L1105-L1108) but it can be performed even earlier and should be since decoding the latents is pretty heavy.\r\n\r\n~~I hadn't tested this with SDXL yet, not sure if this causes any issue for the refiner. I'm assuming it doesn't but I haven't taken the time to review how that's implemented yet. Probably will reduce VRAM usage for SDXL in general though too if this works as I expect.~~ Occurred to me this is not related to SDXL code at all, so this doesn't affect it.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-13T08:19:05Z",
        "closed_at": "2023-08-13T13:41:07Z",
        "merged_at": "2023-08-13T13:41:07Z",
        "body": "## Description\r\n\r\nTitle. This makes encoding batches (used during hires fix) more inline with [how decoding currently functions](https://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/da80d649fd6a6083be02aca5695367bd25abf0d5/modules/processing.py#L530). In my tests this reduces peak VRAM usage during the encode phase of hires fix (right before the diffusion process on the larger res begins) for a batch size of 4 (512x512 -> 1024x1024) from a bit over 16GB to just under 8GB (this is also without any optimizations and using `--no-half-vae`). Only utilized if we're infact doing a batch so `stack` and `unsqueeze` aren't used if it's just a single image.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 10,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-13T08:06:59Z",
        "closed_at": "2023-08-13T08:15:22Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nTitle. This makes encoding more inline with [how decoding currently functions](https://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/da80d649fd6a6083be02aca5695367bd25abf0d5/modules/processing.py#L530). In my tests this reduces peak VRAM usage during the encode phase of hires fix (right before the diffusion process on the larger res begins) for a batch size of 4 from a bit over 16GB to just under 8GB. I've enabled this by default since it's such a huge improvement for VRAM and I didn't notice any regression in speed. If there's no issue with this we may just want to remove the option entirely and always use it.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 13,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2023-08-13T06:36:28Z",
        "closed_at": "2023-08-13T13:46:32Z",
        "merged_at": "2023-08-13T13:46:32Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/10613\r\n\r\nSupport searching hashes to be more inline with how the checkpoint page behaves (all other extra networks previously did not add their hash to the search term), and displays the hash in the UI if available.\r\n\r\nUses `item.get` for the hash incase users may be using the LyCORIS extension which doesn't currently add hashes to it's items. https://github.com/KohakuBlueleaf/a1111-sd-webui-lycoris/blob/8e97bf54867c25d00fc480be1ab4dae5399b35ef/ui_extra_networks_lyco.py#L21-L35\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/e65bb96c-110c-4e75-af78-1ef35fb29186)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 35,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2023-08-13T05:31:38Z",
        "closed_at": "2023-08-19T05:41:25Z",
        "merged_at": null,
        "body": "The fix addresses an Error that is thrown when the number of generated images is not a multiple of batch_size.\r\nThe fix addresses this issue by splitting the image generation into two steps:\r\n-First the images are processed in batch_size set by user.\r\n-The remaining images are processed in smaller batch_size.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 32,
        "deletions": 13,
        "changed_files": 2,
        "created_at": "2023-08-13T05:25:41Z",
        "closed_at": "2023-08-19T05:41:19Z",
        "merged_at": null,
        "body": "Prompt matrix feature to only iterate instead of generating all combinations",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 35,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2023-08-13T05:01:33Z",
        "closed_at": "2023-08-13T05:15:15Z",
        "merged_at": null,
        "body": "The error is thrown when prompts submitted are < (n_iter*batch_size)\r\nI have added code to split the action into two steps\r\n-processing in user defined batch_size\r\n-processing remaining prompts in smaller batch",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 35,
        "deletions": 7,
        "changed_files": 1,
        "created_at": "2023-08-13T04:58:05Z",
        "closed_at": "2023-08-13T05:01:16Z",
        "merged_at": null,
        "body": "The error is thrown when prompts submitted are < (n_iter*batch_size)\r\nI have added code to split the action into two steps\r\n-processing in user defined batch_size\r\n-processing remaining prompts in smaller batch",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 104,
        "deletions": 11,
        "changed_files": 4,
        "created_at": "2023-08-13T03:57:16Z",
        "closed_at": "2023-08-13T05:28:48Z",
        "merged_at": "2023-08-13T05:28:48Z",
        "body": "## Description\r\n\r\nSince LyCORIS have added \"train norm module\" options and some trainer also support that.\r\nI add \"norm module\" into lora ext.\r\n\r\nSince the author of [HCP-Diffusion](https://github.com/7eu7d7/HCP-Diffusion) claims that bias also have siginificant effect on style when training norm layer, I also add \"bias support\" for network modules in lora ext. (May not be best practice, need review)\r\n\r\nSince the \"bias\" in network module is actually for \"bias directly add into updown), I use \"ex_bias\" here to refer to the \"bias\" in the module(LayerNorm/GroupNorm, or Linear/Conv2d, I have plan to support \"train bias\" in LyCORIS)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 21,
        "deletions": 14,
        "changed_files": 4,
        "created_at": "2023-08-12T20:10:42Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\n* Fix some problem while using extra-network.\r\n* Fix the problem when the lora:: is the first word, cardClicked() can't delete it.\r\n* Add ability which can clean the chaotic and extra separator automatically.\r\n* Something like trim and strip.\r\n\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 16,
        "deletions": 9,
        "changed_files": 1,
        "created_at": "2023-08-12T19:20:51Z",
        "closed_at": "2023-08-12T20:07:21Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* Fix some problem while using extra-network.\r\n* Fix the problem when the <lora::> is the first word, cardClicked() can't delete it.\r\n* Add ability which can clean the chaotic and extra separator automatically.\r\n* Something like trim and strip.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 78,
        "deletions": 46,
        "changed_files": 1,
        "created_at": "2023-08-12T14:48:26Z",
        "closed_at": "2023-08-13T05:25:15Z",
        "merged_at": "2023-08-13T05:25:15Z",
        "body": "## Description\r\ndue to popular demand I implemented a toggle for CSV mode for XYZ grid\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/10380\r\n\r\nDropdown and CSV mode can be toggled by a checkbox\r\n\r\nalso did some code formatting cleanup\r\n## Screenshots/videos:\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/f9d356c6-c690-48bc-bd8a-df37dfca5521\r\n\r\nupdate\r\ncheckbox renamed\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/8206131d-4adb-4fd4-ae1b-3fb5868a10b4)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-12T03:08:35Z",
        "closed_at": "2023-08-12T05:57:35Z",
        "merged_at": "2023-08-12T05:57:35Z",
        "body": "## Description\r\nI forgot to also disable the installer extension installer using args\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12294#issuecomment-1675628445\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-11T16:24:05Z",
        "closed_at": "2023-08-12T06:12:30Z",
        "merged_at": "2023-08-12T06:12:30Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/7021, https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/7560, https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/9499\r\n\r\nCaused by `blendLayers` returning an RGBA image, specifically a regression of [this commit](https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/2e8b5418e3cd4e9212f2fcdb36305d7a40f97916) back in December. Since we don't override the opacity via that function (default being `1`) it's safe to convert this back to RGB.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 31,
        "deletions": 32,
        "changed_files": 1,
        "created_at": "2023-08-11T15:32:57Z",
        "closed_at": "2023-08-12T05:58:14Z",
        "merged_at": "2023-08-12T05:58:14Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/6662, https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/7517, https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/7890\r\n\r\nImages were previously all loaded at once which we don't need to do. This closes the image handler after each iteration and only fetches the next one as needed.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-11T12:22:30Z",
        "closed_at": "2023-08-15T05:26:38Z",
        "merged_at": "2023-08-15T05:26:38Z",
        "body": "## Description\r\n\r\nAdd Refiner Checkpoint and Refiner Switch At in XYZ scripts.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-08-11T07:42:02Z",
        "closed_at": "2023-08-11T12:03:19Z",
        "merged_at": "2023-08-11T12:03:19Z",
        "body": "I don't exactly know why GitHub allows me to do this, but I'm opening this PR on @Splendide-Imaginarius's behalf now since it's a pretty intrusive issue.\r\n\r\nThis fixes an issue where the `mask_blur` property isn't set in img2img, which has caused problems for Ultimate Upscale and ControlNet, both for a few months now. It was a regression introduced by https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/10295.\r\nhttps://github.com/Coyote-A/ultimate-upscale-for-automatic1111/issues/111\r\nhttps://github.com/Mikubill/sd-webui-controlnet/discussions/1888\r\nhttps://github.com/Mikubill/sd-webui-controlnet/pull/1907\r\n\r\nAlso makes the sigma values match closer to the old behavior of using PIL's `GaussianBlur` to reduce seams. \r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-11T03:44:30Z",
        "closed_at": "2023-08-11T04:53:13Z",
        "merged_at": "2023-08-11T04:53:13Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12104\r\n\r\nFixes a regression introduced by https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/b75b004fe62826455f1aa77e849e7da13902cb17 as part of the extra networks rework (https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/11821). As far as I can tell this was just an oversight during refactoring. This fixes the `RuntimeError` and produces an image identical to one before this regression.\r\n\r\nNote that this function is only ever used when the option is enabled, so it doesn't affect the \"new normal\" for LoRA operation.\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/68f336bd994bed5442ad95bad6b6ad5564a5409a/extensions-builtin/Lora/networks.py#L323-L327\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 7,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-11T03:31:32Z",
        "closed_at": "2023-08-11T03:34:20Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12104\r\n\r\nFixes a regression introduced by https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/b75b004fe62826455f1aa77e849e7da13902cb17 as part of the extra networks rework (https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/11821). I honestly don't understand why this works, as to me it looks identical to this code below, but it does in fact fix the RuntimeError and produce an image that is identical to one before this regression.\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/68f336bd994bed5442ad95bad6b6ad5564a5409a/extensions-builtin/Lora/network_lora.py#L80-L84\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-10T20:05:26Z",
        "closed_at": "2023-08-11T04:55:42Z",
        "merged_at": "2023-08-11T04:55:42Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12462\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 26,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-10T15:28:19Z",
        "closed_at": "2023-08-11T04:56:31Z",
        "merged_at": "2023-08-11T04:56:31Z",
        "body": "## Description\r\n\r\nThanks, @catboxanon, for testing and bugs detection.\r\nI fixed some bugs that could have happened. [more info here](https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12435#issuecomment-1672717222)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 42,
        "deletions": 16,
        "changed_files": 3,
        "created_at": "2023-08-10T15:13:46Z",
        "closed_at": "2023-08-24T06:41:16Z",
        "merged_at": "2023-08-24T06:41:16Z",
        "body": "## Description\r\n\r\n* allows a single prompt to be used to express different prompt editing behaviors for the first SD pass and for the hi-res pass\r\n  * for relative times, the first pass is 0.0-1.0 (as before), the hires-fix uses 1.0-2.0.\r\n  * for absolute times, the first pass is 1..steps, the second pass begins at steps and goes hires steps further, e.g. 40 regular steps and 20 hires steps, the timeline ranges are 0..40 and 40..60.\r\n  * the syntax for prompt editing times is different, although 99% of the time the end result should be unchanged\r\n    * if the number has a decimal point, it's relative; if it has no decimal point, it's absolute\r\n    * main observable difference is that `[foo:1]` means the same thing, but the meaning of `[foo:1.0]` has changed from absolute (the same as `[foo:1]`) to relative (about the same as `[foo:0.999999]`)\r\n* code changes\r\n  * capture the number of first-pass steps for use in hires pass\r\n  * hires pass passes both first-pass steps and hires-steps through to `prompt_parser.py`\r\n  * scheduled visitor chooses abs/relative differently\r\n  * scheduled visitor computes hires pass times by offsetting by the first pass end times\r\n  * plumb everything through\r\n  * add back-compatibliity option\r\n* issues:\r\n  * addresses #9281\r\n  * supersedes #12350,\r\n\r\n## Screenshots/videos:\r\n\r\ntodo\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-10T14:44:56Z",
        "closed_at": "2023-08-10T14:55:32Z",
        "merged_at": "2023-08-10T14:55:32Z",
        "body": "## Description\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12453\r\nuse default value as opposed -1\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-08-10T14:23:00Z",
        "closed_at": "2023-08-10T14:28:29Z",
        "merged_at": "2023-08-10T14:28:29Z",
        "body": "## Description\r\n\r\n* Disable the autofix on `git fetch` phase, as it usually won't help\r\n* Fix that error is somehow omitted if autofix=False\r\n* Cleanup the directory if there is an exception on `git clone` phase.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-10T13:45:52Z",
        "closed_at": "2023-08-10T13:46:41Z",
        "merged_at": "2023-08-10T13:46:40Z",
        "body": "## Description\r\nit's a value can't be converted to a float it will throw an error\r\nlike when the value is a blank string\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-10T12:47:21Z",
        "closed_at": "2023-08-10T13:43:28Z",
        "merged_at": "2023-08-10T13:43:28Z",
        "body": "## Description\r\n```py\r\nstable-diffusion-webui\\modules\\ui.py:631: GradioDeprecationWarning: The `style` method is deprecated. Please set these arguments in the constructor instead.\r\n  with gr.Tab(\"Generation\", id=\"img2img_generation\") as img2img_generation_tab, FormRow().style(equal_height=False):\r\n```\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-10T10:21:37Z",
        "closed_at": "2023-08-10T13:45:45Z",
        "merged_at": "2023-08-10T13:45:45Z",
        "body": "## Description\r\n\r\nTitle. I find this helpful for debugging and so I don't accidentally corrupt my own cache file.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-10T09:52:45Z",
        "closed_at": "2023-08-10T10:15:48Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nAllows adding any arbitrary option to infotext. Closes a bunch of feature requests.\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/4969\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/6031\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/8345\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/9562\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/10599\r\n\r\nWe may want to prefix the settings keys or put it all under a JSON-encoded string instead, but this at least gets that discussion going.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-10T09:06:27Z",
        "closed_at": "2023-08-10T13:46:08Z",
        "merged_at": "2023-08-10T13:46:08Z",
        "body": "## Description\r\nsave extra networks metadata with indent 4\r\nbecause I don't have automatic parser in my head\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-10T09:02:40Z",
        "closed_at": "2023-08-10T09:14:16Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/8113 https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/9374\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-08-09T18:43:24Z",
        "closed_at": "2023-08-10T03:39:38Z",
        "merged_at": "2023-08-10T03:39:38Z",
        "body": "## Description\r\n\r\nFollow-up to my own PR https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/10943. I somehow didn't realize this character exists, let alone in the UI already.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-09T18:27:02Z",
        "closed_at": "2023-08-10T03:37:45Z",
        "merged_at": "2023-08-10T03:37:45Z",
        "body": "## Description\r\n\r\nFollow-up to https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12426. Fixes extension compatbility with [sd-webui-llul](https://github.com/hnmr293/sd-webui-llul)\r\n\r\nhttps://github.com/hnmr293/sd-webui-llul/blob/aa47b3eeb45c53f0d6ccaae59abf36e8ed6731f5/scripts/llul_hooker.py#L10\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-09T16:18:42Z",
        "closed_at": "2023-08-09T17:03:56Z",
        "merged_at": "2023-08-09T17:03:56Z",
        "body": "## Description\r\n\r\nFixes regression introduced by https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/a2a97e57f069d24c9616d1867a6df7f532f92a04\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-08-09T16:04:04Z",
        "closed_at": "2023-08-09T17:04:44Z",
        "merged_at": "2023-08-09T17:04:44Z",
        "body": "## Description\r\n\r\nAfter receiving feedback from users of the extension, I made a fix that completely fixes possible problems with this setting.\r\n\r\nThe problem was that there were no proper checks and the picture was blinking.\r\n\r\nI fixed that, and now it checks for a scroll bar, if there is one, the image will expand.\r\n\r\n## Screenshots/videos:\r\n\r\n<details><summary>Before</summary>\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/25cdb9bc-20bf-48a2-bdcf-bcc30585bfbb\r\n\r\n</details>\r\n<details><summary>After</summary>\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/a7c62be4-1739-4e1b-81d2-ce0cb9dacdac\r\n\r\n</details>\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 1062,
        "deletions": 989,
        "changed_files": 24,
        "created_at": "2023-08-09T07:30:24Z",
        "closed_at": "2023-08-09T11:40:06Z",
        "merged_at": "2023-08-09T11:40:06Z",
        "body": "## Description\r\n\r\n* two goals\r\n  * remove an exceedingly large amount of functionality in a single file\r\n  * resolve errors related to circular imports when modules needed by shared import shared\r\n* lots of changes\r\n* hopefully all fields of the old shared.py are still in there and no extensions break -- if some do, I will add compatibility updates here\r\n* one possible problem is that if a script imports shared in preload.py -- which it should not do -- it will see empty values instead of what should be there after initialization; this likely will not be fixed\r\n\r\n\r\n# Please help me test this by seeing if any extensions break\r\n* please report if an extension works on dev branch and is broken on this one\r\n* if a script is broken on both dev and this branch then the problem is not caused by the rework and i will not fix it in this branch",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-09T04:46:49Z",
        "closed_at": "2023-08-09T11:41:30Z",
        "merged_at": "2023-08-09T11:41:30Z",
        "body": "## Description\r\non initial creation of the new metadata.json\r\ninherits the old description.txt\r\n\r\nthis way if someone already has the description in the old format it will not be created blank and overwritten by the new json metadata\r\n\r\nease the transition between old and new metadata system\r\n\r\ntest / scenario\r\n\r\nhave some extra network, beside the fireplace if I was the same name but.txt\r\nin the text file enter some description and it will show up in the extra networks tab\r\n\r\ncurrently now if you press the metadata button and edit and save it\r\nthis will create a new Json file without but the old description\r\nyou will see that the card will no longer have the description\r\n\r\nafter this PR\r\nwhen did Json file is created for the first time\r\nit will inherit whatever it is in the current description.txt\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-09T00:55:39Z",
        "closed_at": "2023-08-09T04:00:48Z",
        "merged_at": "2023-08-09T04:00:48Z",
        "body": "## Description\r\n\r\nCloses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12420\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 13,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-08-08T19:27:59Z",
        "closed_at": "2023-08-09T06:41:35Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* v1.5.1 fail to perform the prompt editing feature:\r\n  * certain errors occurred in console\r\n  * webui failed to generate images for the prompts using prompt editing feature\r\n  * the testing (test_txt2img_with_complex_prompt_performed) failed under v1.5.1 \r\n* a summary of changes in code\r\n  * improve prompt_parser.py to handle different kinds of input prompt using prompt editing feature, esp, handle the case of there are whitespaces or no whitespaces around the step number\r\n  * improve test_txt2img.py & doctest in prompt_parser.py to cover more edge cases for testing input prompts using prompt editing feature\r\n* prompt editing feature should be more robust handling different prompt editing inputs\r\n\r\n## How to reproduce this error\r\n\r\n* simply run tests, v1.5.1 will fail with test_txt2img_with_complex_prompt_performed\r\n* or simply type [from:to:0.5] in prompt, and click generate button, image will not be generated as expected, instead error occurs\r\n* it seems work fine on some environment, but failed on others including mine\r\n```\r\n    Traceback (most recent call last):\r\n      File \"D:\\app2\\stable-diffusion-webui\\venv\\lib\\site-packages\\lark\\visitors.py\", line 93, in _call_userfunc\r\n        return f(children)\r\n      File \"D:\\app2\\stable-diffusion-webui\\modules\\prompt_parser.py\", line 89, in start\r\n        return ''.join(flatten(args))\r\n      File \"D:\\app2\\stable-diffusion-webui\\modules\\prompt_parser.py\", line 88, in flatten\r\n        yield from flatten(gen)\r\n      File \"D:\\app2\\stable-diffusion-webui\\modules\\prompt_parser.py\", line 88, in flatten\r\n        yield from flatten(gen)\r\n      File \"D:\\app2\\stable-diffusion-webui\\modules\\prompt_parser.py\", line 87, in flatten\r\n        for gen in x:\r\n      File \"D:\\app2\\stable-diffusion-webui\\modules\\prompt_parser.py\", line 78, in scheduled\r\n        before, after, _, when = args\r\n    ValueError: not enough values to unpack (expected 4, got 3)\r\n```\r\n```\r\n_____________________________________ test_txt2img_with_complex_prompt_performed ______________________________________\r\n\r\nurl_txt2img = 'http://127.0.0.1:7860/sdapi/v1/txt2img'\r\nsimple_txt2img_request = {'batch_size': 1, 'cfg_scale': 7, 'denoising_strength': 0, 'enable_hr': False, ...}\r\n\r\n    def test_txt2img_with_complex_prompt_performed(url_txt2img, simple_txt2img_request):\r\n        simple_txt2img_request[\"prompt\"] = \"((emphasis)), (emphasis1:1.1), [to:1], [from::2], [from:to:0.3], [alt|alt1]\"\r\n>       assert requests.post(url_txt2img, json=simple_txt2img_request).status_code == 200\r\nE       AssertionError: assert 500 == 200\r\nE        +  where 500 = <Response [500]>.status_code\r\nE        +    where <Response [500]> = <function post at 0x0000018A1F03C3A0>('http://127.0.0.1:7860/sdapi/v1/txt2img', json={'batch_size': 1, 'cfg_scale': 7, 'denoising_strength': 0, 'enable_hr': False, ...})\r\nE        +      where <function post at 0x0000018A1F03C3A0> = requests.post\r\n\r\ntest_txt2img.py:54: AssertionError\r\n```\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 29,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-08T18:53:30Z",
        "closed_at": "2023-08-09T04:03:31Z",
        "merged_at": "2023-08-09T04:03:31Z",
        "body": "## Description\r\n\r\nAn option in the built-in expansion settings that allow you to automatically expand long images that do not fit in the canvas area\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/e52f5ba2-040e-432b-9ff4-a6f2845b4c23)\r\n\r\n\r\n<details><summary>Before</summary>\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/7e545301-4388-4803-8118-412fa4313a0e\r\n\r\n</details>\r\n<details><summary>After</summary>\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/22278673/e3a9036e-fc55-4504-bdb1-3ac7e63d28eb\r\n\r\n</details>\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-08-08T17:09:53Z",
        "closed_at": "2023-08-08T20:30:57Z",
        "merged_at": "2023-08-08T20:30:57Z",
        "body": "## Description\r\n\r\n* just fixes a typo\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 131,
        "deletions": 213,
        "changed_files": 6,
        "created_at": "2023-08-08T15:17:50Z",
        "closed_at": "2023-08-08T15:17:55Z",
        "merged_at": null,
        "body": "temp PR for comparing branch changes",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 226,
        "deletions": 218,
        "changed_files": 9,
        "created_at": "2023-08-08T15:11:28Z",
        "closed_at": "2023-08-08T15:11:33Z",
        "merged_at": null,
        "body": null,
        "comments": 0
    },
    {
        "merged": false,
        "additions": 16,
        "deletions": 18,
        "changed_files": 4,
        "created_at": "2023-08-08T04:19:14Z",
        "closed_at": "2023-08-11T11:09:26Z",
        "merged_at": null,
        "body": "## Description\r\nUse error code 1111 to trigger restart\r\n\r\nwriting a file to be detected as a trigger restart works but is there a reason why we don't use error code?\r\n\r\nonly tested using with windwos webui.bat\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-08T02:18:25Z",
        "closed_at": "2023-08-09T11:20:12Z",
        "merged_at": "2023-08-09T11:20:12Z",
        "body": "## Description\r\n\r\n* Fix mismatch between shared.sd_model and shard.opts causing runtime error after switching models.\r\n* Added processing to update shared.opts after model_data.set_sd_model function call.\r\n* This problem occurs when `Maximum number of checkpoints loaded at the same time` setting is greater than or equal to 2.\r\n\r\n## How to reproduce this bug\r\n\r\nThe mismatch arises when calling the `reload_model_weights` function internally.\r\n\r\n1. When calling `reload_model_weights(info=A_info)`, A_info is loaded and both `shared.sd_model` and `shared.opts` are updated (Note that A_info and B_info are models with different `checkpoint_config`).\r\n2. Calling `reload_model_weights(info=B_info)` next, B_info is loaded, and again, `shared.sd_model` and `shared.opts` are updated.\r\n3. When `reload_model_weights(info=A_info)` is called again, A_info is reused and only `shared.sd_model` is updated. At this point, `shared.opts` remains B_info.\r\n\r\nAfter this process, when calling processing.process_images, even though I want to use the A_info model, it unintentionally switches to the B_info model instead.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-07T19:45:26Z",
        "closed_at": "2023-08-09T11:25:50Z",
        "merged_at": "2023-08-09T11:25:50Z",
        "body": "See https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/11642#issuecomment-1643298659\r\n\r\nThis resolves a crashing bug for me on Python 3.10 and it appears to do so as well for others.\r\n\r\n## Before\r\n\r\n```\r\nPython 3.10.11 (main, Apr 20 2023, 19:02:41) [GCC 11.2.0]\r\nVersion: v1.5.1\r\nCommit hash: 68f336bd994bed5442ad95bad6b6ad5564a5409a\r\nLaunching Web UI with arguments:\r\nno module 'xformers'. Processing without...\r\nno module 'xformers'. Processing without...\r\nNo module 'xformers'. Proceeding without it.\r\nLoading weights [6ce0161689] from /workspace/sd/models/Stable-diffusion/v1-5-pruned-emaonly.safetensors\r\nTraceback (most recent call last):\r\n  File \"/workspace/sd/launch.py\", line 39, in <module>\r\n    main()\r\n  File \"/workspace/sd/launch.py\", line 35, in main\r\n    start()\r\n  File \"/workspace/sd/modules/launch_utils.py\", line 394, in start\r\n    webui.webui()\r\n  File \"/workspace/sd/webui.py\", line 393, in webui\r\n    shared.demo = modules.ui.create_ui()\r\n  File \"/workspace/sd/modules/ui.py\", line 504, in create_ui\r\n    modules.scripts.scripts_txt2img.setup_ui_for_section(category)\r\n  File \"/workspace/sd/modules/scripts.py\", line 433, in setup_ui_for_section\r\n    self.create_script_ui(script)\r\n  File \"/workspace/sd/modules/scripts.py\", line 383, in create_script_ui\r\n    import modules.api.models as api_models\r\n  File \"/workspace/sd/modules/api/models.py\", line 112, in <module>\r\n    ).generate_model()\r\n  File \"/workspace/sd/modules/api/models.py\", line 97, in generate_model\r\n    DynamicModel.__config__.allow_population_by_field_name = True\r\n  File \"/root/env/lib/python3.10/site-packages/pydantic/_internal/_model_construction.py\", line 205, in __getattr__\r\n    raise AttributeError(item)\r\nAttributeError: __config__\r\nCreating model from config: /workspace/sd/configs/v1-inference.yaml\r\nLatentDiffusion: Running in eps-prediction mode\r\nDiffusionWrapper has 859.52 M params.\r\nApplying attention optimization: Doggettx... done.\r\nModel loaded in 2.6s (load weights from disk: 0.3s, create model: 0.6s, apply weights to model: 0.6s, apply half(): 0.7s, move model to device: 0.3s).\r\n```\r\n\r\n### After\r\n\r\n```\r\nPython 3.10.11 (main, Apr 20 2023, 19:02:41) [GCC 11.2.0]\r\nVersion: v1.5.1\r\nCommit hash: 68f336bd994bed5442ad95bad6b6ad5564a5409a\r\nLaunching Web UI with arguments:\r\nno module 'xformers'. Processing without...\r\nno module 'xformers'. Processing without...\r\nNo module 'xformers'. Proceeding without it.\r\nLoading weights [6ce0161689] from /workspace/sd/models/Stable-diffusion/v1-5-pruned-emaonly.safetensors\r\nRunning on local URL:  http://127.0.0.1:7860\r\n\r\nTo create a public link, set `share=True` in `launch()`.\r\nStartup time: 8.5s (launcher: 2.0s, import torch: 2.8s, import gradio: 0.8s, setup paths: 0.8s, other imports: 0.6s, load scripts: 0.5s, create ui: 0.6s, gradio launch: 0.2s).\r\nCreating model from config: /workspace/sd/configs/v1-inference.yaml\r\nLatentDiffusion: Running in eps-prediction mode\r\nDiffusionWrapper has 859.52 M params.\r\nApplying attention optimization: Doggettx... done.\r\nModel loaded in 3.1s (load weights from disk: 1.0s, create model: 0.5s, apply weights to model: 0.5s, apply half(): 0.7s, move model to device: 0.3s).\r\n```\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-08-07T19:15:02Z",
        "closed_at": "2023-08-08T21:57:36Z",
        "merged_at": null,
        "body": "Given this environment: \r\n- Python 3.10.11 (main, Apr 20 2023, 19:02:41) [GCC 11.2.0]\r\n- stable-diffusion-webui: v1.5.1\r\n\r\nThe imports prior to the changes in this PR results in this error:\r\n> ModuleNotFoundError: No module named 'pytorch_lightning.utilities.distributed'\r\n\r\nFull stack trace: \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/workspace/sd/launch.py\", line 39, in <module>\r\n    main()\r\n  File \"/workspace/sd/launch.py\", line 35, in main\r\n    start()\r\n  File \"/workspace/sd/modules/launch_utils.py\", line 390, in start\r\n    import webui\r\n  File \"/workspace/sd/webui.py\", line 54, in <module>\r\n    from modules.call_queue import wrap_gradio_gpu_call, wrap_queued_call, queue_lock  # noqa: F401\r\n  File \"/workspace/sd/modules/call_queue.py\", line 6, in <module>\r\n    from modules import shared, progress, errors\r\n  File \"/workspace/sd/modules/shared.py\", line 21, in <module>\r\n    from ldm.models.diffusion.ddpm import LatentDiffusion\r\n  File \"/workspace/sd/repositories/stable-diffusion-stability-ai/ldm/models/diffusion/ddpm.py\", line 20, in <module>\r\n    from pytorch_lightning.utilities.distributed import rank_zero_only\r\nModuleNotFoundError: No module named 'pytorch_lightning.utilities.distributed'\r\n```\r\n\r\nThis addresses #11458 which documents the bug but no fix was made to the repo itself (yet).\r\n\r\nI'm not sure it's a safe change but it never hurts to ask. For instance I don't know if this is a backward-compatible change.\r\n\r\n## Importantly this does not resolve the issue fully\r\n\r\nEven after this change, a crash occurs due to: \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/workspace/sd/launch.py\", line 39, in <module>\r\n    main()\r\n  File \"/workspace/sd/launch.py\", line 35, in main\r\n    start()\r\n  File \"/workspace/sd/modules/launch_utils.py\", line 390, in start\r\n    import webui\r\n  File \"/workspace/sd/webui.py\", line 54, in <module>\r\n    from modules.call_queue import wrap_gradio_gpu_call, wrap_queued_call, queue_lock  # noqa: F401\r\n  File \"/workspace/sd/modules/call_queue.py\", line 6, in <module>\r\n    from modules import shared, progress, errors\r\n  File \"/workspace/sd/modules/shared.py\", line 21, in <module>\r\n    from ldm.models.diffusion.ddpm import LatentDiffusion\r\n  File \"/workspace/sd/repositories/stable-diffusion-stability-ai/ldm/models/diffusion/ddpm.py\", line 20, in <module>\r\n    from pytorch_lightning.utilities.distributed import rank_zero_only\r\nModuleNotFoundError: No module named 'pytorch_lightning.utilities.distributed'\r\n```\r\n\r\nAFAIK that's a downloaded file, so perhaps the version of `stable-diffusion-stability-ai` needs to be updated? Not sure.\r\n\r\nIt looks like the current (as of today [culprit code in the stablediffusion repository](https://github.com/Stability-AI/stablediffusion/blob/cf1d67a6fd5ea1aa600c4df58e5b47da45f6bdbf/ldm/models/diffusion/ddpm.py#L20) still uses this outdated namespace as well.\r\n\r\nManually editing this code to also use `rank_only` in the import namespace manages to get the boot process to the next stage: \r\n\r\n```\r\nDownloading: \"https://huggingface.co/runwayml/stable-diffusion-v1-5/resolve/main/v1-5-pruned-emaonly.safetensors\" to /workspace/sd/models/Stable-diffusion/v1-5-pruned-emaonly.safetensors\r\n\r\n 22%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\r\n```\r\n\r\nIt's likely this PR might need to wait for a while and a better temporary solution would be to pin down the pytorch-lightning dependency to an earlier version that still offers `distributed` in the import namespace. Since [pytorch-lightning 2.0.0](https://github.com/Lightning-AI/lightning/releases)(which gets installed with the existing requirements.txt) is major version bump I'm guessing 1.9.x could be safe? ",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-07T10:15:50Z",
        "closed_at": "2023-08-07T10:36:26Z",
        "merged_at": "2023-08-07T10:36:26Z",
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, #7984 \r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-07T05:46:37Z",
        "closed_at": "2023-08-07T06:43:59Z",
        "merged_at": "2023-08-07T06:43:59Z",
        "body": "## Description\r\n\r\nTitle. I assume this just simply got missed as part of https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/362789a3793025c698fa42372fd66c3c4f2d6413.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-06T20:17:10Z",
        "closed_at": "2023-08-07T14:48:14Z",
        "merged_at": "2023-08-07T14:48:14Z",
        "body": "## Description\r\n\r\nBasically, as a shortcut for context-menu -> Open Image in New Tab.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 107,
        "deletions": 16,
        "changed_files": 6,
        "created_at": "2023-08-06T19:15:11Z",
        "closed_at": "2023-08-10T14:05:26Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* two settings on Stable Diffusion page: `Refiner checkpoint` and `Refiner switch at`.\r\n* first lets you select a model.\r\n* second lets you select a ratio.\r\n* Runs two rounds of sampling: one for `Refiner switch at` * `total steps` steps, then switches model to `Refiner checkpoint`, and then finishes sampling in img2img mode, using remaining number of steps and denoising strength equal to `1` - `Refiner switch at`.\r\n  * for example, with 20 steps and `Refiner switch at` = 0.25, the first sampling will go for 5 steps and the second - for 15.\r\n* switch back to original checkpoint happens after you start generating the next picture (subject to change?)\r\n* tested with SD1.\r\n* tested with SDXL.\r\n* possible to cross-refine SD1 and SD2.\r\n* works with kdiffusion samplers.\r\n* does not work with DDIM (and compvis samplers still don't work with SDXL). \r\n* works with img2img\r\n* does not work with hires fix (not sure whether the support should be added)\r\n* not tested with medvram/lowvram\r\n* infotext support\r\n* in future i plan to integrate this in a nice way into main UI, for now you just gotta put it into quicksettings bar\r\n* other PR: https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12371\r\n\r\n![00420-1](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/20920490/4285d010-845c-4540-878f-f87c31702a69)\r\n",
        "comments": 20
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 6,
        "changed_files": 1,
        "created_at": "2023-08-06T16:32:21Z",
        "closed_at": "2023-08-07T05:20:06Z",
        "merged_at": "2023-08-07T05:20:06Z",
        "body": "## Description\r\n\r\nA couple wording tweaks, adds parameter info, and changes some default value ranges to what Hugging Face recommends. https://huggingface.co/docs/diffusers/v0.19.3/en/api/schedulers/stochastic_karras_ve#diffusers.KarrasVeScheduler\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 0,
        "created_at": "2023-08-06T14:11:22Z",
        "closed_at": "2023-08-06T17:30:59Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 131,
        "deletions": 28,
        "changed_files": 8,
        "created_at": "2023-08-06T14:08:38Z",
        "closed_at": "2023-08-10T14:05:33Z",
        "merged_at": "2023-08-10T14:05:33Z",
        "body": "## Description\r\n\r\n* two settings on Stable Diffusion page: `Refiner checkpoint` and `Refiner switch at`.\r\n* first lets you select a model.\r\n* second lets you select a ratio.\r\n* during sampling, when the number of steps goes above the amount specified by `Refiner switch at` setting, webui switches to a different model (`Refiner checkpoint`).\r\n  * for example, if sampling with 20 steps and `Refiner switch at` = 0.25, the switch will happen after 5 sampling steps.\r\n* switch back to original checkpoint happens after you start generating the next picture (subject to change?)\r\n* tested with SD1.\r\n* tested with SDXL.\r\n* refining SD1 with SDXL or refining SDXL with SD1 with the way it's implemented is **not a thing**.\r\n* works with kdiffusion samplers.\r\n* works with compvis samplers! DDIM, PLMS, UniPC work.\r\n* not tested with medvram/lowvram\r\n* infotext support\r\n* in future i plan to integrate this in a nice way into main UI, for now you just gotta put it into quicksettings bar\r\n* other PR: #12377\r\n\r\n![firefox_dU7c2qS6mZ](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/20920490/939a1871-a98d-42b1-a47d-f6d3d28aaaa5)\r\n\r\n![00402-1](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/20920490/e9892a60-9b23-4785-a12b-db3528cb644c)\r\n",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-06T12:26:18Z",
        "closed_at": "2023-08-06T14:52:28Z",
        "merged_at": "2023-08-06T14:52:28Z",
        "body": "## Description\r\n\r\nPython 10.x does lack the \"image/webp\" mime-type, so opening those files directly in the browser does yield to render them as text/plain\r\n\r\nPython 11.x does support it, so these changes will need to go away whenever the version being used here is upgraded.\r\n\r\nSee: https://github.com/python/cpython/issues/83083\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-06T09:02:41Z",
        "closed_at": "2023-08-06T10:35:08Z",
        "merged_at": null,
        "body": "## Description\r\nin your rework [`d86d12e`](https://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/d86d12e9117772f041682124badc7baac7c57911#diff-15faa364afc7fd40ccc1e6a38893b2dac62c846715710dfbe44f25fb65205440L388-R388) you flip the logic / wording but didn't flip the value\r\nto preserve old behavior by default which is `save` then that should be `True`\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-06T05:45:26Z",
        "closed_at": "2023-08-06T07:18:24Z",
        "merged_at": null,
        "body": "Add type check for params.positional[2]\r\n\r\n## Description\r\n\r\n* A simple fix for compatibility with loRA block weight extension, which use params.positional[2] in string.\r\n* Prevent doing float(params.positional[2]) without checking the type of params.positional[2] (if its str).\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)",
        "comments": 6
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-06T05:34:28Z",
        "closed_at": "2023-08-06T05:43:58Z",
        "merged_at": null,
        "body": "Add type check for params.positional[2]\r\n\r\n## Description\r\n\r\n* A simple fix for compatibility with loRA block weight extension, which use params.positional[2] in string.\r\n* Prevent doing float(params.positional[2]) without checking the type of params.positional[2] (if its str).\r\n\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 37,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-06T02:39:18Z",
        "closed_at": "2023-08-06T03:56:07Z",
        "merged_at": "2023-08-06T03:56:07Z",
        "body": "## Description\r\n\r\nPut these in the infotext now that they actually all work. :^)\r\n\r\nRelated:\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12354\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12356\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12357\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-08-06T01:43:46Z",
        "closed_at": "2023-08-06T02:55:20Z",
        "merged_at": "2023-08-06T02:55:20Z",
        "body": "## Description\r\n\r\nTitle. [It looks like Stability maxes this out at `999`](https://github.com/Stability-AI/generative-models/blob/45c443b316737a4ab6e40413d7794a7f5657c19f/sgm/inference/api.py#L76) so I'm using that for the max value. [This was also already configurable in the XYZ plot](https://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/68f336bd994bed5442ad95bad6b6ad5564a5409a/scripts/xyz_grid.py#L230C59-L230C59) so might as well keep things consistent in availability.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-06T01:30:26Z",
        "closed_at": "2023-08-06T02:56:05Z",
        "merged_at": "2023-08-06T02:56:05Z",
        "body": "## Description\r\n\r\nAddresses https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/8501#issuecomment-1468424851\r\n\r\nI'm honestly not too familiar with this parameter but it does in fact vary results much more when bumping up the max value of this. The previous max value of `1` did basically nothing.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-06T01:26:52Z",
        "closed_at": "2023-08-06T03:37:49Z",
        "merged_at": "2023-08-06T03:37:49Z",
        "body": "## Description\r\nCreate a cache for Gradio theme so that it doesn't have to download it every time\r\nand it allows the theme to be loaded when offline\r\nthis is implemented by using a decorator on `gr.themes.ThemeClass.from_hub`\r\n\r\nthe downside of this is that the theme will not be updated automatically when the author updates the theme\r\nso I added an option to re-download if one want\r\n![2023-08-06 10_26_20_219 chrome](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/9e995017-d99a-4dbd-84fe-e4edc0487edf)\r\n\r\n\r\ncache is store under `tmp/gradio_themes/<authro>_<theme>.json` \r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 8
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-06T01:19:20Z",
        "closed_at": "2023-08-06T03:26:57Z",
        "merged_at": "2023-08-06T03:26:57Z",
        "body": "## Description\r\n\r\nCloses #8501\r\n\r\nThis fixes a regression introduced all the way back in October by https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/3040 where `s_noise` was set to `1` in the function definition, so the option in settings was no longer read. Because the value could be anything inclusive between `0` and `1` it should just read from the options directly.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-05T18:08:57Z",
        "closed_at": "2023-08-06T03:05:28Z",
        "merged_at": "2023-08-06T03:05:28Z",
        "body": "Correct install instructions on linux and provide additional required apt packages Fixes #12351\r\n\r\n## Description\r\n\r\n* Fixing install instructions for Ubuntu\r\n\r\n## Screenshots/videos:\r\n\r\nN/A\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 17,
        "deletions": 14,
        "changed_files": 3,
        "created_at": "2023-08-05T17:40:39Z",
        "closed_at": "2023-08-10T15:14:24Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n**The UI option for this is not in the right place, please tell me where to put it.**\r\n\r\n* when using prompt editing, sometimes you don't want the hires fix to apply the full prompt editing schedule, you just want to continue refining the final result using the final editing state of the prompt\r\n  * for example, if your prompt is `[something that sets up the composition:something that produces the real result:0.35]`, then during the hires fix pass, you really only want the hires fix to use `something that produces the real result`, you don't want it to go back temporarily and apply `something that sets up the composition` for a while\r\n  * while you can use separate hires prompt to achieve this, that doesn't work if you're using something like Dynamic Prompts or Wildcards to create prompts dynamically; those extensions would need to provide some mechanism to generate a special hires prompt, and it would be pretty tedious, whereas doing it here handles anything which modifies the prompt, whether it's an extension or a script like xyz-grid prompt SR. Even without using extensions and scripts, I know some people specifically want this behavior, so it saves them from having to manually make a hires prompt just to get this effect\r\n  * this PR provides an optional setting that forces the highres fix to build the schedule specially and only use the final part of the prompt\r\n  * There is special handling for `[foo|bar]` so it still happens during highres fix, but only if it was active at the final step. so `[[foo|bar]::0.5]` is treated as ` `, but `[[foo|bar]:0.5]` is treated as `[foo|bar]`\r\n* a summary of changes in code\r\n  * a new option in shared.py settings\r\n  *  `get_learned_conditioning_prompt_schedule` takes a new \"use final state\" boolean parameter that causes it to produce a \"final state\" schedule by only ever generating the \"after\" of a `scheduled` expression\r\n  * `get_conds_with_caching` takes an optional \"use final state\" parameter and includes it as part of the cache key\r\n  * normal prompts are unchanged; hires fix prompts optionally set the \"use final state\" parameter to True\r\n  * plumbing to pass \"use final state\" parameter through\r\n* Addresses #9281, but in a more sophisticated way\r\n\r\n* **Things that maybe should get changed before this is merged**\r\n  * Where should the option go? It's not actually User Interface, maybe under Stable Diffusion? Personally if this was just for me I'd put it in the txt2img hires fix controls themselves (e.g. where you set the scale), but personally I think this should be the default behavior that everyone gets out of the box, so my judgement is suspect, which is why I put it in settings\r\n  * Should I make it so even if you set this option, it's ignored if you explicitly set a non-empty hires prompt?\r\n  * Need to save this option into the png-info and make it an override so that people can reproduce the results without manually changing the setting to the correct value?\r\n  * The new parameter in `get_learned_conditioning_prompt_schedule` defaults to `False` so extensions calling it won't break. But I didn't do that for `get_conds_with_caching`, should I?\r\n## Screenshots/videos:\r\n\r\nThe effect is not easily discernable in normal use, so I just made some exaggerated examples with the hires fix denoising set to 0.8, scale=1, so that the hires fix pass basically recomputes the whole image, just so you can see the effect happening.\r\n\r\nThe prompt is `[man on a street:woman in a forest:0.99] with a [cat|cow|sheep|horse]`. The expected behavior is that the old code will produce a man on a street, and the new code will produce a woman in a forest, and that we get a cat-cow-sheep-horse regardless, and not just a horse (which would happen if we naively just used the final prompt schedule step).\r\n\r\nbefore hires fix:\r\n![00399-v1-5-pruned-2023-08-05-7-30-3127545016-before-highres-fix](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/125328806/777b534c-b383-4a2a-b762-6677a89b4025)\r\n\r\nhires fix before this change:\r\n![00400-v1-5-pruned-2023-08-05-7-30-3127545016](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/125328806/3723c2f1-68a3-4a66-8368-4efa48a791d2)\r\n\r\nhires fix with the option provided by this PR enabled:\r\n![00408-v1-5-pruned-2023-08-05-7-30-3127545016](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/125328806/33d79220-3ce3-4a85-903a-61412f021411)\r\n\r\nI put the UI option to control it here with the other hires fix options, but this is actually the **User Interface** options panel, and this option is not User Interface, so this doesn't seem like the right choice. (None of the options panels really seemed like a good fit, and at least here it's next to some related choices.)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/125328806/f5217a88-fc27-4ba2-9b01-b88920af8a93)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 19
    },
    {
        "merged": false,
        "additions": 12,
        "deletions": 2,
        "changed_files": 4,
        "created_at": "2023-08-05T17:04:29Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nThis PR aims to hopefully resolve, or at least bring to further light, a long-standing issue in #7244, particularly with the LMS sampler.\r\n\r\n[For LMS, k-diffusion runs the callback before doing more work on the latent](https://github.com/crowsonkb/k-diffusion/blob/d79351ac29bcaa73b1de5039197a60109470382e/k_diffusion/sampling.py#L272-L276). The very last step of LMS, after the last callback, has notably caused issues, for some unknown reason to me as I don't know the intricacies of the sampler, but users have found that the penultimate step does _not_ have this issue. However, there was no way previously to obtain this last step other than working off the callback k-diffusion provides, so this PR adds the option to now use that last callback (stored in `last_latent`) and return that for the final result instead. I also don't believe this applies to every sampler so I worded the option in that it tries to use the last latent -- basically whatever k-diffusion last returns in it's callback.\r\n\r\nThis PR now forces this for LMS, along with discarding the penultimate sigma for it. Using the Karras scheduler with LMS (available in the sampler selection as LMS Karras) does not seem to have this issue so I'm leaving that as-is.\r\n\r\n## Screenshots/videos:\r\n\r\n(PNG info included for replication, though note the `Before` will need the change before this PR to be replicated ofc)\r\n\r\n**Before**\r\n![before](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/cecbedb7-2f05-4966-b3fe-607a9cdb9a18)\r\n\r\n**After**\r\n![after](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/9bcb431f-4e1e-4773-a8e6-47dbfd99874e)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-05T14:04:58Z",
        "closed_at": "2023-08-05T14:08:38Z",
        "merged_at": "2023-08-05T14:08:38Z",
        "body": "## Description\r\n\r\n* adds a few new hand selected gradio themes, all tested at least once so make sure they work properly\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 8,
        "changed_files": 2,
        "created_at": "2023-08-05T08:27:24Z",
        "closed_at": "2023-08-06T03:05:47Z",
        "merged_at": "2023-08-06T03:05:47Z",
        "body": "## Description\r\n[[Feature Request]: Option setting to not save a skipped image #12335](https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12335) \r\n> not exactly what the feature request asked, he's asking for interactive implementation....\r\n\r\n\r\nnew opt `Saving images/grids` > `Don't save incomplete images`\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/cb49cc35-1822-4641-8184-276222673944)\r\nif enabled will skip saving to storage when the image is interrupted or skipped\r\ndefault not enabled\r\n\r\nsaving of image grid is not affected it's not governed under this setting\r\nand even if the images are not saved the result was still show up in web UI\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 5,
        "deletions": 75,
        "changed_files": 4,
        "created_at": "2023-08-05T05:45:56Z",
        "closed_at": "2023-08-05T06:31:54Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nCloses #3278 #11040 #11185\r\n\r\nA lot of this code is legacy and no longer needed, as Gradio has fixed all these items. This would also resolve the long standing issue of the temp folder never being cleared, which is now doable since all Gradio related files are stored separately under `gradio` now. \r\n\r\nSome related info:\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/3278#issuecomment-1666383929\r\nhttps://github.com/gradio-app/gradio/blob/34f6b22efbfedfa569d452f3f99ed2e6593e3c21/gradio/components/base.py#L310-L316\r\nhttps://github.com/gradio-app/gradio/pull/3523\r\nhttps://github.com/gradio-app/gradio/issues/3597\r\nhttps://github.com/gradio-app/gradio/pull/4256\r\n\r\nThis would also prevent any edge cases like this being encountered in the future when Gradio updates. https://github.com/Mikubill/sd-webui-controlnet/issues/1563\r\n\r\nThis is however a bit of a breaking change in it's current state, as it makes the `temp_dir` setting obsolete. It should be preferred to use the `GRADIO_TEMP_DIR` environment variable now. I'm open for suggestions on how to make this more easily accessible to the user though if this is desired.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 23,
        "changed_files": 2,
        "created_at": "2023-08-05T05:24:52Z",
        "closed_at": "2023-08-05T06:37:19Z",
        "merged_at": "2023-08-05T06:37:19Z",
        "body": "## Description\r\nall of these UI settings only needs reload and not restart\r\nit is far more easier to restart as the button is on top of the page\r\nrestart is only accessible from the extensions tab or by killing the backend directly\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/c03814fa-db4d-4ba4-9912-6b43313ffa04)\r\nalso it's faster\r\non older system the the difference in speed is quite significant\r\n\r\nin my opinion we should make the distinction\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 42,
        "deletions": 4,
        "changed_files": 5,
        "created_at": "2023-08-05T03:28:40Z",
        "closed_at": "2023-08-05T04:47:41Z",
        "merged_at": null,
        "body": "## Description\r\nThis PR adds an option, `Hires noisy latent`, which sends a noisy latent for the highres pass (without renoising it), which is obtained by producing sigmas for the number of steps for the first pass plus the number of steps for the second pass and then trimming the excess sigmas. Currently this is only implemented for k-diffusion samplers, and it doesn't appear to work correctly for all of them. Also this doesn't really work for increasing resolution, the intended usage for now is sending from the SD XL base model to the refiner without changing resolution.\r\n\r\nThis should allow for more closely matching the official SD XL workflow when used with #12181.\r\n\r\n## Screenshots/videos:\r\n\r\n<img width=\"1488\" alt=\"Example\" src=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/7954378/6befa891-5c27-4fad-8a9e-17fce58dc21e\">\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-05T03:00:30Z",
        "closed_at": "2023-08-05T04:47:07Z",
        "merged_at": "2023-08-05T04:47:07Z",
        "body": "Closes #4685\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-08-05T00:46:36Z",
        "closed_at": "2023-08-05T04:34:22Z",
        "merged_at": "2023-08-05T04:34:22Z",
        "body": "Oh my eyes my eyes\r\nI'm blinded by the Light\r\n\r\n## Description\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/682ff8936df018330e0d2a259794a262dc3251b2 I know you're overjoyed\r\nbut at least make it consistent and configurable\r\n\r\nthe default brush color for the color sketch is not important, as we have a `color picker` built into the tool\r\nbut since you changed it on `Inpaint sketch` and not for `sketch` I decide to annoy you to put all three options in\r\n> and set the default color black to annoy you, change it to white if you want\r\n\r\nunfortunately I don't think there is a `color picker` on the noirmal `sketch` tool (only on the `color-sketch`)\r\nso we cannot change the mask brush color during use\r\nand the mask color is not updated by the settings immediately and requires a Reload\r\nmaybe it's achievable if we do some messing around with JavaScript\r\n\r\nable to change the transparent mask color is important\r\nas depending on what images you're working on some mask color may not be suited\r\n\r\n## Screenshots/videos:\r\nbefore pr\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/87d663b5-ec3a-4490-afa7-255e18cb7027\r\n\r\nafter PR\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/35a9b32b-0a12-441c-93ba-68dc6e65e5ef)\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-04T19:20:19Z",
        "closed_at": "2023-08-05T06:22:28Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nCloses #12321\r\n\r\nFixes the refresh button, adds a refresh button back into the main UI, and moves the materalize/paste button back into the main UI (I assume this was moved into the editor UI by accident).\r\n\r\nThis also means the main UI is looking kind of imbalanced though since two extra buttons live in the styles row now (previously only the refresh button was there).\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/1ab75cb6-fa11-4302-b882-dcdfd844314f)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-04T17:33:52Z",
        "closed_at": "2023-08-04T17:35:25Z",
        "merged_at": "2023-08-04T17:35:25Z",
        "body": "## Description\r\n\r\nCloses #8161\r\n\r\nUpdates the prompt scheduler to allow for empty fields to be specified in the alternating words prompt syntax. This means shorthand syntax as mentioned in the issue like `[fe|]male` works, as opposed to typing out `[female|male]`.\r\n\r\nAdds two new prompt tests and all current tests pass (besides test noted `# not handling this right now`).\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-04T16:27:50Z",
        "closed_at": "2023-08-04T17:31:11Z",
        "merged_at": "2023-08-04T17:31:11Z",
        "body": "## Description\r\n\r\nMakes the link to raw sysinfo open in a new page like the text describes. If this isn't wanted then I think the actual text should be re-worded.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-04T11:24:32Z",
        "closed_at": "2023-08-10T04:05:44Z",
        "merged_at": "2023-08-10T04:05:44Z",
        "body": "## Description\r\n\r\nMakes component styles for alwayson scripts/extensions more distinct within the UI. This was similar to how the UI was styled in the past and disappeared after another Gradio update I assume. If this change isn't wanted feel free to close.\r\n\r\n## Screenshots/videos:\r\n\r\n<details>\r\n<summary>Before</summary>\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/3e12edc2-86d5-4b22-a4d5-dac2d6a35c42)\r\n</details>\r\n\r\n<details>\r\n<summary>After</summary>\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/c03e9f29-3f46-4ce5-87aa-0e98a9928322)\r\n</details>\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-stye)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 100,
        "deletions": 27,
        "changed_files": 6,
        "created_at": "2023-08-04T11:08:11Z",
        "closed_at": "2023-08-05T06:24:26Z",
        "merged_at": "2023-08-05T06:24:26Z",
        "body": "## Description\r\nTAESD have been added as a fast live preview method. And it actually can be seen as a normal VAE (with some quality degrad)\r\nSince some user may prefer faster speed or want to generate larger image with limited vram, I think add TAESD as a usable method for all the VAE operation is a good idea so I open this PR.\r\n\r\nAt first I only implement TAESD encoder and replace all the latent encode/decode in the processing.py. I think tiled VAE also can be taken as a built-in VAE method as well.\r\n(For example, t2i -> Full decode -> img -> TAESD encode -> i2i -> Tiled decode -> final big image)\r\n\r\nI will leave this pr as draft to see if we should implement all the things in this PR (second pass vae, built-in tiled vae etc.)\r\n\r\n\r\n## some example for TAESD encode/decode\r\nFull VAE vs TAESD\r\n![vae_compare_2](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/59680068/075caaa3-0a6c-447d-8ba3-5c24700bee16)\r\n\r\n4K Image generated with example workflow above in SD1.5 model (take 8G vram for whole process):\r\n(t2i 1024x576, hires fix to 3840x2160)\r\n![00571](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/59680068/d349db50-67b4-435f-b325-93aa41d08e16)\r\n\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-04T10:47:26Z",
        "closed_at": "2023-08-04T12:55:26Z",
        "merged_at": "2023-08-04T12:55:26Z",
        "body": "## Description\r\n\r\nMore Gradio shenanigans. Fixes `overflow` to return back back to `visible` (3.39.0 overrides it to `hidden` by default). I think it's safe to assume if it was always like this in the past then this won't introduce any new issues.\r\n\r\nIn particular this resolves an issue with the autocomplete extension. https://github.com/DominikDoom/a1111-sd-webui-tagcomplete/issues/213\r\n\r\n## Screenshots/videos:\r\nn/a, visually identical\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-08-04T09:34:36Z",
        "closed_at": "2023-08-04T10:16:51Z",
        "merged_at": "2023-08-04T10:16:51Z",
        "body": "## Description\r\n\r\nTitle. Something changed with the Gradio component in 3.39.0 which now returns the mask as an RGBA image. This fixes the conversion back to a binary mask. Not sure if we want to add backwards compat or not.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 5,
        "changed_files": 1,
        "created_at": "2023-08-04T08:16:13Z",
        "closed_at": "2023-08-04T08:33:35Z",
        "merged_at": "2023-08-04T08:33:35Z",
        "body": "Close https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12232\r\n## Description\r\n\r\nin setting \"Face restoration model\" and \"Select which Real-ESRGAN models\" and in extras \"upscaler 1 & 2\" are ignore by localization\r\n\r\nPerhaps these locations should be localizable.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-08-04T08:05:05Z",
        "closed_at": "2023-08-04T08:52:17Z",
        "merged_at": "2023-08-04T08:52:17Z",
        "body": "## Description\r\n\r\nTitle. Closes #6419.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-04T07:53:16Z",
        "closed_at": "2023-08-04T09:04:11Z",
        "merged_at": "2023-08-04T09:04:11Z",
        "body": "## Description\r\n\r\nTitle. Closes #2097.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-04T04:58:54Z",
        "closed_at": "2023-08-04T05:11:13Z",
        "merged_at": "2023-08-04T05:11:13Z",
        "body": "## Description\r\n\r\nThe exponential scheduler for this particular sampler produces better results than Karras. This was pointed out directly by the author of this sampler. This was already doable via #10649 but this makes using this \"variant\" of the sampler to make comparisons with the XYZ plot and non-interfering use with the hires sampler override possible (the option in settings overrides the scheduler for all samplers). I'd also say it makes the fact that Karras is not the only scheduler more discoverable.\r\n\r\nRelated discussion:\r\nhttps://gist.github.com/crowsonkb/3ed16fba35c73ece7cf4b9a2095f2b78\r\nhttps://github.com/crowsonkb/k-diffusion/issues/59\r\n\r\n## Screenshots/videos:\r\n\r\n![example](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/122327233/de60cec5-2ac1-4870-a729-cc12194195cd)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 10,
        "changed_files": 1,
        "created_at": "2023-08-04T04:12:04Z",
        "closed_at": "2023-08-04T04:47:35Z",
        "merged_at": "2023-08-04T04:47:35Z",
        "body": "## Description\r\n\r\nAdds support for hires sampler selection in the XYZ plot script and removes duplicate code (the list is already confirmed).\r\n\r\n~~Temporarily marking as draft so I can fix the label (if both sampler and hires sampler are used the plot isn't clear)~~ Done.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-04T04:01:59Z",
        "closed_at": "2023-08-04T05:53:47Z",
        "merged_at": "2023-08-04T05:53:47Z",
        "body": "## Description\r\nalternative to PR https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12281\r\nbut instead sort VAE dictionary at the source\r\nthis way that the it's applied across the UI\r\n\r\nremaks\r\nto be honest I think the VAE is left or needs to be revamped\r\nirrc currently one can accidentally use a 1.x VAE on a XL model\r\nunless one is deliberately trying to create a bad image one should never do that\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 10,
        "changed_files": 3,
        "created_at": "2023-08-04T00:47:35Z",
        "closed_at": "2023-08-04T04:26:36Z",
        "merged_at": "2023-08-04T04:26:36Z",
        "body": "## Description\r\n[[Feature Request]: command-line argument to disable extensions](https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12139)  \r\nnew arg\r\n`--disable-extensions all`\r\n`--disable-extensions extra`\r\nI think it's pretty self-explanatory\r\nthis is useful for people that are constantly switching between without extensions\r\nlike when developing stuff / testing\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 8
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-03T12:38:14Z",
        "closed_at": "2023-08-04T05:54:07Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-08-03T01:27:20Z",
        "closed_at": "2023-08-03T09:56:20Z",
        "merged_at": "2023-08-03T09:56:20Z",
        "body": "## Description\r\nissue https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12259\r\n\r\nprevent positive prompt TI hash from overriding negative prompt TI hash\r\nas this line of code will be called 2 time\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 12,
        "deletions": 4,
        "changed_files": 2,
        "created_at": "2023-08-02T11:27:09Z",
        "closed_at": "2023-08-08T03:44:49Z",
        "merged_at": "2023-08-08T03:44:49Z",
        "body": "## Update\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/b3a0ecf1-b70a-4c30-b315-5e5b07e9579d)\r\n\r\nno ~~--disable-auto-autolaunch~~\r\n\r\n---\r\n\r\n## Description\r\nAutomatically open webui in system browser when user is running \"locally\"\r\n\r\nif (`--listen` or `--share` or `--ngrok`)  and `--disable-auto-autolaunch` is NOT used, automatically open webui  in browser\r\nnew arg `--disable-auto-autolaunch` for disabling this behavior\r\n\r\na ease of use for new users that my mistakenly think thatwebui is not launched\r\nexample https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12251\r\n\r\n`--autolaunch` behavior not changed, it will still launch in browser even if `auto autolaunch` it's not triggered\r\n\r\nI think the auto autolaunch logic covers most users use case\r\nbut ther might be a group of people that launch web UI in normal browser mode with API enabled\r\nbut don't want to open in browser as they interact with you are back and primarily through API\r\nthat might be annoyed by this, this group of people would need to use `--disable-auto-autolaunch`\r\nI assume that this group of user is the minority and are advanced users\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-08-02T08:42:48Z",
        "closed_at": "2023-08-10T14:23:16Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nThe WebUI project, currently using the GFPGAN code version, comes from an unstable version, taken from a temporary commit after the release of 1.3.5.\r\n\r\nFor consistency, refer to the requirements file, it is recommended to use version 1.3.8 of the stable version.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 13
    },
    {
        "merged": false,
        "additions": 85,
        "deletions": 76,
        "changed_files": 4,
        "created_at": "2023-08-01T14:55:01Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nAnother attempt to fix the middleware issue with newer versions of FastAPI, somehow https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/8509 does not work for me. This PR works, though very hacky.\r\nAlso added support for Pydantic 2.0 as it is being used by the latest versions of FastAPI.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 58,
        "deletions": 70,
        "changed_files": 3,
        "created_at": "2023-08-01T14:33:26Z",
        "closed_at": "2023-08-01T14:36:32Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nAnother attempt to fix the middleware issue with newer versions of FastAPI, somehow https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/8509 does not work for me. This PR works, though very hacky.\r\nAlso added support for Pydantic 2.0 as it is being used by the latest versions of FastAPI.\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 24,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-08-01T03:40:00Z",
        "closed_at": "2023-08-07T05:27:27Z",
        "merged_at": "2023-08-07T05:27:27Z",
        "body": "## Description\r\n\r\n* Attempt to fix the workspace if `git checkout` fails.\r\n\r\n## Screenshots/videos:\r\n![f9a1102a71bd7871804b383df583cf4e](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/2220320/60e7720f-56cf-4309-9423-929c43b4fc95)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 135,
        "deletions": 35,
        "changed_files": 6,
        "created_at": "2023-07-31T21:34:12Z",
        "closed_at": "2023-08-05T04:52:51Z",
        "merged_at": "2023-08-05T04:52:51Z",
        "body": "## Description\r\n\r\n* option to specify how many loaded models you want to keep in memory\r\n* additional checkbox that lets you decide whether you want to keep just the one model in VRAM or all of them\r\n* if switching to an already loaded model, it's either instantaneous (if the checkbox is not checked) or very fast, something like 1s for me (if the checkbox is checked)\r\n* obsoletes the `Checkpoints to cache in RAM` setting.\r\n* tested to work with --medvram\r\n* Loras tested to work properly\r\n* additional things I put into the PR despite telling others to not put extra stuff\r\n  * suppressed sgm/ldm `print` statements can be restored in settings\r\n  * `do_inpainting_hijack` removed, the function is hijacked at startup instead\r\n  * fixed a bug where `get_empty_cond` would create empty prompt cond using Lora weights\r\n\r\n## Screenshots/videos:\r\n\r\n![firefox_N63eoA4M7X](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/20920490/808361c0-1790-4942-9b97-c454da4c7481)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 10,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-07-31T09:24:26Z",
        "closed_at": "2023-07-31T11:00:49Z",
        "merged_at": "2023-07-31T11:00:49Z",
        "body": "## Description\r\n\r\nFixes (works around) #12206 \u2013 if an user is out of local storage quota, we still want generation to work, albeit without progress restoration.\r\n\r\nAlso, cleans up a duplicate line.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-31T07:26:40Z",
        "closed_at": "2023-08-04T08:53:19Z",
        "merged_at": "2023-08-04T08:53:19Z",
        "body": "## Description\r\n\r\nCurrently, we are using the following code to inspect if the model is SDXL:\r\n\r\n     if sd.get('conditioner.embedders.1.model.ln_final.weight', None) is not None:\r\n        return config_sdxl\r\n\r\nHowever, after hijack, `conditioner.embedders.1.model.ln_final.weight` will be changed to `conditioner.embedders.1.wrapped.model.ln_final.weight`. This will affect the choice of an invalid configuration for the SDXL model when shared.opts.sd_checkpoint_cache is enabled.\r\n\r\nMaybe we can solve this problem by preventing the addition of `wrapped` ?\r\n\r\n## Screenshots/videos:\r\n\r\n### How to reproduce it.\r\nWhen starting the webui, use the following command arguments: `--xformers --listen --ckpt=/stable-diffusion-webui/models/Stable-diffusion/sd_xl_base_1.0.safetensors --enable-insecure-extension-access --api --port 7860`. Set `sd_checkpoint_cache` to 3.\r\n\r\nThen, test it using the following scripts. It will switch to 0.9, switch back to 1.0, and then switch back to 0.9:\r\n```\r\ncurl -X 'POST' \\\r\n  'http://office-gpu:7860/sdapi/v1/options' \\\r\n  -H 'accept: application/json' \\\r\n  -H 'Content-Type: application/json' \\\r\n  -d '{\r\n  \"sd_model_checkpoint\": \"sd_xl_base_0.9.safetensors\"\r\n}'\r\n\r\n\r\ncurl -X 'POST' \\\r\n  'http://office-gpu:7860/sdapi/v1/options' \\\r\n  -H 'accept: application/json' \\\r\n  -H 'Content-Type: application/json' \\\r\n  -d '{\r\n  \"sd_model_checkpoint\": \"sd_xl_base_1.0.safetensors\"\r\n}'\r\n\r\n\r\ncurl -X 'POST' \\\r\n  'http://office-gpu:7860/sdapi/v1/options' \\\r\n  -H 'accept: application/json' \\\r\n  -H 'Content-Type: application/json' \\\r\n  -d '{\r\n  \"sd_model_checkpoint\": \"sd_xl_base_0.9.safetensors\"\r\n}'\r\n```\r\nHere is the error output:\r\n```\r\nStartup time: 32.3s (prepare environment: 13.0s, launcher: 0.2s, import torch: 2.5s, import gradio: 1.5s, setup paths: 0.7s, other imports: 0.6s, list SD models: 0.2s, load scripts: 5.2s, create ui: 2.1s, gradio launch: 2.8s, add APIs: 0.\r\n1s, app_started_callback: 3.3s).\r\nLoading weights [1f69731261] from /stable-diffusion-webui/models/Stable-diffusion/sd_xl_base_0.9.safetensors\r\nApplying attention optimization: xformers... done.\r\nWeights loaded in 3.4s (load weights from disk: 1.3s, apply weights to model: 0.9s, move model to device: 1.1s).\r\nLoading weights [31e35c80fc] from cache\r\nApplying attention optimization: xformers... done.\r\nWeights loaded in 2.0s (apply weights to model: 0.9s, move model to device: 1.1s).\r\nLoading weights [1f69731261] from cache\r\nCreating model from config: /stable-diffusion-webui/configs/v1-inference.yaml\r\nLatentDiffusion: Running in eps-prediction mode\r\nDiffusionWrapper has 859.52 M params.\r\nchanging setting sd_model_checkpoint to sd_xl_base_0.9.safetensors: RuntimeError\r\nTraceback (most recent call last):\r\n  File \"/stable-diffusion-webui/modules/shared.py\", line 633, in set\r\n    self.data_labels[key].onchange()\r\n  File \"/stable-diffusion-webui/modules/call_queue.py\", line 14, in f\r\n    res = func(*args, **kwargs)\r\n  File \"/stable-diffusion-webui/webui.py\", line 238, in <lambda>\r\n    shared.opts.onchange(\"sd_model_checkpoint\", wrap_queued_call(lambda: modules.sd_models.reload_model_weights()), call=False)\r\n  File \"/stable-diffusion-webui/modules/sd_models.py\", line 582, in reload_model_weights\r\n    load_model(checkpoint_info, already_loaded_state_dict=state_dict)\r\n  File \"/stable-diffusion-webui/modules/sd_models.py\", line 514, in load_model\r\n    load_model_weights(sd_model, checkpoint_info, state_dict, timer)\r\n  File \"/stable-diffusion-webui/modules/sd_models.py\", line 299, in load_model_weights\r\n    model.load_state_dict(state_dict, strict=False)\r\n  File \"/usr/local/lib/python3.10/dist-packages/torch/nn/modules/module.py\", line 2041, in load_state_dict\r\n    raise RuntimeError('Error(s) in loading state_dict for {}:\\n\\t{}'.format(\r\nRuntimeError: Error(s) in loading state_dict for LatentDiffusion:\r\n        size mismatch for model.diffusion_model.input_blocks.4.1.proj_in.weight: copying a param with shape torch.Size([640, 640]) from checkpoint, the shape in current model is torch.Size([640, 640, 1, 1]).\r\n        size mismatch for model.diffusion_model.input_blocks.4.1.transformer_blocks.0.attn2.to_k.weight: copying a param with shape torch.Size([640, 2048]) from checkpoint, the shape in current model is torch.Size([640, 768]).\r\n        size mismatch for model.diffusion_model.input_blocks.4.1.transformer_blocks.0.attn2.to_v.weight: copying a param with shape torch.Size([640, 2048]) from checkpoint, the shape in current model is torch.Size([640, 768]).\r\n        size mismatch for model.diffusion_model.input_blocks.4.1.proj_out.weight: copying a param with shape torch.Size([640, 640]) from checkpoint, the shape in current model is torch.Size([640, 640, 1, 1]).\r\n        size mismatch for model.diffusion_model.input_blocks.5.1.proj_in.weight: copying a param with shape torch.Size([640, 640]) from checkpoint, the shape in current model is torch.Size([640, 640, 1, 1]).\r\n        size mismatch for model.diffusion_model.input_blocks.5.1.transformer_blocks.0.attn2.to_k.weight: copying a param with shape torch.Size([640, 2048]) from checkpoint, the shape in current model is torch.Size([640, 768]).\r\n        size mismatch for model.diffusion_model.input_blocks.5.1.transformer_blocks.0.attn2.to_v.weight: copying a param with shape torch.Size([640, 2048]) from checkpoint, the shape in current model is torch.Size([640, 768]).\r\n        size mismatch for model.diffusion_model.input_blocks.5.1.proj_out.weight: copying a param with shape torch.Size([640, 640]) from checkpoint, the shape in current model is torch.Size([640, 640, 1, 1]).\r\n        size mismatch for model.diffusion_model.input_blocks.7.1.proj_in.weight: copying a param with shape torch.Size([1280, 1280]) from checkpoint, the shape in current model is torch.Size([1280, 1280, 1, 1]).\r\n        size mismatch for model.diffusion_model.input_blocks.7.1.transformer_blocks.0.attn2.to_k.weight: copying a param with shape torch.Size([1280, 2048]) from checkpoint, the shape in current model is torch.Size([1280, 768]).\r\n        size mismatch for model.diffusion_model.input_blocks.7.1.transformer_blocks.0.attn2.to_v.weight: copying a param with shape torch.Size([1280, 2048]) from checkpoint, the shape in current model is torch.Size([1280, 768]).\r\n        size mismatch for model.diffusion_model.input_blocks.7.1.proj_out.weight: copying a param with shape torch.Size([1280, 1280]) from checkpoint, the shape in current model is torch.Size([1280, 1280, 1, 1]).\r\n```\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 108,
        "deletions": 49,
        "changed_files": 6,
        "created_at": "2023-07-30T11:11:22Z",
        "closed_at": "2023-08-05T04:47:34Z",
        "merged_at": "2023-08-05T04:47:34Z",
        "body": "## Description\r\n\r\n* add a checkpoint selection for hires fix.\r\n* in the same row as sample selection; must enable `Hires fix: show hires checkpoint and sampler selection` setting to see it.\r\n* just switches the checkpoint.\r\n* works with SD1, SD2 and SDXL\r\n* made it possible to do hires fix with same resolution as original, for SDXL refiner.\r\n* you may want to use `Checkpoints to cache in RAM` setting to speed it up.\r\n* in future, I plan to make it possible to keep multiple models (as opposed to state dicts) in memory to make the switch instant.\r\n\r\n## Screenshots/videos:\r\n![firefox_HvBxrY0VsP](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/20920490/a1b712ab-5026-4ddc-b0e1-9e2bbd5b9a71)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 27
    },
    {
        "merged": false,
        "additions": 16,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-30T11:09:09Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\n* in some scenarios with xyz grid, you might want a set of different images along an axis, but the same one on the other axes. currently, you can either change the seed, or you can use prompt SR to change the prompt. this PR allows you to specify a fixed seed but then vary it along one or more axes so the seed can vary at the same time as the prompt. this may be kinda weird; i use it now and then, but it may not be worth the added UI complexity\r\n* a summary of changes in code:\r\n* * three checkboxes are provided, allowing the seed to vary along each axis independently\r\n* * each selected checkbox effectively causes the seed to increment along that axis\r\n* * if multiple axes are selected, 2D/3D array-indexing computation is performed so all seeds are unique\r\n* an alternative implementation would be to have a switch that just forces varying seeds if there's a prompt SR, but it's possible you might have more than one prompt SR but only want seed variation along one of them; or there might be some other axis option where incrementing seeds is useful, so I went with more general functionality\r\n* if you should choose to accept this PR, please suggest how you would prefer the UI to be laid out and I'll fix it\r\n\r\n## Screenshots/videos:\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/125328806/6344fd68-2d63-4af0-a241-c688259a18c7)\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/125328806/21624104-196f-4e42-82b2-1d3c1e0c8d04)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-30T10:43:57Z",
        "closed_at": "2023-07-30T12:32:34Z",
        "merged_at": "2023-07-30T12:32:34Z",
        "body": "## Description\r\n\r\n* in 05ccb4d0e3ff38503a2863889e21290e77590ee2 a change was made to remove directory names from model names when putting model name into image filenames. this PR also removes directory names from model names but in the xyz grid legend, to avoid text autoscaling very small\r\n* a new label format function is created, and checkpoint names are sent to that function instead of the default formatter\r\n\r\n## Screenshots/videos:\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 8,
        "changed_files": 1,
        "created_at": "2023-07-30T10:15:03Z",
        "closed_at": "2023-07-30T14:23:19Z",
        "merged_at": "2023-07-30T14:23:19Z",
        "body": "## Description\r\n\r\n* simple description of what the PR tries to accomplish:\r\n* * in prompts like \"[foo : 0.5]\", whitespace is allowed before the number, but not after the number.\r\n* * * if there is whitespace after the number, the string will simply be added to the final prompt without doing prompt editing, and the user can't easily tell this is happening\r\n* * * this PR adds support for having whitespace after the number, \r\n* * in prompts like \"(foo : 0.5)\", whitespace is not allowed before or after the number\r\n* * * if there is whitespace before or after the number, the prompt text and number will simply be added to the final prompt with 1.1 emphasis, so e.g. you end up with [\"foo : 0.5\", 1.1]\r\n* * * this PR adds support for having whitespace before and after the number, \r\n* a summary of changes in code\r\n* * One lark prompt parser rule is expanded to allow whitespace after the number in alternations.\r\n* * The lark visitors handle the extra element in the lark rule\r\n* * The regular expression for numbers in the attention regexp allow whitespace before and after\r\n* * The existing code `float(weight)` correctly handles whitespace\r\n* fixes issue I reported: #11627\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 4
    },
    {
        "merged": false,
        "additions": 96,
        "deletions": 4,
        "changed_files": 4,
        "created_at": "2023-07-30T04:00:57Z",
        "closed_at": "2023-08-03T20:31:41Z",
        "merged_at": null,
        "body": "## Description\r\nThis change adds a small button next to the styles toolbar that enables a dropdown to allow the user to edit or delete saved styles. The selected style is determined by the last style in the dropdown, which is also the last selected style. The style prompt and negative prompt is loaded and the user can edit and save the style, as well as delete it entirely.\r\n\r\n## Changes in code\r\nAdded UI elements to upper shell, passes 4 new parameters into text2img and img2img sections for the 2 new prompts and 2 new buttons. Functions added at the top of ui.py to hook to these 2 new buttons as well as to apply the prompts from the last style in the dropdown.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/125175965/c6b75ad1-6fdc-4c16-95f0-de38ecc3b025\r\n\r\n## Checklist:\r\n\r\n- [y] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [y] I have performed a self-review of my own code\r\n- [y] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [y] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 9,
        "deletions": 21,
        "changed_files": 1,
        "created_at": "2023-07-29T15:14:13Z",
        "closed_at": "2023-07-30T08:45:33Z",
        "merged_at": "2023-07-30T08:45:33Z",
        "body": "## Description\r\nfix issue https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12149 introduced by PR https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/11747\r\n\r\ninstead of having a dedicated image saving sequence just reuse everything\r\nshould make maintain easier\r\n\r\nsince the image save file name is parsed by `FilenameGenerator` it could cause potential issues if they are special sequences in the file name\r\nI have mentioned past that we shouldn't use valid file name characters for as pattern (square brackets `[xxx]`)\r\n\r\nI propose we switch to using `<xxx>`\r\nit should be possible to make the transition without breaking change\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-29T10:44:51Z",
        "closed_at": "2023-07-30T09:26:43Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nAs I mentioned issue #12149 , I found that `infotext` function using index when controlnet included, but seed array only contains just one value. So I modified that infotext funtion uses index 0 during batch processing.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-28T18:35:32Z",
        "closed_at": "2023-08-09T13:56:54Z",
        "merged_at": null,
        "body": "implementation of @liuzimo's solution to enable `sys.modules` to find the `xformers` package in `sd_hijacking` routines. The change is described in https://github.com/AUTOMATIC1111/stable-diffusion-webui/discussions/6594#discussioncomment-5216054. I tested it;  it works. \r\n\r\n## Description\r\n\r\n* solve a problem where `sd_hijack` and related routines would fail to load `xformers.ops` because sys.modules could not find it in site packages.  \r\n* solves issues https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12142 and https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/5993\r\n\r\n## Checklist:\r\n\r\n- [ x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ x] I have performed a self-review of my own code\r\n- [ x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-07-28T03:52:09Z",
        "closed_at": "2023-07-29T04:44:01Z",
        "merged_at": "2023-07-29T04:44:01Z",
        "body": "## Description\r\n\r\nI'm using web ui api, and found total progress tqdm bar is increase infinitely. This may lead to oom.\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28686889/685f5263-d736-4cf5-b3b3-5058649bac1a)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-07-28T03:44:38Z",
        "closed_at": "2023-07-28T03:50:02Z",
        "merged_at": null,
        "body": "## Description\r\nI'm using web ui api, and found total progress tqdm bar is increase infinitely. This may lead to oom.\r\n\r\n## Screenshots/videos:\r\n<img width=\"403\" alt=\"image\" src=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/28686889/f1c5dc0f-0858-402c-84ab-2f8a0a6a7c6a\">\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-28T01:33:21Z",
        "closed_at": "2023-07-29T04:48:44Z",
        "merged_at": "2023-07-29T04:48:44Z",
        "body": "[Bug]: IMG2IMG Batch will not locate TIF images #12106\r\n\r\n## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\nget img2img batching to process tifs again\r\n\r\n* a summary of changes in code\r\nAdjusted line 20 to include .tif and .tiff\r\n\r\n* which issues it fixes, if any:\r\nIn my tests, it is working, now\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\nThe last instruction on the wiki/Tests says \"Once the server is running, you can run tests with just py.test.\"\r\n@akx How do I do that? Console? From within the WebUI? Please provide clearer instructions for me to be able to confidently say I've run the test for pull request submission. I understand installing via the requirements.txt and added the argument to my command_args with the launcher, but otherwise I don't know what to do from there.\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-27T16:16:37Z",
        "closed_at": "2023-07-29T04:49:22Z",
        "merged_at": "2023-07-29T04:49:22Z",
        "body": "## Checklist:\r\n\r\n- [*] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [*] I have performed a self-review of my own code\r\n- [*] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [*] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-07-26T08:31:33Z",
        "closed_at": "2023-07-26T08:52:42Z",
        "merged_at": "2023-07-26T08:52:42Z",
        "body": "## Description\r\n[Bug]: sd_model_checkpoint removed from GET /sdapi/v1/options? https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12025\r\nif I'm understanding correctly\r\nwhat happens is that if the default value is None type\r\nthen the model that the API returns don't even include that field\r\n\r\nso I changed that if the default is none it would use `Any` type \r\n\r\nNote I'm never used pydantic, and not entirely sure what the intended response should be\r\nbut this fix seems to work\r\n\r\nthe issue was caused by a series of changes you did around\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/b270ded268c92950a35a7a326da54496ef4151c8#diff-f4032708024d08a8ae417cd5e4f6a3e7e06d7a567704b86c8874edc7d7b5937b\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-26T04:45:01Z",
        "closed_at": "2023-07-26T04:45:49Z",
        "merged_at": "2023-07-26T04:45:49Z",
        "body": "## Description\r\nFix check for updates status always unknown \r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/12021\r\nthis seems like a bug caused by the cache rework, not entirely sure how it worked before but this should fix it\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 25,
        "deletions": 38,
        "changed_files": 1,
        "created_at": "2023-07-26T03:38:16Z",
        "closed_at": "2023-07-26T05:07:07Z",
        "merged_at": "2023-07-26T05:07:07Z",
        "body": "## Description\r\n\r\nfixes the issue from #12008 without reverting the whole thing\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-26T03:10:13Z",
        "closed_at": "2023-07-26T12:17:37Z",
        "merged_at": "2023-07-26T12:17:37Z",
        "body": "## Description\r\n\r\n* When the textual inversion model's name contains \"\\<something\\>\", it will make the name invisible because this name will be rendered as a tag.\r\n* So, before formatting, I add `html.escape` to avoid this.\r\n\r\n## Screenshots/videos:\r\nBefore:\r\n<img width=\"1559\" alt=\"Screenshot 2023-07-26 at 11 08 26\" src=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/51821219/93efd168-5fdf-474a-92fa-647d9a3f5f93\">\r\n\r\nAfter:\r\n<img width=\"1559\" alt=\"Screenshot 2023-07-26 at 11 09 29\" src=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/51821219/66269584-4a9d-4241-8b34-7c6c32f9431c\">\r\n\r\n\r\n## Checklist:\r\n\r\n- [*] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [*] I have performed a self-review of my own code\r\n- [*] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [*] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 20,
        "deletions": 14,
        "changed_files": 4,
        "created_at": "2023-07-26T02:34:39Z",
        "closed_at": "2023-07-26T07:36:57Z",
        "merged_at": null,
        "body": "## Motivation\r\n\r\nA lot of modern libraries use pydantic v2.\r\n\r\nI faced this issue when installing WebUI in Docker:\r\n1. I ran installer script (webui.sh)\r\n2. I installed [runpod](https://github.com/runpod/runpod-python) library (needed to run serverless WebUI on [runpod](https://www.runpod.io/))\r\n3. Ended up with Pydantic v2+ which caused this: https://pastebin.com/pkAL4hni error ( AttributeError: __config__ ) after launching web ui.\r\n\r\n## Description\r\n\r\n* fixed https://pastebin.com/dDdpvCkM\r\n* fixed https://pastebin.com/nQFj1RHJ\r\n* fixed https://pastebin.com/pkAL4hni\r\n\r\n- [ * ] I have performed a self-review of my own code\r\n\r\n@AUTOMATIC1111 please merge it ASAP. The last error prevents the Web UI from launching unless `pydantic` is downgraded to v1 from v2.",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 27,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-07-26T01:27:44Z",
        "closed_at": "2023-07-26T05:01:54Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nThis should fix the extra network issue, at the cost of an extra attribute `p.prompts_with_extra_network_data`. I'm testing this actively as we speak but I'm not familiar enough with the code to be sure that p.negative_prompts or other p attributes are not modified after the slicing of p.prompts, p.negative_prompts etc. and before the new callback.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 6
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-26T01:23:07Z",
        "closed_at": "2023-07-26T04:30:49Z",
        "merged_at": null,
        "body": "\r\n\r\n## Description\r\n\r\n*  Fix TypeError: unsupported operand type(s) for |: 'type' and 'NoneType' in `create_module()` method in `extensions-builtin/Lora/network.py`\r\n* The `create_module()` method returns a Network object or None. The return None statement is causing the | operator to be used on the type of the Network object and the NoneType value. To fix this error,  changed the return type of the `create_module()` method to `Optional[Network]`.\r\n* Changed return type of `create_module()` method to `Optional[Network]`.\r\n* Updated `return None` statement to return a `None` value of type `Optional[Network]`.\r\n\r\n* Full error below:\r\n``` \r\n.....\r\nInstalling requirements\r\nLaunching Web UI with arguments: --share --skip-torch-cuda-test --no-gradio-queue --precision full --no-half\r\nno module 'xformers'. Processing without...\r\nno module 'xformers'. Processing without...\r\nNo module 'xformers'. Proceeding without it.\r\nWarning: caught exception 'Found no NVIDIA driver on your system. Please check that you have an NVIDIA GPU and installed a driver from http://www.nvidia.com/Download/index.aspx', memory monitor disabled\r\nDownloading: \"https://huggingface.co/runwayml/stable-diffusion-v1-5/resolve/main/v1-5-pruned-emaonly.safetensors\" to /home/rpanchum/stable-diffusion-webui/models/Stable-diffusion/v1-5-pruned-emaonly.safetensors\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 3.97G/3.97G [00:38<00:00, 112MB/s]\r\n*** Error loading script: lora_script.py\r\n    Traceback (most recent call last):\r\n      File \"/home/rpanchum/stable-diffusion-webui/modules/scripts.py\", line 295, in load_scripts\r\n        script_module = script_loading.load_module(scriptfile.path)\r\n      File \"/home/rpanchum/stable-diffusion-webui/modules/script_loading.py\", line 10, in load_module\r\n        module_spec.loader.exec_module(module)\r\n      File \"<frozen importlib._bootstrap_external>\", line 843, in exec_module\r\n      File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n      File \"/home/rpanchum/stable-diffusion-webui/extensions-builtin/Lora/scripts/lora_script.py\", line 7, in <module>\r\n        import network\r\n      File \"/home/rpanchum/stable-diffusion-webui/extensions-builtin/Lora/network.py\", line 101, in <module>\r\n        class ModuleType:\r\n      File \"/home/rpanchum/stable-diffusion-webui/extensions-builtin/Lora/network.py\", line 102, in ModuleType\r\n        def create_module(self, net: Network, weights: NetworkWeights) -> Network | None:\r\n    TypeError: unsupported operand type(s) for |: 'type' and 'NoneType'\r\n\r\n---\r\n```\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-26T00:54:44Z",
        "closed_at": "2023-07-26T01:07:16Z",
        "merged_at": null,
        "body": "## Description\r\nrelated to https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/12008\r\nthis is only a fixed attempt as I don't know how `postprocess_batch_list` call back is used\r\nconsider list more of a quick patch\r\n\r\n@ljleb can you test this?\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 57,
        "changed_files": 2,
        "created_at": "2023-07-25T23:13:53Z",
        "closed_at": "2023-07-26T05:07:23Z",
        "merged_at": null,
        "body": "## Description\r\nextra networks info gets deleted due to the changes done in that that\r\nI think this can be considered as a major bug as this will cause every single information generated using that version to not have extra networks info and thus are not reproducible\r\nas opposed to reverting if we can sort out the correct logic within the short time then this doesn't need to be reverted and instead would need to be patched\r\nbut if not reverting it then reintroducing it later is faster\r\n\r\n## Screenshots/videos:\r\n1.5.0 no extra networks info\r\n```\r\nparameters\r\n\r\n1girl, miku\r\nSteps: 20, Sampler: DPM++ 2M Karras, CFG scale: 7, Seed: 3816423551, Size: 512x512, Model hash: 099e07547a, Model: darkSushiMixMix_brighterPruned, Clip skip: 2, Lora hashes: \"hatsunemiku1-000006: 8ccb2b9adc0a\", Version: v1.5.0-38-gd0bf509f\r\n```\r\n1.4.1 normal with extra networks info\r\n```\r\nparameters\r\n\r\n1girl, <lora:hatsunemiku1-000006:1> miku\r\n       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^    <---- this line is manuel highlight\r\nSteps: 20, Sampler: DPM++ 2M Karras, CFG scale: 7, Seed: 3816423551, Size: 512x512, Model hash: 099e07547a, Model: Anime_Dark Sushi Mix \u5927\u9897\u5bff\u53f8Mix_darkSushiMixMix_brighterPruned, Clip skip: 2, Lora hashes: \"hatsunemiku1-000006: 8ccb2b9adc0a\", Version: v1.4.1\r\n```\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 106,
        "deletions": 10,
        "changed_files": 2,
        "created_at": "2023-07-25T19:55:09Z",
        "closed_at": "2023-07-25T20:53:03Z",
        "merged_at": null,
        "body": "\r\n## Description\r\n* Currently the webui replaces the prompt with image information when an output image is dragged onto the prompt. This change instead prints that image info to the terminal and attempts to set information taken from image info. \r\n\r\n## Changes\r\n* Added an extra function in ui.py that returns the values of the information taken from the dragged in output image, and connected it to the prompt call. Slight change to called function in image.py to pass back needed information for the function in ui.py.\r\n\r\n## Which issues it fixes, if any\r\n* None that I know of\r\n\r\n\r\n\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-25T19:31:53Z",
        "closed_at": "2023-07-27T16:15:12Z",
        "merged_at": null,
        "body": null,
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-25T12:08:09Z",
        "closed_at": "2023-07-25T12:32:22Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-25T12:02:38Z",
        "closed_at": "2023-07-25T12:20:17Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* fix a bug when use `--api` command\r\n\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-25T11:53:25Z",
        "closed_at": "2023-07-25T11:56:55Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-07-25T11:44:52Z",
        "closed_at": "2023-07-25T12:19:11Z",
        "merged_at": "2023-07-25T12:19:11Z",
        "body": "## Description\r\npassing subpath as root_path for api when launching in api only mode\r\nrelated PR https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/11976\r\n\r\nNOTE\r\nI didn't actually test this but based on the [documentation ](https://www.uvicorn.org/settings/#http)and the `uvicorn.run()` function definition this should function correctly\r\nanother [doc](https://fastapi.tiangolo.com/advanced/behind-a-proxy/)\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-25T11:34:55Z",
        "closed_at": "2023-07-25T11:46:31Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-25T11:31:17Z",
        "closed_at": "2023-07-25T11:32:59Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 3,
        "changed_files": 1,
        "created_at": "2023-07-25T11:10:50Z",
        "closed_at": "2023-07-25T12:23:36Z",
        "merged_at": "2023-07-25T12:23:36Z",
        "body": "## Description\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/11975\r\ncatch fire not found exception for non-git extensions\r\nsince cache info might be incorrect it won't use the existing cache if `.git` is not found\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/0abcbbd6-8630-4fec-a8bb-7c26810deb51)\r\n_information is left blank_\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-25T09:20:07Z",
        "closed_at": "2023-07-25T12:19:05Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* Can't run at API `--nowebui`\r\n\r\n## Screenshots/videos:\r\n\r\n```\r\nStartup time: 47.5s (launcher: 12.4s, import torch: 4.7s, import gradio: 0.8s, setup paths: 1.1s, other imports: 2.0s, setup codeformer: 0.4s, load scripts: 2.1s, hijack-middleware.py: 0.1s, started-opts.py: 23.9s).\r\nTraceback (most recent call last):\r\n  File \"./stable-diffusion-webui/launch.py\", line 39, in <module>\r\n    main()\r\n  File \"./stable-diffusion-webui/launch.py\", line 35, in main\r\n    start()\r\n  File \"./stable-diffusion-webui/modules/launch_utils.py\", line 392, in start\r\n    webui.api_only()\r\n  File \"./stable-diffusion-webui/webui.py\", line 374, in api_only\r\n    api.launch(\r\nTypeError: Api.launch() got an unexpected keyword argument 'root_path'\r\n\r\n\r\n```\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 5
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-24T22:01:59Z",
        "closed_at": "2023-07-25T13:17:41Z",
        "merged_at": "2023-07-25T13:17:41Z",
        "body": "## Description\r\n\r\nTitle. ~~I feel like the current code is actually wrong (what's the point of the `0_` prefix?) but~~ I don't have any other LoRAs or models to test with that match this behavior, so I'm allowing both of keys like these to be parsed:\r\n- `0_transformer_text_model_encoder_layers_0_mlp_fc1` (orginally accounted for)\r\n- `transformer_text_model_encoder_layers_0_mlp_fc1` (this PR)\r\n\r\nIf you want a LoRA to try this with, go to /hdg/ thread `#350` on 4chan and Ctrl+F for `Qm41TZbD`. I can't link directly here since it's NSFW and this is the only example I have for this. In it's current state without this PR applied, it spits out a huge dict for `Failed to match keys when loading network`. \r\n\r\n**Edit:** I'm guessing the current code is only accounting for SDXL which has two TEs, so that would make sense. I'm not sure why this LoRA in particular has the index in it's key names, since it's trained on an SD1 model, but at least it solves the issue.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 114,
        "deletions": 13,
        "changed_files": 4,
        "created_at": "2023-07-24T19:11:30Z",
        "closed_at": "2023-07-29T04:43:04Z",
        "merged_at": "2023-07-29T04:43:04Z",
        "body": "## Description\r\n\r\n* makes the webui use less system RAM (not VRAM) when creating models\r\n* works by allocating all parameters on the torch's `meta` device when creating a model, and deleting them from the state_dict one by one as the parameters are loaded into model by `load_state_dict`\r\n*  cmd arg `--disable-model-loading-ram-optimization` disables it\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 6
    },
    {
        "merged": true,
        "additions": 57,
        "deletions": 1,
        "changed_files": 2,
        "created_at": "2023-07-24T18:02:56Z",
        "closed_at": "2023-07-24T20:18:17Z",
        "merged_at": "2023-07-24T20:18:17Z",
        "body": "Follow-up of #11933\r\n\r\n## Description\r\n\r\nIn sd-webui-comfyui, we need to be able to replace all images in a batch with a completely unrelated set of images before saving. A possible candidate solution for this is to implement a new script callback that receives the batch images as a list instead of a single tensor.\r\n\r\nFeedback welcome on the implementation and docstrings.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 3672,
        "deletions": 1385,
        "changed_files": 98,
        "created_at": "2023-07-24T13:37:47Z",
        "closed_at": "2023-07-24T14:01:40Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 6,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-24T11:46:56Z",
        "closed_at": "2023-07-29T06:37:02Z",
        "merged_at": "2023-07-29T06:37:02Z",
        "body": "## Description\r\n\r\nAdd refresh VAE model api.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-23T08:55:54Z",
        "closed_at": "2023-07-25T14:13:25Z",
        "merged_at": null,
        "body": "\"Crop and resize\" & \"Resize and fill\" is a bit confusing, using \"and\" to connect two verbs sounds like two actions. \r\n\"Crop to resize\" & \"Fill to resize\" is much better.\r\nAlternatively, \"Resize by cropping\" and \"Resize by filling\" is also OK.\r\n\r\n## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-07-23T01:35:47Z",
        "closed_at": "2023-07-24T08:45:35Z",
        "merged_at": null,
        "body": "(duplicate of #11932, I overlooked the target branch)\r\n\r\n## Description\r\n\r\nIn https://github.com/ModelSurge/sd-webui-comfyui/pull/63 we're making it possible to run a comfyui workflow that runs automatically as a postprocessing step. We're having trouble making it possible to save a different number of images than what the webui has generated, while also allowing to resize the images. Basically, we need to be able to save a completely different set of images than what the webui generates.\r\n\r\nIf the workflow has multiple output nodes, then it returns new images. Here's an example:\r\n\r\n<details>\r\n\r\n<summary>duplicate images postprocessing example (click to open)</summary>\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/32277961/99c6ff8c-7e4d-40cd-9b4d-70a4d4a09dac)\r\n\r\n</details>\r\n\r\nTo do achieve this, there are multiple callbacks at our disposal:\r\n\r\n- `scripts.Script.postprocess_image`\r\n    - this hook does not work because we have to return exactly 1:1 image as output. We also cannot keep the batch size in comfyui, it is forced to be one image at a time here because we can only process 1 image at a time\r\n- `scripts.Script.postprocess_batch`\r\n    - this hook does not work because on top of having to return exactly 1 image as output, it is not possible to change the shape of the images. a single tensor of the whole batch is passed to this callback, which only makes it possible to apply in-place tensor operations, which in turn don't allow to resize the tensor\r\n- `scripts.Script.postprocess`\r\n    - this is the least bad option we found as it allows to return a different number of images and resize them as we need\r\n    - however, this requires extensive copy pasting of the image saving logic, and does not future proof any possible implementation by the extension\r\n\r\nAs a solution, passing a list to `scripts.Script.postprocess_batch` instead of a tensor of the entire batch makes it possible for extension code to mutate the list in place before it is iterated over in `modules.postprocessing.process_images_inner` to save each image.\r\n\r\nIt appears that some scripts return arbitrary values from `scripts.Script.postprocess_batch`, so we cannot rely on the return value without breaking existing code (for example, sd-webui-roop). It is also impossible to directly replace the batch tensor with a list, as it would break the sd-webui-controlnet extension among others. The least disruptive way I found to implement this, is to pass an additional list of tensors that reuse the storage of the batch tensor, and then carry the changes to these tensors to the next script callback.\r\n\r\nEdit: carrying the changes does not work as the size of each element in the list do not need to match. It does not work because consolidating the changes of one script require to turn the list into a tensor for the next script.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 13,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-07-22T22:33:48Z",
        "closed_at": "2023-07-23T01:25:07Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nIn https://github.com/ModelSurge/sd-webui-comfyui/pull/63 we're making it possible to run a comfyui workflow that runs automatically as a postprocessing step. We're having trouble making it possible to save a different number of images than what the webui has generated, while also allowing to resize the images. Basically, we need to be able to save a completely different set of images than what the webui generates.\r\n\r\nIf the workflow has multiple output nodes, then it returns new images. Here's an example:\r\n\r\n<details>\r\n\r\n<summary>duplicate images postprocessing example (click to open)</summary>\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/32277961/99c6ff8c-7e4d-40cd-9b4d-70a4d4a09dac)\r\n\r\n</details>\r\n\r\nTo do achieve this, there are multiple callbacks at our disposal:\r\n\r\n- `scripts.Script.postprocess_image`\r\n    - this hook does not work because we have to return exactly 1:1 image as output. We also cannot keep the batch size in comfyui, it is forced to be one image at a time here because we can only process 1 image at a time\r\n- `scripts.Script.postprocess_batch`\r\n    - this hook does not work because on top of having to return exactly 1 image as output, it is not possible to change the shape of the images. a single tensor of the whole batch is passed to this callback, which only makes it possible to apply in-place tensor operations, which in turn don't allow to resize the tensor\r\n- `scripts.Script.postprocess`\r\n    - this is the least bad option we found as it allows to return a different number of images and resize them as we need\r\n    - however, this requires extensive copy pasting of the image saving logic, and does not future proof any possible implementation by the extension\r\n\r\nAs a solution, passing a list to `scripts.Script.postprocess_batch` instead of a tensor of the entire batch makes it possible for extension code to mutate the list in place before it is iterated over in `modules.postprocessing.process_images_inner` to save each image.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 7
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-22T11:52:49Z",
        "closed_at": "2023-07-22T13:36:40Z",
        "merged_at": "2023-07-22T13:36:40Z",
        "body": "## Description\r\n\r\nPutting a newline anywhere in any prompt when using composable diffusion with prompt weighting breaks the parsing: weights are not taken into account and become a part of the prompt. This is because the regex for the `: float` weight matches text with `.` (`.*?`), which does not include `\\s`.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-22T10:09:14Z",
        "closed_at": "2023-07-22T13:37:03Z",
        "merged_at": "2023-07-22T13:37:03Z",
        "body": "## Description\r\n\r\n* Fix https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/11921#issuecomment-1646547908\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-22T09:54:49Z",
        "closed_at": "2023-08-09T14:03:25Z",
        "merged_at": "2023-08-09T14:03:25Z",
        "body": "## Description\r\n\r\n* Add a progressbar indicator for extension installers\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-22T06:33:00Z",
        "closed_at": "2023-07-22T10:44:56Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* fix vae loading order: call `sd_vae.refresh_vae_list()` before `modules.sd_models.setup_model()`\r\n\r\n## Screenshots:\r\nbefore\r\n~~~bash\r\n...\r\nvenv \"F:\\webui\\webui\\stable-diffusion-webui\\venv\\Scripts\\Python.exe\"\r\nPython 3.10.11 (tags/v3.10.11:7d4cc5a, Apr  5 2023, 00:38:17) [MSC v.1929 64 bit (AMD64)]\r\nVersion: v1.4.1\r\nCommit hash: f865d3e11647dfd6c7b2cdf90dde24680e58acd8\r\nInstalling requirements\r\n...\r\nLoading weights [xxxxxxxxxx] from F:\\webui\\webui\\stable-diffusion-webui\\models\\Stable-diffusion\\foobar.safetensors\r\nCreating model from config: F:\\webui\\webui\\stable-diffusion-webui\\configs\\v1-inference.yaml\r\nLatentDiffusion: Running in eps-prediction mode\r\nDiffusionWrapper has 859.52 M params.\r\nCouldn't find VAE named kl-f8-anime2.ckpt; using None instead\r\nTextual inversion embeddings loaded(26):...\r\n~~~\r\nafter\r\n~~~bash\r\n...\r\nLoading VAE weights specified in settings: F:\\webui\\webui\\stable-diffusion-webui\\models\\VAE\\kl-f8-anime2.ckpt\r\n~~~\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 20,
        "deletions": 16,
        "changed_files": 1,
        "created_at": "2023-07-22T02:06:23Z",
        "closed_at": "2023-07-22T04:03:21Z",
        "merged_at": "2023-07-22T04:03:21Z",
        "body": "## Description\r\n\r\ncurrently, if txt2img/img2img api raise Exception will not call state.end(), and some dirty data of progress api will not be clean. such as `job_count` it may affect the api client to determine whether the webui has a running job.\r\n```\r\n{\r\n  \"progress\": 0.01,\r\n  \"eta_relative\": 12956.262474775314,\r\n  \"state\": {\r\n    \"skipped\": false,\r\n    \"interrupted\": false,\r\n    \"job\": \"scripts_txt2img\",\r\n    \"job_count\": 1,\r\n    \"job_timestamp\": \"20230722014520\",\r\n    \"job_no\": 0,\r\n    \"sampling_step\": 0,\r\n    \"sampling_steps\": 20\r\n  },\r\n  \"current_image\": null,\r\n  \"textinfo\": null\r\n}\r\n```\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ x ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ x ] I have performed a self-review of my own code\r\n- [ x ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ x ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-21T14:01:57Z",
        "closed_at": "2023-07-21T15:00:03Z",
        "merged_at": "2023-07-21T15:00:03Z",
        "body": "## Description\r\n\r\n* prepend the pythonpath instead of overriding it on install.py of extension\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 5,
        "deletions": 5,
        "changed_files": 3,
        "created_at": "2023-07-21T13:50:18Z",
        "closed_at": "2023-07-21T15:01:20Z",
        "merged_at": "2023-07-21T15:01:20Z",
        "body": null,
        "comments": 0
    },
    {
        "merged": false,
        "additions": 6,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-07-21T04:14:21Z",
        "closed_at": "2023-07-21T06:58:12Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 0,
        "deletions": 0,
        "changed_files": 0,
        "created_at": "2023-07-21T01:40:48Z",
        "closed_at": "2023-07-21T01:41:10Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 87,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-07-20T18:59:34Z",
        "closed_at": null,
        "merged_at": null,
        "body": "## Description\r\n\r\nAdding support for FlashAttention (flash-attn) optimization, which FlashAttention-2 has missive performance improvement over --xformers (current version) or --opt-sdp-attention on large images.\r\n\r\n### Usage\r\nTo use this PR, you need to manually install the `flash-attn` package (version 2.0+ for FlashAttention-2), following https://github.com/Dao-AILab/flash-attention#installation-and-features. (Note: set MAX_JOBS=1 if you run out of memory during pip install)\r\n\r\nNote that for now flash-attn 2.0+ will break `transformers`, which is one of sd webui's dependency.  \r\n(a simple hack is add a line of `flash_attn_unpadded_func = flash_attn_varlen_func` to the end of `<python's lib dir>/site-packages/flash_attn/flash_attn_interface.py`)\r\n\r\nThen add `--flash-attn` to the launch arguments to activate this.\r\n\r\nMore info: see discussion #11884 \r\n\r\n## Screenshots/videos:\r\nSee discussion #11884 \r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 13
    },
    {
        "merged": false,
        "additions": 441,
        "deletions": 3,
        "changed_files": 18,
        "created_at": "2023-07-20T15:39:04Z",
        "closed_at": "2023-07-20T15:40:56Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 2,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-20T15:25:45Z",
        "closed_at": "2023-07-20T16:16:40Z",
        "merged_at": "2023-07-20T16:16:40Z",
        "body": "Fix width/height not getting fed into the conditioning\r\n\r\n## Description\r\n\r\nAllow width/height to be fed into the SDXL conditioning as intended.\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-07-20T09:13:56Z",
        "closed_at": "2023-07-25T13:27:04Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* I deploy some diffusion instances in a Kubernetes cluster and access these instances by a domain name\u3002\r\n* in my case, the domain name is test.com, I want `test.com/diffusion-0` to access the `diffusion-0` pod, `test.com/diffusion-1` to access the `diffusion-1` pod, etc...\r\n* pod's entrypoint command is: `./webui.sh -f --listen --theme dark --api --xformers --enable-insecure-extension-access --subpath ${HOSTNAME} `\r\n* ingress yaml is:\r\n```\r\napiVersion: networking.k8s.io/v1\r\nkind: Ingress\r\nmetadata:\r\n  annotations:\r\n    nginx.ingress.kubernetes.io/client-body-buffer-size: 10m\r\n    nginx.ingress.kubernetes.io/configuration-snippet: |\r\n      rewrite /[^/]+/(.*) /$1 break;\r\n    nginx.ingress.kubernetes.io/proxy-body-size: 10m\r\n  name: diffusion\r\n  namespace: default\r\nspec:\r\n  rules:\r\n  - host: test.com\r\n    http:\r\n      paths:\r\n      - backend:\r\n          service:\r\n            name: diffusion-0\r\n            port:\r\n              number: 7860\r\n        path: /diffusion-0/\r\n        pathType: ImplementationSpecific\r\n```\r\n* When accessing `test.com/diffusion-0/`, the browser sends requests to \"/info\" and \"/theme.css\", and returns 404, it should send requests to `/diffusion-0/info` and `/diffusion-0/theme.css`.\r\n## Screenshots/videos:\r\n\r\n## Checklist:\r\n\r\n- [ Y ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ Y ] I have performed a self-review of my own code\r\n- [ Y ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ Y ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": false,
        "additions": 65,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-07-20T06:34:48Z",
        "closed_at": "2023-07-21T23:01:30Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nAdded the restart sampler as described in https://arxiv.org/pdf/2306.14878.pdf. The changes are made in sd_samplers_kdiffusion.py. Also added credit in README.md. \r\n\r\nSince last pull request, tuned the parameters so there won't be 18 additional steps. \r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/46507649/7a7744d7-aaa5-4f81-9d8e-24224185fc34)\r\n\r\n\r\n## Checklist:\r\n\r\n- [Y] I have read [[contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [Y] I have performed a self-review of my own code\r\n- [Y] My code follows the [[style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [Y] My code passes [[tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)](",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-19T09:57:27Z",
        "closed_at": "2023-07-19T13:26:13Z",
        "merged_at": "2023-07-19T13:26:13Z",
        "body": "When using BertSeriesModelWithTransformation as the cond_stage_model, the undo_hijack should be performed using the FrozenXLMREmbedderWithCustomWords type; otherwise, it will result in a failed model reload.\r\n\r\n## Description\r\n\r\n* When using BertSeriesModelWithTransformation as the cond_stage_model, the undo_hijack should be performed using the FrozenXLMREmbedderWithCustomWords type\r\n* undo_hijack  :FrozenXLMREmbedderWithCustomWords:\r\n\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [ ] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [ ] I have performed a self-review of my own code\r\n- [ ] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-18T23:35:30Z",
        "closed_at": "2023-07-19T04:58:34Z",
        "merged_at": "2023-07-19T04:58:34Z",
        "body": "## Description\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/b010eea520caa90d2a31d98ec7c4a9d9d540c9ad/modules/processing.py#L1032\r\nfix missing p for images.save_image `before-highres-fix`\r\nthe missing p case all filename patterns that use p to not work\r\n\r\nthe other 2 intermediate saves `before-color-correction` `before-face-restoration` all have p\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/b010eea520caa90d2a31d98ec7c4a9d9d540c9ad/modules/processing.py#L786\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/blob/b010eea520caa90d2a31d98ec7c4a9d9d540c9ad/modules/processing.py#L803\r\n\r\nI have no idea how this bug survive 7 months without being noticed\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/4d66bf2c0d27702cc83b9cc57ebb1f359d18d938\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-18T20:00:26Z",
        "closed_at": "2023-07-18T20:23:26Z",
        "merged_at": "2023-07-18T20:23:26Z",
        "body": "## Description\r\nadd the lable of the sort order drop down so that the default sort method can be config can be the user\r\n## Screenshots/videos:\r\n```json\r\n    \"txt2img/txt2img_extra_sort_order/value\": \"Default Sort\",\r\n    \"img2img/img2img_extra_sort_order/value\": \"Default Sort\"\r\n```\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-07-18T19:44:45Z",
        "closed_at": "2023-07-19T05:00:05Z",
        "merged_at": "2023-07-19T05:00:05Z",
        "body": "## Description\r\n\r\nIt can skip venv if `webui.sh` is run with `venv_dir=-` env variable. Might be useful for installing in Docker since messing with venv in Docker might be a bit complicated.\r\n\r\nExample usage:\r\n`venv_dir=- webui.sh`\r\n\r\nHope this gets approved and pushed into future versions of Web UI",
        "comments": 3
    },
    {
        "merged": false,
        "additions": 20,
        "deletions": 3,
        "changed_files": 7,
        "created_at": "2023-07-18T14:21:02Z",
        "closed_at": "2023-07-18T14:27:52Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 3,
        "changed_files": 2,
        "created_at": "2023-07-18T11:02:19Z",
        "closed_at": "2023-07-22T09:19:37Z",
        "merged_at": "2023-07-22T09:19:37Z",
        "body": "## Description\r\n\r\nmove the start timer to the actual entrypoint\r\n\r\nprevent actually starting a timer (on the comfy extension)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 4
    },
    {
        "merged": true,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-18T08:22:32Z",
        "closed_at": "2023-07-18T08:48:02Z",
        "merged_at": "2023-07-18T08:48:02Z",
        "body": "## Description\r\n\r\n* fix #11805\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 8,
        "deletions": 0,
        "changed_files": 2,
        "created_at": "2023-07-18T07:18:29Z",
        "closed_at": "2023-07-18T07:46:27Z",
        "merged_at": null,
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 72,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-07-18T05:21:37Z",
        "closed_at": "2023-07-29T05:03:32Z",
        "merged_at": "2023-07-29T05:03:32Z",
        "body": "## Description\r\n\r\nAdded the restart sampler as described in https://arxiv.org/pdf/2306.14878.pdf. The changes are made in sd_samplers_kdiffusion.py. \r\n\r\n## Screenshots/videos:\r\n\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/46507649/06c84460-a449-4513-8444-f95a9e971d8a)\r\n\r\n\r\n## Checklist:\r\n\r\n- [Y] I have read [[contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [Y] I have performed a self-review of my own code\r\n- [Y] My code follows the [[style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [Y] My code passes [[tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)",
        "comments": 16
    },
    {
        "merged": false,
        "additions": 63,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-18T05:06:04Z",
        "closed_at": "2023-07-18T06:05:57Z",
        "merged_at": null,
        "body": "## Description\r\n\r\nAdded the restart sampler as described in https://arxiv.org/pdf/2306.14878.pdf. The changes are made in sd_samplers_kdiffusion.py. \r\n\r\n## Screenshots/videos:\r\n\r\n\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/46507649/06c84460-a449-4513-8444-f95a9e971d8a)\r\n\r\n\r\n## Checklist:\r\n\r\n- [Y] I have read [[contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [Y] I have performed a self-review of my own code\r\n- [Y] My code follows the [[style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [Y] My code passes [[tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 8,
        "deletions": 2,
        "changed_files": 2,
        "created_at": "2023-07-18T04:36:36Z",
        "closed_at": "2023-07-18T05:08:20Z",
        "merged_at": "2023-07-18T05:08:20Z",
        "body": "## Description\r\n- Fix the `apply_model` hijack for upcast sampling so that it does not convert all of the `cond` dictionary values into lists\r\n- Add the upcast sampling hijacks for SD XL\r\n- `model.model.diffusion_model.dtype` is always `torch.float32` for SD XL (likely due to the removal of `use_fp16`), so assume float16 if `.half()` was applied\r\n\r\nThis fixes the crashes when using SD XL on macOS without `--no-half`.\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [X] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n\r\n## Environment this was tested in:\r\n\r\n - OS: macOS 13.4.1 (c)\r\n - Browser: Safari\r\n - Graphics card: M1 Max 64 GB",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 4,
        "changed_files": 1,
        "created_at": "2023-07-18T02:26:30Z",
        "closed_at": "2023-07-18T05:05:28Z",
        "merged_at": "2023-07-18T05:05:28Z",
        "body": "in ModuleTypeLokr\r\nthe lokr_w1_a (for 1/2 and a/b) become lokr_w1a\r\nwhich cause the module to check wrong key and cannot load lokr successefully\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 3525,
        "deletions": 1347,
        "changed_files": 93,
        "created_at": "2023-07-18T02:25:57Z",
        "closed_at": "2023-07-18T02:26:05Z",
        "merged_at": null,
        "body": "in ModuleTypeLokr\r\nthe lokr_w1_a (for 1/2 and a/b) become lokr_w1a\r\nwhich cause the module to check wrong key and cannot load lokr successefully\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-17T14:24:46Z",
        "closed_at": "2023-07-18T00:33:51Z",
        "merged_at": null,
        "body": "Changes the value from None to \"\", this fixes the issue of the request to /sdapi/v1/options and makes it possible",
        "comments": 3
    },
    {
        "merged": true,
        "additions": 7,
        "deletions": 7,
        "changed_files": 2,
        "created_at": "2023-07-17T10:52:15Z",
        "closed_at": "2023-08-04T05:12:34Z",
        "merged_at": "2023-08-04T05:12:34Z",
        "body": "## Description\r\n\r\n* a simple description of what you're trying to accomplish\r\n* a summary of changes in code\r\n* which issues it fixes, if any\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 10
    },
    {
        "merged": true,
        "additions": 11,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-17T03:28:02Z",
        "closed_at": "2023-07-17T12:56:34Z",
        "merged_at": "2023-07-17T12:56:34Z",
        "body": "## Description\r\nalternative implementation of https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/11817\r\n\r\nkey difference of implementation\r\nthe functions can be reused for other fields\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 1
    },
    {
        "merged": true,
        "additions": 972,
        "deletions": 593,
        "changed_files": 14,
        "created_at": "2023-07-16T20:17:41Z",
        "closed_at": "2023-07-17T12:51:59Z",
        "merged_at": "2023-07-17T12:51:59Z",
        "body": "## Description\r\n\r\n* rework of the lora extension to also include networks provided by LyCORIS extension\r\n* LoCon (=Lora), Hada, IA3, Lokr, FullModule are all supported\r\n* Hada tested on https://civitai.com/models/38092/kyoto-animation-screencap-artstyle\r\n* IA3 tested on https://civitai.com/models/108693?modelVersionId=117044\r\n* Lokr tested on https://civitai.com/models/35136\r\n* full module tested on https://arozos.kblueleaf.net/share/047a3c33-16eb-4d44-b705-f82ab82c5a94/\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 10,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-07-16T16:12:20Z",
        "closed_at": "2023-07-17T12:56:49Z",
        "merged_at": null,
        "body": "Just a quick entry to the type list of the X/Y/Z script to be able to target the \"Always discard next-to-last sigma\" setting.\r\n\r\n## Description\r\n\r\n* An entry in the list with strings \"True\" and \"False\"\r\n* A new function to process True & False as I couldn't make it work with boolean choices\r\n* The function defaults to False if no entry is passed (shouldn't happen but you never know)\r\n\r\n## Screenshots/videos:\r\n![xyz](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/4924572/ec66b0a3-0025-4be8-8471-db10e52e9d5e)\r\n\r\nMakes running the same prompt against Clip skip for instance easier.\r\n\r\n![xyz_grid-0010-realisian_v50-2916047939-action shot 1girl extremely detailed book](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/4924572/cd053b8e-807e-4dc6-ac71-e945a4420a9c)\r\n\r\n## Checklist:\r\n\r\n- [X] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [X] I have performed a self-review of my own code\r\n- [X] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [ ] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 2
    },
    {
        "merged": false,
        "additions": 1,
        "deletions": 1,
        "changed_files": 1,
        "created_at": "2023-07-16T10:40:03Z",
        "closed_at": "2023-07-16T10:54:31Z",
        "merged_at": null,
        "body": "## Description\r\nhttps://github.com/AUTOMATIC1111/stable-diffusion-webui/commit/ccd97886da1f659472cdca3de8731f59a70bbc28 breaks extension\r\ncached_data_for_file is broken for extension\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 55,
        "deletions": 55,
        "changed_files": 4,
        "created_at": "2023-07-16T08:41:53Z",
        "closed_at": "2023-08-05T05:07:26Z",
        "merged_at": "2023-08-05T05:07:26Z",
        "body": "## Description\r\n\r\n* removes the extra networks button\r\n* always shows extra networks tabs\r\n* main generation interface becomes the first tab of the  extra networks tabset\r\n\r\n## Screenshots/videos:\r\n\r\n![firefox_vsMiy0KPDA](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/20920490/53bb1b1e-f654-4218-9f7d-c6159f8ac6d5)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 14
    },
    {
        "merged": true,
        "additions": 4,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-07-16T03:53:19Z",
        "closed_at": "2023-07-16T06:26:08Z",
        "merged_at": "2023-07-16T06:26:08Z",
        "body": "## Description\r\nResponse 404 instead of crash when thumb file is not found.\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 19,
        "deletions": 0,
        "changed_files": 1,
        "created_at": "2023-07-15T16:26:14Z",
        "closed_at": "2023-07-16T06:26:48Z",
        "merged_at": "2023-07-16T06:26:48Z",
        "body": "## Description\r\nAttempt to address a bug known as `AUTOMATIC1111`\r\nunfortunately I can only speculate on the cause of the bug as this mysterious entity is stroud in mystery\r\nwe only know that the bug happened sporadically, more research is needed\r\n\r\nrun a action that deliberately fails when a pull request targets master branch\r\nit doesn't prevent it but it makes it obvious that a pull request is going into master\r\n\r\n## Screenshots/videos:\r\n![image](https://github.com/AUTOMATIC1111/stable-diffusion-webui/assets/40751091/be45f858-44c1-4858-b37b-d867dcc740f4)\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    },
    {
        "merged": true,
        "additions": 3,
        "deletions": 2,
        "changed_files": 1,
        "created_at": "2023-07-15T09:11:12Z",
        "closed_at": "2023-07-16T06:27:07Z",
        "merged_at": "2023-07-16T06:27:07Z",
        "body": "## Description\r\n\r\n* allow replacing extensions index with environment variable\r\n\r\n## Screenshots/videos:\r\n\r\n\r\n## Checklist:\r\n\r\n- [x] I have read [contributing wiki page](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing)\r\n- [x] I have performed a self-review of my own code\r\n- [x] My code follows the [style guidelines](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Contributing#code-style)\r\n- [x] My code passes [tests](https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Tests)\r\n",
        "comments": 0
    }
]